<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / questions #95</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / questions #95</h1><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/94.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1610358296.238400"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1610358296.238400">2021-01-11&nbsp;18:44:56 +0900</a></div></div><div class="message__body description">取り急ぎ。package.yamlは使わなくともstackは使えます。</div></div></div><div class="message event" id="message-1610358351.238600"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1610358351.238600">2021-01-11&nbsp;18:45:51 +0900</a></div></div><div class="message__body description">stackとcabalの全般的な話ですが、 <a href='https://the.igreque.info/slides/2019-11-29-stack-cabal.html#(1)'>https://the.igreque.info/slides/2019-11-29-stack-cabal.html#(1)</a> から大きく状況は変わっていないと思います。</div></div></div><div class="message event" id="message-1610358442.238800"><div class="content"><div class="summary"><div class="message__header user">dyoshikawa1993</div><div class="message__timestamp date"><a class="date" href="#message-1610358442.238800">2021-01-11&nbsp;18:47:22 +0900</a></div></div><div class="message__body description"><blockquote>取り急ぎ。package.yamlは使わなくともstackは使えます。</blockquote>あーそういう意味ですか、僕の解釈ミスっぽい・・・？</div></div></div><div class="message event" id="message-1610358611.239100"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1610358611.239100">2021-01-11&nbsp;18:50:11 +0900</a></div></div><div class="message__body description">はい、cabalファイルは独自形式な上構文エラーがむちゃくちゃ分かりづらいので使う意義はそれなりにあるとは思いますが、確かに機能的な差はあまりなくなりました。</div></div></div><div class="message event" id="message-1610358678.239400"><div class="content"><div class="summary"><div class="message__header user">dyoshikawa1993</div><div class="message__timestamp date"><a class="date" href="#message-1610358678.239400">2021-01-11&nbsp;18:51:18 +0900</a></div></div><div class="message__body description">ありがとうございます！<br/>最初「package.yamlは要らないと思う。Stack(そのもの)が非推奨だから。cabalで良い」というニュアンスで読んでいましたが「Stackを使うにあたりpackage.yamlは不要」と読むのが正しいということですね。</div></div></div><div class="message event" id="message-1610358813.239700"><div class="content"><div class="summary"><div class="message__header user">dyoshikawa1993</div><div class="message__timestamp date"><a class="date" href="#message-1610358813.239700">2021-01-11&nbsp;18:53:33 +0900</a></div></div><div class="message__body description">スライドも目を通させて頂きました、ありがとうございます。</div></div></div><div class="message event" id="message-1610358930.240100"><div class="content"><div class="summary"><div class="message__header user">dyoshikawa1993</div><div class="message__timestamp date"><a class="date" href="#message-1610358930.240100">2021-01-11&nbsp;18:55:30 +0900</a></div></div><div class="message__body description">• 一昔前はCabal Hellとか言われててまあStack使った方が良いよねという雰囲気だった<br/>• 最近はCabalも改善・進化した<br/>• Haskell開発に慣れてる人はCabalだけでも特に困らない<br/>という肌感なのかなと思いました。</div></div></div><div class="message event" id="message-1610366235.240500"><div class="content"><div class="summary"><div class="message__header user">minorinoki_haskjp</div><div class="message__timestamp date"><a class="date" href="#message-1610366235.240500">2021-01-11&nbsp;20:57:15 +0900</a></div></div><div class="message__body description">この件と関係するかは分かりませんが、1年ほど前に package.yaml から生成された .cabal ファイルをバージョン管理下に置くことが推奨されるようになっています。 <a href='https://github.com/commercialhaskell/stack/issues/5210'>https://github.com/commercialhaskell/stack/issues/5210</a><br/>ですが、自分の肌感覚としては自動生成されるファイルをVCS管理下に置くのは「面倒」なので、 package.yaml を捨てて .cabal を直接書くのは十分検討に値する選択肢だと思います（自分は .cabal の最近の書き方をちゃんと把握していないのでまだ移行できてませんが）。</div></div></div><div class="message event" id="message-1610367348.242300"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1610367348.242300">2021-01-11&nbsp;21:15:48 +0900</a></div></div><div class="message__body description">Stackがpackage.yamlの使用を非推奨にしたと言っています。真偽の程は分かりませんが。</div></div></div><div class="message event" id="message-1610367448.244100"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1610367448.244100">2021-01-11&nbsp;21:17:28 +0900</a></div></div><div class="message__body description">Issuesをざっと検索してみましたが非推奨になった話は見つかりませんでした。どこかで議論があったのかなあ</div></div></div><div class="message event" id="message-1610367546.245700"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1610367546.245700">2021-01-11&nbsp;21:19:06 +0900</a></div></div><div class="message__body description">他の方がコメント書いてましたね。手元のslackアプリがちゃんとロードできてなくて気が付きませんでした。</div></div></div><div class="message event" id="message-1610367687.248600"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1610367687.248600">2021-01-11&nbsp;21:21:27 +0900</a></div></div><div class="message__body description">hpackとcabalファイルの違いはだいぶ減りましたがモジュール一覧の生成に音楽性の違いみたいなものがあって、cabalでは全部列挙する必要があります。</div></div></div><div class="message event" id="message-1610370712.248900"><div class="content"><div class="summary"><div class="message__header user">dyoshikawa1993</div><div class="message__timestamp date"><a class="date" href="#message-1610370712.248900">2021-01-11&nbsp;22:11:52 +0900</a></div></div><div class="message__body description">ありがとうございます！</div></div></div><div class="message event" id="message-1610374850.249200"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date"><a class="date" href="#message-1610374850.249200">2021-01-11&nbsp;23:20:50 +0900</a></div></div><div class="message__body description">cabal ファイルと package.yaml (hpack) に関して、確か Cabal コマンドは cabal ファイルがないとビルドできないので、Cabal で hackage に無い野良 Haskell ライブラリ（GitHub にだけあるとか）を使う場合は cabal ファイルもあげてもらわないと困るはず？</div></div></div><div class="message event" id="message-1610468868.254800"><div class="content"><div class="summary"><div class="message__header user">k.marumaru524</div><div class="message__timestamp date"><a class="date" href="#message-1610468868.254800">2021-01-13&nbsp;01:27:48 +0900</a></div></div><div class="message__body description">僕は普段TypeScriptを書いて、たまにHaskellを書くのですが、なんとも上達(?)している感じがしません。<br/>Qiitaやブログで解説されているGHC拡張や、高度なモナドにたまに触れたりしますが、実際に応用する機会に気付けません。<br/><br/>そこで、2つほど、感覚的な質問をさせてください。<br/>• みなさんが「これは美しい..!!」と感じたHaskellコード(断片コード、Repository、人物)はありますでしょうか？<br/>• イケイケGHC拡張や、高度なモナドは頻繁に使用するものなのでしょうか、それとも目の前の課題に対してたまにキレイにハマるものがある、という感じなのでしょうか？<br/>雑で主観的な質問なので、軽い気持ちで返答していただけると嬉しいです。<br/><br/>ちなみに、僕がキレイだ！と思ったのは↓この辺です<br/><a href='https://scrapbox.io/mrsekut-p/Haskell%E3%81%AE%E7%BE%8E%E3%81%97%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89'>https://scrapbox.io/mrsekut-p/Haskell%E3%81%AE%E7%BE%8E%E3%81%97%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89</a></div></div></div><div class="message event" id="message-1610504850.255100"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1610504850.255100">2021-01-13&nbsp;11:27:30 +0900</a></div></div><div class="message__body description"><blockquote>イケイケGHC拡張や、高度なモナドは頻繁に使用するものなのでしょうか、それとも目の前の課題に対してたまにキレイにハマるものがある、という感じなのでしょうか？</blockquote>使わないで済むならなるべく使わずに書こう、という動きもあり、私自身それに従っています。<br/>例えばこれ: <a href='https://www.snoyman.com/blog/2019/11/boring-haskell-manifesto'>https://www.snoyman.com/blog/2019/11/boring-haskell-manifesto</a></div></div></div><div class="message event" id="message-1610513339.255500"><div class="content"><div class="summary"><div class="message__header user">dyoshikawa1993</div><div class="message__timestamp date"><a class="date" href="#message-1610513339.255500">2021-01-13&nbsp;13:48:59 +0900</a></div></div><div class="message__body description">Haskellerではなく恐縮ですが、自分はIOや再代入に言語機能レベルで制約が設けられていることに魅力を感じて勉強しています。<br/>美しさというよりは実用性重視です:+1:</div></div></div><div class="message event" id="message-1610513716.256100"><div class="content"><div class="summary"><div class="message__header user">dyoshikawa1993</div><div class="message__timestamp date"><a class="date" href="#message-1610513716.256100">2021-01-13&nbsp;13:55:16 +0900</a></div></div><div class="message__body description">（そういえば僕も業務では専らTSです）</div></div></div><div class="message event" id="message-1610590632.000100"><div class="content"><div class="summary"><div class="message__header user">ncaq</div><div class="message__timestamp date"><a class="date" href="#message-1610590632.000100">2021-01-14&nbsp;11:17:12 +0900</a></div></div><div class="message__body description">昔cabalファイルignoreしてたらNixOSだかArchだかのメンテナに「無いと困るんですが…」って言われましたね<br/>オプションいじったら問題なかったみたいですが</div></div></div><div class="message event" id="message-1610765534.000700"><div class="content"><div class="summary"><div class="message__header user">hal2cilu</div><div class="message__timestamp date"><a class="date" href="#message-1610765534.000700">2021-01-16&nbsp;11:52:14 +0900</a></div></div><div class="message__body description">@hal2cilu has joined the channel</div></div></div><div class="message event" id="message-1610880354.000900"><div class="content"><div class="summary"><div class="message__header user">paulpoiu123</div><div class="message__timestamp date"><a class="date" href="#message-1610880354.000900">2021-01-17&nbsp;19:45:54 +0900</a></div></div><div class="message__body description">@paulpoiu123 has joined the channel</div></div></div><div class="message event" id="message-1610927921.001100"><div class="content"><div class="summary"><div class="message__header user">mpenz.m_0</div><div class="message__timestamp date"><a class="date" href="#message-1610927921.001100">2021-01-18&nbsp;08:58:41 +0900</a></div></div><div class="message__body description">@mpenz.m_0 has joined the channel</div></div></div><div class="message event" id="message-1610987216.001300"><div class="content"><div class="summary"><div class="message__header user">jimi.woodstock1995</div><div class="message__timestamp date"><a class="date" href="#message-1610987216.001300">2021-01-19&nbsp;01:26:56 +0900</a></div></div><div class="message__body description">@jimi.woodstock1995 has joined the channel</div></div></div><div class="message event" id="message-1611106547.001500"><div class="content"><div class="summary"><div class="message__header user">okinakahiro</div><div class="message__timestamp date"><a class="date" href="#message-1611106547.001500">2021-01-20&nbsp;10:35:47 +0900</a></div></div><div class="message__body description">@okinakahiro has joined the channel</div></div></div><div class="message event" id="message-1611155070.001700"><div class="content"><div class="summary"><div class="message__header user">kaz45684</div><div class="message__timestamp date"><a class="date" href="#message-1611155070.001700">2021-01-21&nbsp;00:04:30 +0900</a></div></div><div class="message__body description">@kaz45684 has joined the channel</div></div></div><div class="message event" id="message-1611252714.001300"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611252714.001300">2021-01-22&nbsp;03:11:54 +0900</a></div></div><div class="message__body description"><code>dist-newstyle\build\x86_64-windows\ghc-8.10.3\foo-0.1.0.0</code> みたいなパスを cabal-install で取得する方法をどなたかご存じですか？</div></div></div><div class="message event" id="message-1611301450.001600"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611301450.001600">2021-01-22&nbsp;16:44:10 +0900</a></div></div><div class="message__body description">背景を書くと、<br/>• DLL を生成したい<br/>• DLL に C で実装した関数も含めたい<br/>• cabal build では ghc に -c オプションを渡して .o ファイルを生成している<br/>• C コードも別途 ghc -c で .o ファイルを生成している<br/>• DLL 生成は ghc -shared で、このとき事前に生成した .o の場所を知りたい</div></div></div><div class="message event" id="message-1611301473.001900"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611301473.001900">2021-01-22&nbsp;16:44:33 +0900</a></div></div><div class="message__body description">そもそも cabal で DLL 生成までできるのかな</div></div></div><div class="message event" id="message-1611304835.002200"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611304835.002200">2021-01-22&nbsp;17:40:35 +0900</a></div></div><div class="message__body description"><code>--enable-shared</code> ふむ <a href='https://cabal.readthedocs.io/en/3.4/cabal-project.html#dynamic-linking-options'>https://cabal.readthedocs.io/en/3.4/cabal-project.html#dynamic-linking-options</a></div></div></div><div class="message event" id="message-1611308057.002400"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611308057.002400">2021-01-22&nbsp;18:34:17 +0900</a></div></div><div class="message__body description"><code>--enable-shared</code> 試したけどどこに生成されるんだ？</div></div></div><div class="message event" id="message-1611308115.002600"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611308115.002600">2021-01-22&nbsp;18:35:15 +0900</a></div></div><div class="message__body description"><blockquote>• cabal build では ghc に -c オプションを渡して .o ファイルを生成している</blockquote>ここの -c は要らないな</div></div></div><div class="message event" id="message-1611309552.002800"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611309552.002800">2021-01-22&nbsp;18:59:12 +0900</a></div></div><div class="message__body description"><blockquote>• C コードも別途 ghc -c で .o ファイルを生成している</blockquote>ここもオプション要らないな</div></div></div><div class="message event" id="message-1611321635.003100"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date"><a class="date" href="#message-1611321635.003100">2021-01-22&nbsp;22:20:35 +0900</a></div></div><div class="message__body description"><a href='https://github.com/as-capabl/clay-dhall/blob/master/aux-list-path/src/aux-list-path.hs'>https://github.com/as-capabl/clay-dhall/blob/master/aux-list-path/src/aux-list-path.hs</a> cabal-planを使うと良さそうでしょうか</div></div></div><div class="message event" id="message-1611321745.003500"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date"><a class="date" href="#message-1611321745.003500">2021-01-22&nbsp;22:22:25 +0900</a></div></div><div class="message__body description">新しいcabal-planだとplan.jsonの場所を取得する機能もあるみたいです</div></div></div><div class="message event" id="message-1611401842.003800"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611401842.003800">2021-01-23&nbsp;20:37:22 +0900</a></div></div><div class="message__body description">教えてもらった cabal-plan でビルドツール書いてたんですけど、cabal ファイルに <code>foreign-library</code> というのがあるのを発見した<br/><a href='https://cabal.readthedocs.io/en/3.4/cabal-package.html#foreign-libraries'>https://cabal.readthedocs.io/en/3.4/cabal-package.html#foreign-libraries</a></div></div></div><div class="message event" id="message-1611402955.004000"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1611402955.004000">2021-01-23&nbsp;20:55:55 +0900</a></div></div><div class="message__body description"><code>foreign-library</code> でイッパツだった:hugging_face:</div></div></div><div class="message event" id="message-1611634240.004500"><div class="content"><div class="summary"><div class="message__header user">kimura.masatoshi74</div><div class="message__timestamp date"><a class="date" href="#message-1611634240.004500">2021-01-26&nbsp;13:10:40 +0900</a></div></div><div class="message__body description">@kimura.masatoshi74 has joined the channel</div></div></div><div class="message event" id="message-1612036429.007300"><div class="content"><div class="summary"><div class="message__header user">kdxu</div><div class="message__timestamp date"><a class="date" href="#message-1612036429.007300">2021-01-31&nbsp;04:53:49 +0900</a></div></div><div class="message__body description">@kdxu has joined the channel</div></div></div><div class="message event" id="message-1612186740.007600"><div class="content"><div class="summary"><div class="message__header user">mzkxkze</div><div class="message__timestamp date"><a class="date" href="#message-1612186740.007600">2021-02-01&nbsp;22:39:00 +0900</a></div></div><div class="message__body description">@mzkxkze has joined the channel</div></div></div><div class="message event" id="message-1612679205.007800"><div class="content"><div class="summary"><div class="message__header user">winterland1989</div><div class="message__timestamp date"><a class="date" href="#message-1612679205.007800">2021-02-07&nbsp;15:26:45 +0900</a></div></div><div class="message__body description">@winterland1989 has joined the channel</div></div></div><div class="message event" id="message-1612958227.009300"><div class="content"><div class="summary"><div class="message__header user">kshiva1126</div><div class="message__timestamp date"><a class="date" href="#message-1612958227.009300">2021-02-10&nbsp;20:57:07 +0900</a></div></div><div class="message__body description">@kshiva1126 has joined the channel</div></div></div><div class="message event" id="message-1612965162.010500"><div class="content"><div class="summary"><div class="message__header user">benzene.chlorobenzene</div><div class="message__timestamp date"><a class="date" href="#message-1612965162.010500">2021-02-10&nbsp;22:52:42 +0900</a></div></div><div class="message__body description">shake256のハッシュを無限リストとして返してくれるようなライブラリってありますか？<br/>必要な長さがハッシュの内容に依存するような計算をしたいです</div></div></div><div class="message event" id="message-1613002824.010700"><div class="content"><div class="summary"><div class="message__header user">benzene.chlorobenzene</div><div class="message__timestamp date"><a class="date" href="#message-1613002824.010700">2021-02-11&nbsp;09:20:24 +0900</a></div></div><div class="message__body description">結局必要に応じて"入力"++"カウンター"の固定長のハッシュを計算させれば良いという結論に至りました。</div></div></div><div class="message event" id="message-1613281732.011100"><div class="content"><div class="summary"><div class="message__header user">stat.yukiyama</div><div class="message__timestamp date"><a class="date" href="#message-1613281732.011100">2021-02-14&nbsp;14:48:52 +0900</a></div></div><div class="message__body description">@stat.yukiyama has joined the channel</div></div></div><div class="message event" id="message-1613550824.011300"><div class="content"><div class="summary"><div class="message__header user">U01N9AYKPNH</div><div class="message__timestamp date"><a class="date" href="#message-1613550824.011300">2021-02-17&nbsp;17:33:44 +0900</a></div></div><div class="message__body description">@U01N9AYKPNH has joined the channel</div></div></div><div class="message event" id="message-1613555559.011500"><div class="content"><div class="summary"><div class="message__header user">U01NCU18B99</div><div class="message__timestamp date"><a class="date" href="#message-1613555559.011500">2021-02-17&nbsp;18:52:39 +0900</a></div></div><div class="message__body description">@U01NCU18B99 has joined the channel</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/94.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>