<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / beginners #12</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / beginners #12</h1>
    <div class="ui pagination menu">
      <a href="../../html/CR2TETE5R/11.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
      <a href="../../html/CR2TETE5R/13.html" class="item">Next</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1605884874.047700">
        <div class="content">
          <div class="summary">
            <div class="user">Manami</div>
            <div class="date"><a class="date" href="#message-1605884874.047700">2020-11-21 00:07:54 +0900</a></div>
          </div>
          <div class="description">@Manami has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1605928592.048000">
        <div class="content">
          <div class="summary">
            <div class="user">Hesca</div>
            <div class="date"><a class="date" href="#message-1605928592.048000">2020-11-21 12:16:32 +0900</a></div>
          </div>
          <div class="description">@Hesca has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1605977651.048800">
        <div class="content">
          <div class="summary">
            <div class="user">usabarashi</div>
            <div class="date"><a class="date" href="#message-1605977651.048800">2020-11-22 01:54:11 +0900</a></div>
          </div>
          <div class="description">@usabarashi has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1605986343.049100">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1605986343.049100">2020-11-22 04:19:03 +0900</a></div>
          </div>
          <div class="description">@sirkerf has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1605989208.050800">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1605989208.050800">2020-11-22 05:06:48 +0900</a></div>
          </div>
          <div class="description">早速質問なんですが<br/>「stack hoogle --setup」<br/>をしようとしても全くうまくいきません<br/>助けてください……</div>
        </div>
      </div>
      <div class="event" id="message-1605992173.052400">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1605992173.052400">2020-11-22 05:56:13 +0900</a></div>
          </div>
          <div class="description">あと<br/>「stack runghc hoge.hs」<br/>が全く成功しません……<br/>どうやらstackを実行するたびに何かしらのエラーが起きているようです</div>
        </div>
      </div>
      <div class="event" id="message-1606009629.052500">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606009629.052500">2020-11-22 10:47:09 +0900</a></div>
          </div>
          <div class="description">実行したときに何が出力されたか、貼り付けていただきたいです。<br/>あまりに長いという場合でもSlackが適当にファイルアップロードに切り替えてくれるはずです。</div>
        </div>
      </div>
      <div class="event" id="message-1606025738.052800">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606025738.052800">2020-11-22 15:15:38 +0900</a></div>
          </div>
          <div class="description">Error: Error encountered while configuring GHC with<br/>         /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/configure --prefix=/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/<br/>         run in /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/<br/>       <br/>       The following directories may now contain files, but won't be used by stack:<br/>         - /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/<br/>         - /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/<br/>       <br/>       For more information consider rerunning with --verbose flag</div>
        </div>
      </div>
      <div class="event" id="message-1606032446.053000">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606032446.053000">2020-11-22 17:07:26 +0900</a></div>
          </div>
          <div class="description"><a href='https://github.com/commercialhaskell/stack/issues/3741'>https://github.com/commercialhaskell/stack/issues/3741</a> と少し似てますね。うまく行くか分かりませんが、とりあえず <code>stack setup --reinstall</code> してみましょうか。</div>
        </div>
      </div>
      <div class="event" id="message-1606033113.053300">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606033113.053300">2020-11-22 17:18:33 +0900</a></div>
          </div>
          <div class="description">これもエラーメッセージは似て非なるようですが、libgmpが入ってないからってのはあり得ますね。<br/>Mac使わないので分かりませんが... <a href='https://matsubara0507.github.io/posts/2018-10-28-ghc-8-6-error-no-gmp.html'>https://matsubara0507.github.io/posts/2018-10-28-ghc-8-6-error-no-gmp.html</a></div>
        </div>
      </div>
      <div class="event" id="message-1606054509.053500">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606054509.053500">2020-11-22 23:15:09 +0900</a></div>
          </div>
          <div class="description">MacBook-Air:~ sirkerf$ stack setup --reinstall<br/>Preparing to install GHC to an isolated location.<br/>This will not interfere with any system-level installation.<br/>Already downloaded.         <br/>xcode-select: error: tool ‘xcodebuild’ requires Xcode, but active developer directory ‘/Library/Developer/CommandLineTools’ is a command line tools instance<br/>configure: error: in `/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2':<br/>configure: error: C compiler cannot create executables<br/>See `config.log’ for more details<br/>Received ExitFailure 77 when running<br/>Raw command: /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/configure --prefix=/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/<br/>Run from: /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/<br/><br/>          <br/>Error: Error encountered while configuring GHC with<br/>     /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/configure --prefix=/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/<br/>     run in */Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/*<br/>    <br/>    The following directories may now contain files, but won’t be used by stack:<br/>     - */Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/*<br/>     - */Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/*<br/>    <br/>    For more information consider rerunning with --verbose flag<br/>    <br/>Configuring GHC ...<br/>MacBook-Air:~ sirkerf$</div>
        </div>
      </div>
      <div class="event" id="message-1606054541.053700">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606054541.053700">2020-11-22 23:15:41 +0900</a></div>
          </div>
          <div class="description">やはり以上のようになって解決しませんでした……。</div>
        </div>
      </div>
      <div class="event" id="message-1606054613.053900">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606054613.053900">2020-11-22 23:16:53 +0900</a></div>
          </div>
          <div class="description"><pre>xcode-select: error: tool 'xcodebuild' requires Xcode, but active developer directory '/Library/Developer/CommandLineTools' is a command line tools instance</pre><br/>これが見える範囲内での根本原因っぽいですねぇ。</div>
        </div>
      </div>
      <div class="event" id="message-1606054768.054100">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606054768.054100">2020-11-22 23:19:28 +0900</a></div>
          </div>
          <div class="description">直し方はこれ <a href='https://qiita.com/eytyet/items/59c5bad1c167d5addc68'>https://qiita.com/eytyet/items/59c5bad1c167d5addc68</a> の「直し方」のセクションかな？</div>
        </div>
      </div>
      <div class="event" id="message-1606054856.054400">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606054856.054400">2020-11-22 23:20:56 +0900</a></div>
          </div>
          <div class="description">問題のメッセージでググったら他にも直し方を解説した記事が出てきたので参考にするといいと思います。</div>
        </div>
      </div>
      <div class="event" id="message-1606055502.054600">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606055502.054600">2020-11-22 23:31:42 +0900</a></div>
          </div>
          <div class="description">MacBook-Air:~ sirkerf$ stack setup --reinstall<br/>Preparing to install GHC to an isolated location.<br/>This will not interfere with any system-level installation.<br/>Already downloaded.         <br/>configure: error: in `/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2':<br/>configure: error: C compiler cannot create executables<br/>See `config.log’ for more details<br/>Received ExitFailure 77 when running<br/>Raw command: /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/configure --prefix=/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/<br/>Run from: /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/<br/><br/>          <br/>Error: Error encountered while configuring GHC with<br/>     /Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/configure --prefix=/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/<br/>     run in */Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/ghc-8.8.2/*<br/>    <br/>    The following directories may now contain files, but won’t be used by stack:<br/>     - */Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2.temp/*<br/>     - */Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/*<br/>    <br/>    For more information consider rerunning with --verbose flag<br/>    <br/>Configuring GHC ...<br/>MacBook-Air:~ sirkerf$</div>
        </div>
      </div>
      <div class="event" id="message-1606055568.054800">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606055568.054800">2020-11-22 23:32:48 +0900</a></div>
          </div>
          <div class="description">全く進展しません……。</div>
        </div>
      </div>
      <div class="event" id="message-1606055732.055000">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606055732.055000">2020-11-22 23:35:32 +0900</a></div>
          </div>
          <div class="description">あれ？<br/>「runghc hoge.hs」は問題なく動きます……が、「ghc hoge.hs」と打つと<br/><br/>MacBook-Air:haskell_sutdy sirkerf$ ghc fizzbuzz.hs<br/>Linking fizzbuzz ...<br/>In file included from /Users/sirkerf/.ghcup/ghc/8.6.5/lib/ghc-8.6.5/include/Stg.h:77,<br/>         from /Users/sirkerf/.ghcup/ghc/8.6.5/lib/ghc-8.6.5/include/Rts.h:29,<br/><br/>         *from /var/folders/dq/jgt54zr53k55xdqgb045n2t40000gn/T/ghc14855_0/ghc_1.c*:one:*0: error:*<br/>*   *<br/><br/>*/usr/local/Cellar/gcc/9.3.0/lib/gcc/9/gcc/x86_64-apple-darwin19/9.3.0/include-fixed/math.h:45:10: error:*<br/>   *fatal error: sys/cdefs.h: No such file or directory*<br/>    *45 | #include &lt;sys/cdefs.h&gt;*<br/>     *|     ^~~~~~~~~~~~~*<br/>  *|*<br/>*45 |* #include *&lt;*sys/cdefs.h&gt;<br/>  *|     ^*<br/>compilation terminated.<br/>`gcc’ failed in phase `C Compiler’. (Exit code: 1)<br/><br/>と出てきます。</div>
        </div>
      </div>
      <div class="event" id="message-1606055808.055200">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606055808.055200">2020-11-22 23:36:48 +0900</a></div>
          </div>
          <div class="description">「GHCなのにC言語のコンパイラが関係する」なんてことあるんでしょうか……。</div>
        </div>
      </div>
      <div class="event" id="message-1606055908.055400">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606055908.055400">2020-11-22 23:38:28 +0900</a></div>
          </div>
          <div class="description">詳しくは割愛しますが（私もよく考えたらそんなに詳しくないし）、めっちゃあります。xcode周りでバグっているのもそういう事情です。</div>
        </div>
      </div>
      <div class="event" id="message-1606055987.055600">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606055987.055600">2020-11-22 23:39:47 +0900</a></div>
          </div>
          <div class="description">となるとこの問題はカテゴリ違い(HaskellじゃなくてC)になるんでしょうか、ありがとうございました。</div>
        </div>
      </div>
      <div class="event" id="message-1606056052.055800">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606056052.055800">2020-11-22 23:40:52 +0900</a></div>
          </div>
          <div class="description">ああー、別にここで聞く分には全く問題ないです。Macだとよくありそうですし</div>
        </div>
      </div>
      <div class="event" id="message-1606056086.056000">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606056086.056000">2020-11-22 23:41:26 +0900</a></div>
          </div>
          <div class="description">失礼しました、では引き続きお世話になります。</div>
        </div>
      </div>
      <div class="event" id="message-1606056189.056200">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606056189.056200">2020-11-22 23:43:09 +0900</a></div>
          </div>
          <div class="description">stackがインストールしているGHCとghcupでインストールされたGHC（今runghcやghcコマンドを打って呼び出されている方）は別のGHCなんで、とりあえずstackの方に集中しましょう（根っこの問題は同じなんじゃないかな）。<br/>もう一度 <code>stack setup --reinstall</code> すると多分今度は最初と違うエラーに変わってるんじゃないかと思いますのでそれを見てみましょう</div>
        </div>
      </div>
      <div class="event" id="message-1606057050.056600">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606057050.056600">2020-11-22 23:57:30 +0900</a></div>
          </div>
          <div class="description">すれ違ってしまって申し訳ないのですが、<br/>「brew install gmp」をした後、<br/>「もうあるよ」と言われたので、<br/>「brew upgrade gmp」をしました。<br/><br/>その通りにした後に<br/>「stack setup --reinstall」をしました。<br/>そうしたら今度はエラーが出ませんでした。<br/>以下個人的に気になったログです。<br/><br/>Installed GHC.   <br/>Trouble loading CompilerPaths cache: Control.Exception.Safe.throwString called with:<br/><br/>Compiler file metadata mismatch, ignoring cache<br/>Called from:<br/> throwString (src/Stack/Storage/User.hs:275:8 in stack-2.5.1-6DM1RsturFMC73zSqWnQ8j:Stack.Storage.User)<br/><br/>stack will use a sandboxed GHC it installed<br/>For more information on paths, see ‘stack path’ and ‘stack exec env’<br/>To use this GHC and packages outside of a project, consider using:<br/>stack ghc, stack ghci, stack runghc, or stack exec</div>
        </div>
      </div>
      <div class="event" id="message-1606057351.056800">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606057351.056800">2020-11-23 00:02:31 +0900</a></div>
          </div>
          <div class="description">「ghc hoge.hs」コマンドがエラーなく動作しました。<br/>「stack runghc hoge.hs」コマンドもエラーなく動作しました。</div>
        </div>
      </div>
      <div class="event" id="message-1606057406.057100">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606057406.057100">2020-11-23 00:03:26 +0900</a></div>
          </div>
          <div class="description">よかった！ghcupでインストールした方の問題はちょっとググっても見つからなかったしわからないので、とりあえずstackでインストールしたものを使ってみてはいかがでしょうか！</div>
        </div>
      </div>
      <div class="event" id="message-1606057582.057300">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606057582.057300">2020-11-23 00:06:22 +0900</a></div>
          </div>
          <div class="description">そのようにしたいと思います。＞stackでインストールしたものを使う。<br/><br/>あしかけ24時間もの間お付き合いいただき本当にありがとうございました。本当に助かりました。もしかしたらまた質問しに伺うかも知れません。その時もどうかよろしくお願いしたします。</div>
        </div>
      </div>
      <div class="event" id="message-1606057868.057600">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606057868.057600">2020-11-23 00:11:08 +0900</a></div>
          </div>
          <div class="description">ちなみにこれは蛇足ですが、当初の目的だった「stack hoogle --setup」も特殊な問題が発生しない限りはうまくいきそうです。<br/>……ものすごく時間がかかっていますけれども……。</div>
        </div>
      </div>
      <div class="event" id="message-1606061969.059700">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606061969.059700">2020-11-23 01:19:29 +0900</a></div>
          </div>
          <div class="description">またまたすみません、直毛です。<br/>別の問題が発生しました。<br/>「stack hoogle --setup」<br/>は時間をかけて完了しましたが<br/>「stack exec — hoogle generate」<br/>がうまくいかないようです。<br/>エラーメッセージは以下になります。<br/><br/>Executable named hoogle not found on path: [“/Users/sirkerf/.stack/global-project/.stack-work/install/x86_64-osx/9818903ee3c668083647fa205fd07e4ca74d4ea5b763e164981b890d5d4430f7/8.8.2/bin”,“/Users/sirkerf/.stack/snapshots/x86_64-osx/9818903ee3c668083647fa205fd07e4ca74d4ea5b763e164981b890d5d4430f7/8.8.2/bin”,“/Users/sirkerf/.stack/compiler-tools/x86_64-osx/ghc-8.8.2/bin”,“/Users/sirkerf/.stack/programs/x86_64-osx/ghc-8.8.2/bin”,“/Users/sirkerf/.cabal/bin”,“/Users/sirkerf/.ghcup/bin”,“/Users/sirkerf/.cabal/bin”,“/Users/sirkerf/.ghcup/bin”,“/Users/sirkerf/.rbenv/shims”,“~/.rbenv/shims”,“/usr/local/bin”,“/usr/local/bin”,“/usr/bin”,“/bin”,“/usr/sbin”,“/sbin”,“/Library/TeX/texbin”]<br/>MacBook-Air:~ sirkerf$</div>
        </div>
      </div>
      <div class="event" id="message-1606062046.059800">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606062046.059800">2020-11-23 01:20:46 +0900</a></div>
          </div>
          <div class="description"><a href='https://github.com/commercialhaskell/stack/issues/5005'>https://github.com/commercialhaskell/stack/issues/5005</a><br/>同じメッセージの表示された方がいらっしゃるようですが、状況は異なるように見受けられます。</div>
        </div>
      </div>
      <div class="event" id="message-1606063077.060100">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606063077.060100">2020-11-23 01:37:57 +0900</a></div>
          </div>
          <div class="description">必要かも知れないので環境の情報も提出しておきます<br/>使用環境<br/>macOS Big Sur<br/>version 11.0.1<br/>MacBook Air (13-inch, Early 2014)<br/>プロセッサ 1.4 GHz デュアルコアIntel Core i5<br/>メモリ 8GB 1600 MHz DDR3<br/>グラフィックス Intel HD Graphics 5000 1536 MB<br/>シリアル番号 伏せます</div>
        </div>
      </div>
      <div class="event" id="message-1606064300.060300">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606064300.060300">2020-11-23 01:58:20 +0900</a></div>
          </div>
          <div class="description">再度「stack hoogle --setup」を試みました<br/>エラーメッセージが異なるようです。<br/><br/>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.<br/>hoogle: The Hoogle file /Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo is corrupt, only 25 bytes.<br/>CallStack (from HasCallStack):<br/> errorIO, called at src/General/Store.hs:173:9 in hoogle-5.0.17.15-167DuRZRx9WKaAmip51pIT:General.Store<br/>CallStack (from HasCallStack):<br/> errorIO, called at src/General/Util.hs:270:66 in hoogle-5.0.17.15-167DuRZRx9WKaAmip51pIT:General.Util<br/>Received ExitFailure 1 when running<br/>Raw command: /Users/sirkerf/.stack/snapshots/x86_64-osx/2266d4dec467e88058dea8d746dcca61bab2a982e1ab1285e2f68fb879d6e56e/8.8.2/bin/hoogle --database=/Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo<br/><br/>MacBook-Air:~ sirkerf$</div>
        </div>
      </div>
      <div class="event" id="message-1606065134.060500">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606065134.060500">2020-11-23 02:12:14 +0900</a></div>
          </div>
          <div class="description">Warning: Installation path <b>/Users/sirkerf/.local/bin</b><br/>     not found on the PATH environment variable<br/>と表示されたので「~」ディレクトリにある「.bash_profile」に以上のパスを通してみました。<br/>結果<br/>「stack exec — hoogle generate」がうまくいきそうです。<br/>ありがとうございました。</div>
        </div>
      </div>
      <div class="event" id="message-1606065289.060700">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606065289.060700">2020-11-23 02:14:49 +0900</a></div>
          </div>
          <div class="description">ありがとうございませんでした(？)<br/>まだ問題があるようです。</div>
        </div>
      </div>
      <div class="event" id="message-1606065486.060900">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606065486.060900">2020-11-23 02:18:06 +0900</a></div>
          </div>
          <div class="description">「stack exec — hoogle generate」<br/>はうまくいったようです。<br/>その後の<br/>「stack hoogle」<br/>がうまくいきません。エラーメッセージを貼ります。</div>
        </div>
      </div>
      <div class="event" id="message-1606065644.061100">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606065644.061100">2020-11-23 02:20:44 +0900</a></div>
          </div>
          <div class="description">MacBook-Air:~ sirkerf$ stack hoogle<br/>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.<br/>hoogle: The Hoogle file /Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo is corrupt, only 25 bytes.<br/>CallStack (from HasCallStack):<br/> errorIO, called at src/General/Store.hs:173:9 in hoogle-5.0.17.15-167DuRZRx9WKaAmip51pIT:General.Store<br/>CallStack (from HasCallStack):<br/> errorIO, called at src/General/Util.hs:270:66 in hoogle-5.0.17.15-167DuRZRx9WKaAmip51pIT:General.Util<br/>Received ExitFailure 1 when running<br/>Raw command: /Users/sirkerf/.local/bin/hoogle --database=/Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo<br/><br/>MacBook-Air:~ sirkerf$</div>
        </div>
      </div>
      <div class="event" id="message-1606065833.061300">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606065833.061300">2020-11-23 02:23:53 +0900</a></div>
          </div>
          <div class="description"><a href='https://github.com/commercialhaskell/stack/issues/4905'>https://github.com/commercialhaskell/stack/issues/4905</a></div>
        </div>
      </div>
      <div class="event" id="message-1606065882.061600">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606065882.061600">2020-11-23 02:24:42 +0900</a></div>
          </div>
          <div class="description">やはり同じ状況の人もいるようですが似たような状況ではなさそうです。</div>
        </div>
      </div>
      <div class="event" id="message-1606065902.061800">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606065902.061800">2020-11-23 02:25:02 +0900</a></div>
          </div>
          <div class="description">手詰まりになりました、もしよければ助けてくださると嬉しいです。</div>
        </div>
      </div>
      <div class="event" id="message-1606085870.062300">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606085870.062300">2020-11-23 07:57:50 +0900</a></div>
          </div>
          <div class="description">根本的な原因は<br/><pre>hoogle: The Hoogle file /Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo is corrupt, only 25 bytes.</pre><br/>のようです。ただ、 <code>database.hoo is corrupt</code> でググっても <a href='https://github.com/ndmitchell/hoogle/issues'>https://github.com/ndmitchell/hoogle/issues</a> を検索しても<br/><a href='https://github.com/commercialhaskell/stack/issues'>https://github.com/commercialhaskell/stack/issues</a> を検索してもかすりもしないので、かなり厄介そうです。<br/><br/>... と思ったところでそもそも stack hoogleってstack exec hoogleとどう違うの？と思いながら手元のプロジェクトで試したところよく似たエラーに出くわしました。<br/><br/><code>database.hoo is corrupt</code> なるメッセージから予想はしてたんですけど、やっぱりその前の <code>stack hoogle</code> からなんかおかしかったみたいですね。<br/>こんなメッセージが出ました:<br/><pre>（前略）
Packages missing documentation:                 array                 base                 （中略）    Win32                 xhtml            rts
No packages were found, aborting (use no arguments to index all of Stackage)
Received ExitFailure 1 when running
Raw command: "C:\\Users\\igrep\\AppData\\Roaming\\local\\bin\\hoogle.exe" generate --local "--database=S:\\prj\\readme-test\\.stack-work\\hoogle\\9b06ae13\\database.hoo"</pre><br/>一度その「corrupt」してるという <code>/Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo</code> を削除してからもう一度 <code>stack hoogle</code> すると、よく似たエラーが出るはずです。<br/><br/>で、さらに検索してみたところ <a href='https://github.com/commercialhaskell/stack/issues/5228'>https://github.com/commercialhaskell/stack/issues/5228</a> と同じ現象ではないかと推測されます。</div>
        </div>
      </div>
      <div class="event" id="message-1606086232.062700">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606086232.062700">2020-11-23 08:03:52 +0900</a></div>
          </div>
          <div class="description">ちなみに、こういうときはMac自体の情報もヒントにならなくはないですが、どちらかというと stack などのバージョンがあった方が助かります。<br/>私の場合、途中で stack upgrade したのでややこしいですが現在stack 2.5.1で、最初に <code>stack hoogle</code> したときは stack 2.3.3でした（はず）:<br/><pre>&gt; stack --version
Version 2.5.1, Git revision d6ab861544918185236cf826cb2028abb266d6d5 x86_64 hpack-0.33.0</pre><br/>OSはWindows 10 Pro 20H2。</div>
        </div>
      </div>
      <div class="event" id="message-1606087330.062900">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606087330.062900">2020-11-23 08:22:10 +0900</a></div>
          </div>
          <div class="description">で、私も試したところうまく行ったので報告。<br/><a href='https://github.com/commercialhaskell/stack/issues/5228#issuecomment-636451325'>https://github.com/commercialhaskell/stack/issues/5228#issuecomment-636451325</a> がワークアラウンドみたいです。<br/>最後の行は <code>stack exec hoogle</code> に変えましたが。</div>
        </div>
      </div>
      <div class="event" id="message-1606124885.063200">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606124885.063200">2020-11-23 18:48:05 +0900</a></div>
          </div>
          <div class="description">まず指定されていた「database.hoo」を削除してから「stack hoogle」を実行してみたところ、以下のようなメッセージに変化したようです。<br/><br/>MacBook-Air:~ sirkerf$ stack hoogle<br/>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.<br/>hoogle: The Hoogle file /Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo is corrupt, only 25 bytes.<br/>CallStack (from HasCallStack):<br/> errorIO, called at src/General/Store.hs:173:9 in hoogle-5.0.17.15-167DuRZRx9WKaAmip51pIT:General.Store<br/>CallStack (from HasCallStack):<br/> errorIO, called at src/General/Util.hs:270:66 in hoogle-5.0.17.15-167DuRZRx9WKaAmip51pIT:General.Util<br/>Received ExitFailure 1 when running<br/>Raw command: /Users/sirkerf/.local/bin/hoogle --database=/Users/sirkerf/.stack/global-project/.stack-work/hoogle/x86_64-osx/a4f4c41115e9878e03bbb7d67e126c6f8eb36e4637d9cc5f7bd65f984990b349/8.8.2/database.hoo<br/><br/>MacBook-Air:~ sirkerf$</div>
        </div>
      </div>
      <div class="event" id="message-1606125008.063400">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606125008.063400">2020-11-23 18:50:08 +0900</a></div>
          </div>
          <div class="description">stack versionは以下の通りです。<br/><br/>MacBook-Air:~ sirkerf$ stack --version<br/>Version 2.5.1, Git revision d6ab861544918185236cf826cb2028abb266d6d5 x86_64 hpack-0.33.0<br/>MacBook-Air:~ sirkerf$</div>
        </div>
      </div>
      <div class="event" id="message-1606125285.063600">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606125285.063600">2020-11-23 18:54:45 +0900</a></div>
          </div>
          <div class="description">そして削除したはずの「database.hoo」ですが復活しましたね。<br/>中身は<br/><br/>HOOGLE-5.0.17<br/><br/>のみでした。</div>
        </div>
      </div>
      <div class="event" id="message-1606125402.063800">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606125402.063800">2020-11-23 18:56:42 +0900</a></div>
          </div>
          <div class="description">最後の答えは、その表示されているスクリプトを書いてどこかに保存するのでしょうけれど、その名前と保存先はどのようにすれば良いでしょうか？</div>
        </div>
      </div>
      <div class="event" id="message-1606126002.064000">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1606126002.064000">2020-11-23 19:06:42 +0900</a></div>
          </div>
          <div class="description">なんでもいいと思いますよ。実行しやすい名前で、実行しやすいところに。当然 <code>PATH</code> に入っている方が常用はしやすいでしょうけど。別に手で打ってシェルの履歴に覚えさせておく程度でもいいでしょうし。</div>
        </div>
      </div>
      <div class="event" id="message-1606126536.064200">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606126536.064200">2020-11-23 19:15:36 +0900</a></div>
          </div>
          <div class="description">参考にさせていただきたいのですが、igrepさんはどんな名前で保存してどこの場所に保存しましたか？</div>
        </div>
      </div>
      <div class="event" id="message-1606127657.064400">
        <div class="content">
          <div class="summary">
            <div class="user">sirkerf</div>
            <div class="date"><a class="date" href="#message-1606127657.064400">2020-11-23 19:34:17 +0900</a></div>
          </div>
          <div class="description">「実行しやすい名前」「実行しやすいところ」がピンと来なかったもので……。</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/CR2TETE5R/11.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
      <a href="../../html/CR2TETE5R/13.html" class="item">Next</a>
    </div>
  </div>
</body>
</html>
