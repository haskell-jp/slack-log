<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / beginners #16</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / beginners #16</h1><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/15.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1621669520.010500"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621669520.010500">2021-05-22&nbsp;16:45:20 +0900</a></div></div><div class="message__body description">質問連投失礼します．上のような関数を定義したのですが，このままでは無限リストになってしまいます．すでに登場したインデックスの呼び出しが再び出てきたら再帰を停止するという条件で，基底状態を定義することはできるのでしょうか?</div></div></div><div class="message event" id="message-1621669559.011100"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621669559.011100">2021-05-22&nbsp;16:45:59 +0900</a></div></div><div class="message__body description">要は以下のような値を返してほしいのです．</div></div></div><div class="message event" id="message-1621669583.011200"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621669583.011200">2021-05-22&nbsp;16:46:23 +0900</a></div></div><div class="message__body description"></div></div></div><div class="message event" id="message-1621669623.011700"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621669623.011700">2021-05-22&nbsp;16:47:03 +0900</a></div></div><div class="message__body description">よろしくおねがいします．</div></div></div><div class="message event" id="message-1621672953.016900"><div class="content"><div class="summary"><div class="message__header user">crtmike</div><div class="message__timestamp date"><a class="date" href="#message-1621672953.016900">2021-05-22&nbsp;17:42:33 +0900</a></div></div><div class="message__body description">@muratomo.0205 このままではちょっと難しいかも。登場したインデックスを持てばいいと思います。<br/><pre>route :: [Int] -&gt; Int -&gt; [Int]
route xs = go []
  where go res i | i `elem` res = reverse res
                 | otherwise    = go (i:res) (xs!!i)</pre></div></div></div><div class="message event" id="message-1621673011.017400"><div class="content"><div class="summary"><div class="message__header user">seasellsheshell_com.s</div><div class="message__timestamp date"><a class="date" href="#message-1621673011.017400">2021-05-22&nbsp;17:43:31 +0900</a></div></div><div class="message__body description">（なお、これだと O(n^2) かかりそうなので、高速化する場合は Array / Vector を使ってあげたほうがいいですね）</div></div></div><div class="message event" id="message-1621679556.020100"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621679556.020100">2021-05-22&nbsp;19:32:36 +0900</a></div></div><div class="message__body description">@crtmike<br/>なるほど。<br/>再帰の結果を引数として持つ。ただ、その引数を隠すために再帰させる関数をラップする。<br/>という理解でいいでしょうか？</div></div></div><div class="message event" id="message-1621679737.021900"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621679737.021900">2021-05-22&nbsp;19:35:37 +0900</a></div></div><div class="message__body description">@seasellsheshell_com.s 計算量を考慮すると、一旦無限リストにしておいて、他の関数でtakeのように一部切り取るという使い方が推奨されるのでしょうか？</div></div></div><div class="message event" id="message-1621679793.022800"><div class="content"><div class="summary"><div class="message__header user">seasellsheshell_com.s</div><div class="message__timestamp date"><a class="date" href="#message-1621679793.022800">2021-05-22&nbsp;19:36:33 +0900</a></div></div><div class="message__body description">計算量を考慮する場合、第一引数（それぞれの頂点からの行き先）の配列をランダムアクセスできるように Array にしたほうがいいのと、すでに到達した場所を保存するための Array を保持したほうがいいということです。</div></div></div><div class="message event" id="message-1621679812.023300"><div class="content"><div class="summary"><div class="message__header user">seasellsheshell_com.s</div><div class="message__timestamp date"><a class="date" href="#message-1621679812.023300">2021-05-22&nbsp;19:36:52 +0900</a></div></div><div class="message__body description">現在の仕組みだと、それぞれの頂点に到達するたびに、（最悪で）列全体をなめる必要があるのです。</div></div></div><div class="message event" id="message-1621679825.023700"><div class="content"><div class="summary"><div class="message__header user">seasellsheshell_com.s</div><div class="message__timestamp date"><a class="date" href="#message-1621679825.023700">2021-05-22&nbsp;19:37:05 +0900</a></div></div><div class="message__body description">ただし、 n = 10^3 程度なら現実的な時間で終わると言えると思います。</div></div></div><div class="message event" id="message-1621680080.024700"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621680080.024700">2021-05-22&nbsp;19:41:20 +0900</a></div></div><div class="message__body description">なるほど<br/>ただ、まだ勉強がArrayまでたどり着いていなくて</div></div></div><div class="message event" id="message-1621680300.028900"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621680300.028900">2021-05-22&nbsp;19:45:00 +0900</a></div></div><div class="message__body description">計算量を減らすにはArrayが推奨されるのは納得しました。一方でリストを使ってなんとか計算量を抑えたい時、一旦無限リストにして他の関数で切り取るという流れにすることでjuxtaposeさんの提示してくださったコードよりも計算量を減らすことは可能ですか？</div></div></div><div class="message event" id="message-1621683337.041100"><div class="content"><div class="summary"><div class="message__header user">seasellsheshell_com.s</div><div class="message__timestamp date"><a class="date" href="#message-1621683337.041100">2021-05-22&nbsp;20:35:37 +0900</a></div></div><div class="message__body description">いえ、一旦無限リストを作ってから切り取ることと、途中で再帰しなくなる条件を関数自身に書くことは、遅延評価の Haskell においては基本的に同等だと思います。</div></div></div><div class="message event" id="message-1621723678.041300"><div class="content"><div class="summary"><div class="message__header user">sak13134</div><div class="message__timestamp date"><a class="date" href="#message-1621723678.041300">2021-05-23&nbsp;07:47:58 +0900</a></div></div><div class="message__body description">@sak13134 has joined the channel</div></div></div><div class="message event" id="message-1621822287.046300"><div class="content"><div class="summary"><div class="message__header user">ringo1625</div><div class="message__timestamp date"><a class="date" href="#message-1621822287.046300">2021-05-24&nbsp;11:11:27 +0900</a></div></div><div class="message__body description">GUIをやろうと思いhaskell-giを試していますが、HelloWorld以上のことができません。具体的にはテキストボックスが使えていません。Gtk.EntryやGtk.TextViewでテキストボックスを設置することはできましたが、実際に入力された値を取り出すことができません。何か参考になるようなサイトをご存知でしたらご教示頂きたく。公式サイトを見ましたが構文だけで実際にどうコーディングすればいいのかわかりませんでした。公式サイトのexamplesも見てみましたが、参考になりそうなコードはありませんでした（見つけられませんでした）。teratailで質問しましたが、まだ出来るようになっていません。<https://teratail.com/questions/303653></div></div></div><div class="message event" id="message-1621926224.048300"><div class="content"><div class="summary"><div class="message__header user">muratomo.0205</div><div class="message__timestamp date"><a class="date" href="#message-1621926224.048300">2021-05-25&nbsp;16:03:44 +0900</a></div></div><div class="message__body description">@seasellsheshell_com.s さん<br/>返信遅れました。遅延評価ですか、なるほど<br/>勉強になりました。ありがとうございます</div></div></div><div class="message event" id="message-1621946967.048600"><div class="content"><div class="summary"><div class="message__header user">monoma632</div><div class="message__timestamp date"><a class="date" href="#message-1621946967.048600">2021-05-25&nbsp;21:49:27 +0900</a></div></div><div class="message__body description">@monoma632 has joined the channel</div></div></div><div class="message event" id="message-1622027544.048800"><div class="content"><div class="summary"><div class="message__header user">U023980QWR2</div><div class="message__timestamp date"><a class="date" href="#message-1622027544.048800">2021-05-26&nbsp;20:12:24 +0900</a></div></div><div class="message__body description">@U023980QWR2 has joined the channel</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/15.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>