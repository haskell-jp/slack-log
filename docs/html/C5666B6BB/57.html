<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / questions #57</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / questions #57</h1><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/56.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a><a href="../../html/C5666B6BB/58.html" class="pager__next item">Next</a></div><div class="message_list ui feed"><div class="message event" id="message-1555462987.013000"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date">2019-04-17&nbsp;10:03:07 +0900</div></div><div class="message__body description"><code>TermSucc TermZero</code> などが書ける</div></div></div><div class="message event" id="message-1555487544.013900"><div class="content"><div class="summary"><div class="message__header user">ekmett</div><div class="message__timestamp date">2019-04-17&nbsp;16:52:24 +0900</div></div><div class="message__body description">@ekmett has joined the channel</div></div></div><div class="message event" id="message-1555529104.014600"><div class="content"><div class="summary"><div class="message__header user">y_taka_23</div><div class="message__timestamp date">2019-04-18&nbsp;04:25:04 +0900</div></div><div class="message__body description">aws-lambda-haskell-runtime で同様の現象を経験しました。メモリの割り当てを増やしながらベンチをとったところ 1sec 程度までは改善しましたが、それ以上縮まらず実用は諦めました。</div></div></div><div class="message event" id="message-1555568013.016600"><div class="content"><div class="summary"><div class="message__header user">kazu</div><div class="message__timestamp date">2019-04-18&nbsp;15:13:33 +0900</div></div><div class="message__body description">たとえば、「a -&gt; a を満たす実装は一つ(id)しかない」は、何の定理から言えることですか？ theorem for free だと思って読んだんですが、それらしいことが書かれているとは思えませんでした。</div></div></div><div class="message event" id="message-1555568233.016800"><div class="content"><div class="summary"><div class="message__header user">tkskzyk0925</div><div class="message__timestamp date">2019-04-18&nbsp;15:17:13 +0900</div></div><div class="message__body description">∀a. a -&gt; a という論理式で考えれば、「Int -&gt; Int ∧ Char -&gt; Char ∧ ... ∧ SomeType -&gt; SomeType」と無限論理積に展開できるので、自明に id しか存在しないと考えていますが、どうなんでしょう？</div></div></div><div class="message event" id="message-1555568319.017100"><div class="content"><div class="summary"><div class="message__header user">kazu</div><div class="message__timestamp date">2019-04-18&nbsp;15:18:39 +0900</div></div><div class="message__body description">直感的にはそうなんですが。。。</div></div></div><div class="message event" id="message-1555568383.017400"><div class="content"><div class="summary"><div class="message__header user">kazu</div><div class="message__timestamp date">2019-04-18&nbsp;15:19:43 +0900</div></div><div class="message__body description">fmap の実装は一つしかないは、どこから来るのかが元々の疑問で、まず簡単な a -&gt; a から質問しました。</div></div></div><div class="message event" id="message-1555570579.018300"><div class="content"><div class="summary"><div class="message__header user">cutsea110</div><div class="message__timestamp date">2019-04-18&nbsp;15:56:19 +0900</div></div><div class="message__body description">多相関数を数える(<https://qiita.com/nobsun/items/5662968f1c381695e7ff>)かな</div></div></div><div class="message event" id="message-1555570623.019800"><div class="content"><div class="summary"><div class="message__header user">cutsea110</div><div class="message__timestamp date">2019-04-18&nbsp;15:57:03 +0900</div></div><div class="message__body description">aの構成方法が未知なので引数としてもらったものをそのまま返す関数しか構成できないからですね</div></div></div><div class="message event" id="message-1555570690.021600"><div class="content"><div class="summary"><div class="message__header user">cutsea110</div><div class="message__timestamp date">2019-04-18&nbsp;15:58:10 +0900</div></div><div class="message__body description">もちろんHaskellではundefinedがあるのでidの他にもう一つconst undefinedがあります。</div></div></div><div class="message event" id="message-1555570761.023700"><div class="content"><div class="summary"><div class="message__header user">cutsea110</div><div class="message__timestamp date">2019-04-18&nbsp;15:59:21 +0900</div></div><div class="message__body description">なので関数(全域関数)なら一本しかなくHaskellのように部分関数まで考慮するなら二本になる</div></div></div><div class="message event" id="message-1555570843.025100"><div class="content"><div class="summary"><div class="message__header user">cutsea110</div><div class="message__timestamp date">2019-04-18&nbsp;16:00:43 +0900</div></div><div class="message__body description">というような話を上の @nobsun の記事に対して書いたのが <a href='https://qiita.com/cutsea110/items/3496394968cb7ac73047'>https://qiita.com/cutsea110/items/3496394968cb7ac73047</a></div></div></div><div class="message event" id="message-1555570891.025800"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date">2019-04-18&nbsp;16:01:31 +0900</div></div><div class="message__body description">このまえMizunashi_Manaさんから教えてもらったんですが、Parametricityという性質らしいです。 <a href='https://www.well-typed.com/blog/2015/05/parametricity/'>https://www.well-typed.com/blog/2015/05/parametricity/</a></div></div></div><div class="message event" id="message-1555570968.026100"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date">2019-04-18&nbsp;16:02:48 +0900</div></div><div class="message__body description">Theorems for freeについては読んだ事がないのですが、上の記事中にはFree theoremの事が出てきている模様</div></div></div><div class="message event" id="message-1555574234.026400"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date">2019-04-18&nbsp;16:57:14 +0900</div></div><div class="message__body description">free theorems については，<br/>• <a href='https://reasonablypolymorphic.com/blog/theorems-for-free/'>https://reasonablypolymorphic.com/blog/theorems-for-free/</a><br/>• <a href='http://www21.in.tum.de/~boehmes/diplomathesis.pdf'>http://www21.in.tum.de/~boehmes/diplomathesis.pdf</a><br/>とかが分かりやすいかもです．で， id については次の theorem が得られます<br/><br/><pre>
forall f =&gt; id' . f = f . id'
</pre><br/><br/>これは， <a href='https://alexknvl.com/cgi-bin/free-theorems-webui.cgi'>https://alexknvl.com/cgi-bin/free-theorems-webui.cgi</a> で <code>a -&gt; a</code> で theorem を取得するといいと思います．<br/><br/>ここで，例えば任意の x について f = const x を考えてみると，<br/><pre>
id' (const x y) = const x (id' y)
&lt;=&gt; id' x = x
</pre><br/>となるため， id の free theorem から <code>f :: a -&gt; a; \x -&gt; x</code> が一意に決まります</div></div></div><div class="message event" id="message-1555574288.026600"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date">2019-04-18&nbsp;16:58:08 +0900</div></div><div class="message__body description">( lambdabot が Slack で導入できるらしいので， lambdabot で free theorem が取得できるとこういう時便利だなと思いました) (使う機会あるのかな？)</div></div></div><div class="message event" id="message-1555574894.026800"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date">2019-04-18&nbsp;17:08:14 +0900</div></div><div class="message__body description">ついでに， fmap の一意性については，簡単な証明を先日降臨された ekmett 先生が書いてます: <a href='https://www.schoolofhaskell.com/user/edwardk/snippets/fmap'>https://www.schoolofhaskell.com/user/edwardk/snippets/fmap</a><br/>こちらは， <code>fmap' id = id</code> を仮定した時に <code>fmap' :: (a -&gt; b) -&gt; (f a -&gt; f b)</code> の free theorem から <code>fmap' f = fmap f</code> が示せるため一意であるという感じですね</div></div></div><div class="message event" id="message-1555588232.027500"><div class="content"><div class="summary"><div class="message__header user">ogtkzk712</div><div class="message__timestamp date">2019-04-18&nbsp;20:50:32 +0900</div></div><div class="message__body description">@ogtkzk712 has joined the channel</div></div></div><div class="message event" id="message-1555637621.027700"><div class="content"><div class="summary"><div class="message__header user">kazu</div><div class="message__timestamp date">2019-04-19&nbsp;10:33:41 +0900</div></div><div class="message__body description">みなさん、ありがとうございます。大変勉強になりました。</div></div></div><div class="message event" id="message-1555646705.028000"><div class="content"><div class="summary"><div class="message__header user">furugomu</div><div class="message__timestamp date">2019-04-19&nbsp;13:05:05 +0900</div></div><div class="message__body description">@furugomu has joined the channel</div></div></div><div class="message event" id="message-1555679273.028900"><div class="content"><div class="summary"><div class="message__header user">info731</div><div class="message__timestamp date">2019-04-19&nbsp;22:07:53 +0900</div></div><div class="message__body description">@info731 has joined the channel</div></div></div><div class="message event" id="message-1555739302.029200"><div class="content"><div class="summary"><div class="message__header user">superfluidbcsbec</div><div class="message__timestamp date">2019-04-20&nbsp;14:48:22 +0900</div></div><div class="message__body description">@superfluidbcsbec has joined the channel</div></div></div><div class="message event" id="message-1555759868.029500"><div class="content"><div class="summary"><div class="message__header user">takebe</div><div class="message__timestamp date">2019-04-20&nbsp;20:31:08 +0900</div></div><div class="message__body description">@takebe has joined the channel</div></div></div><div class="message event" id="message-1555764574.029800"><div class="content"><div class="summary"><div class="message__header user">stephan.donin</div><div class="message__timestamp date">2019-04-20&nbsp;21:49:34 +0900</div></div><div class="message__body description">@stephan.donin has joined the channel</div></div></div><div class="message event" id="message-1555768584.030100"><div class="content"><div class="summary"><div class="message__header user">kensukehot</div><div class="message__timestamp date">2019-04-20&nbsp;22:56:24 +0900</div></div><div class="message__body description">@kensukehot has joined the channel</div></div></div><div class="message event" id="message-1555775195.030400"><div class="content"><div class="summary"><div class="message__header user">karthik.ravikanti</div><div class="message__timestamp date">2019-04-21&nbsp;00:46:35 +0900</div></div><div class="message__body description">@karthik.ravikanti has joined the channel</div></div></div><div class="message event" id="message-1555777497.030700"><div class="content"><div class="summary"><div class="message__header user">snamiki1212</div><div class="message__timestamp date">2019-04-21&nbsp;01:24:57 +0900</div></div><div class="message__body description">@snamiki1212 has joined the channel</div></div></div><div class="message event" id="message-1555826510.031000"><div class="content"><div class="summary"><div class="message__header user">r6eve179f</div><div class="message__timestamp date">2019-04-21&nbsp;15:01:50 +0900</div></div><div class="message__body description">@r6eve179f has joined the channel</div></div></div><div class="message event" id="message-1555927519.031300"><div class="content"><div class="summary"><div class="message__header user">mmsato11</div><div class="message__timestamp date">2019-04-22&nbsp;19:05:19 +0900</div></div><div class="message__body description">@mmsato11 has joined the channel</div></div></div><div class="message event" id="message-1555991347.031600"><div class="content"><div class="summary"><div class="message__header user">mamayukawaii</div><div class="message__timestamp date">2019-04-23&nbsp;12:49:07 +0900</div></div><div class="message__body description">@mamayukawaii has joined the channel</div></div></div><div class="message event" id="message-1556008850.031900"><div class="content"><div class="summary"><div class="message__header user">speedcell4</div><div class="message__timestamp date">2019-04-23&nbsp;17:40:50 +0900</div></div><div class="message__body description">@speedcell4 has joined the channel</div></div></div><div class="message event" id="message-1556012709.032200"><div class="content"><div class="summary"><div class="message__header user">mpenz.m</div><div class="message__timestamp date">2019-04-23&nbsp;18:45:09 +0900</div></div><div class="message__body description">@mpenz.m has joined the channel</div></div></div><div class="message event" id="message-1556012969.034800"><div class="content"><div class="summary"><div class="message__header user">mpenz.m</div><div class="message__timestamp date">2019-04-23&nbsp;18:49:29 +0900</div></div><div class="message__body description">はじめまして！　関数型プログラミングに興味があってHaskellを学んでみたいと思ってます。<br/>早速質問なんですが、日本語でHaskellを勉強するには何がいいと思いますか？<br/>あの絵本みたいなチュートリアルの日本語版の書籍を買うのがいいんでしょうか？<br/>教えていただけると幸いです！</div></div></div><div class="message event" id="message-1556013374.034900"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2019-04-23&nbsp;18:56:14 +0900</div></div><div class="message__body description">そうですね。いろいろ古い部分はありますが、今でもすごいH本が個人的におすすめです。<br/><a href='https://www.amazon.co.jp/dp/B009RO80XY/'>https://www.amazon.co.jp/dp/B009RO80XY/</a><br/>古くなっている部分については <a href='https://qiita.com/Aruneko/items/e72f7c6ee49159751cba'>https://qiita.com/Aruneko/items/e72f7c6ee49159751cba</a> をご覧ください。<br/><br/>また、入門記事が <a href='https://wiki.haskell.jp/Links#%E5%85%A5%E9%96%80%E7%B3%BB'>https://wiki.haskell.jp/Links#%E5%85%A5%E9%96%80%E7%B3%BB</a> にまとまっています。<br/>こちらはいずれもお金がかからないので、一度目を通してみるといいかと思います。</div></div></div><div class="message event" id="message-1556013435.035200"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2019-04-23&nbsp;18:57:15 +0900</div></div><div class="message__body description">.oO（「いやこれを読め」という方は引き続きコメントを！特に入門書を書いた人とか！）</div></div></div><div class="message event" id="message-1556013983.035500"><div class="content"><div class="summary"><div class="message__header user">mpenz.m</div><div class="message__timestamp date">2019-04-23&nbsp;19:06:23 +0900</div></div><div class="message__body description">教えていただきありがとうございます！なるほど、やっぱりあの書籍は買ったほうが良さそうですね。無料で見れるものまで紹介していただき、本当にありがとうございます！</div></div></div><div class="message event" id="message-1556016387.036100"><div class="content"><div class="summary"><div class="message__header user">aruneko</div><div class="message__timestamp date">2019-04-23&nbsp;19:46:27 +0900</div></div><div class="message__body description">ご紹介いただきありがとうございます！<br/>記事について質問があればお気軽にどうぞ！</div></div></div><div class="message event" id="message-1556018858.036600"><div class="content"><div class="summary"><div class="message__header user">seraseira08</div><div class="message__timestamp date">2019-04-23&nbsp;20:27:38 +0900</div></div><div class="message__body description">@seraseira08 has joined the channel</div></div></div><div class="message event" id="message-1556020577.036800"><div class="content"><div class="summary"><div class="message__header user">mpenz.m</div><div class="message__timestamp date">2019-04-23&nbsp;20:56:17 +0900</div></div><div class="message__body description">ご本人から！わざわざありがとうございます！</div></div></div><div class="message event" id="message-1556020686.037000"><div class="content"><div class="summary"><div class="message__header user">mpenz.m</div><div class="message__timestamp date">2019-04-23&nbsp;20:58:06 +0900</div></div><div class="message__body description">ぜひとも、「すごいHaskell」を読む際は参考にさせていただきたいと思います！</div></div></div><div class="message event" id="message-1556023068.037400"><div class="content"><div class="summary"><div class="message__header user">ryosuke.takashima</div><div class="message__timestamp date">2019-04-23&nbsp;21:37:48 +0900</div></div><div class="message__body description">@ryosuke.takashima has joined the channel</div></div></div><div class="message event" id="message-1556099472.037900"><div class="content"><div class="summary"><div class="message__header user">k-endo</div><div class="message__timestamp date">2019-04-24&nbsp;18:51:12 +0900</div></div><div class="message__body description">@k-endo has joined the channel</div></div></div><div class="message event" id="message-1556121435.038200"><div class="content"><div class="summary"><div class="message__header user">pyry.kontio</div><div class="message__timestamp date">2019-04-25&nbsp;00:57:15 +0900</div></div><div class="message__body description">@pyry.kontio has joined the channel</div></div></div><div class="message event" id="message-1556121926.040700"><div class="content"><div class="summary"><div class="message__header user">pyry.kontio</div><div class="message__timestamp date">2019-04-25&nbsp;01:05:26 +0900</div></div><div class="message__body description">すみません、Haskellの書籍のおすすめを聞きたいんです。Haskellについては全くの初心者です。（背景はRustやPythonです）会社の本棚に本を買おうと思いますので汎用的な書籍だと助かります。読みそうな人はPythonやRやってる人だと考えておすすめしてください！</div></div></div><div class="message event" id="message-1556148063.041000"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2019-04-25&nbsp;08:21:03 +0900</div></div><div class="message__body description"><a href='https://haskell-jp.slack.com/archives/C5666B6BB/p1556012969034800'>https://haskell-jp.slack.com/archives/C5666B6BB/p1556012969034800</a> ちょうど前の質問をご覧ください。</div></div></div><div class="message event" id="message-1556244940.000200"><div class="content"><div class="summary"><div class="message__header user">kyotsuya</div><div class="message__timestamp date">2019-04-26&nbsp;11:15:40 +0900</div></div><div class="message__body description">@kyotsuya has joined the channel</div></div></div><div class="message event" id="message-1556347516.002600"><div class="content"><div class="summary"><div class="message__header user">kayhide</div><div class="message__timestamp date">2019-04-27&nbsp;15:45:16 +0900</div></div><div class="message__body description"><code>extensible</code> についてです。<br/>このようなタイプ↓があります。<br/><pre>
newtype Required a = Required a
newtype Optional a = Optional (Maybe a)

type PersonParams =
  Record
  '[ "name" &gt;: Required Text
   , "age" &gt;: Optional Int
   ]
</pre><br/><br/>これをこのように↓バラすことってできますでしょうか？<br/><pre>
type PersonRequiredParams =
  RecordOf Required
  '[ "name" &gt;: Text
   ]

type PersonOptionalParams =
  RecordOf Optional
  '[ "age" &gt;: Int
   ]
</pre></div></div></div><div class="message event" id="message-1556347777.002700"><div class="content"><div class="summary"><div class="message__header user">kayhide</div><div class="message__timestamp date">2019-04-27&nbsp;15:49:37 +0900</div></div><div class="message__body description">key や value はポリモーフィックに扱いたいです。</div></div></div><div class="message event" id="message-1556348730.002900"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date">2019-04-27&nbsp;16:05:30 +0900</div></div><div class="message__body description">こういう関数ならかけますけど <code>Required a</code> や <code>Optional b</code> は知らないです。<br/><pre>
hello :: Associate "name" Text xs =&gt; Record xs -&gt; Text
hello r = mconcat [ "Hello ", r ^. #name, "!"]
</pre></div></div></div><div class="message event" id="message-1556349497.003100"><div class="content"><div class="summary"><div class="message__header user">kayhide</div><div class="message__timestamp date">2019-04-27&nbsp;16:18:17 +0900</div></div><div class="message__body description">ちょっと質問点がわかりにくかったかもしれないですね。<br/>やりたいのはこういうことです。</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/56.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a><a href="../../html/C5666B6BB/58.html" class="pager__next item">Next</a></div></div></body></html>