<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / beginners #21 at 2022-07-17 21:55:08 +0900</title>
<link rel="stylesheet" href="../../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / beginners #21 at 2022-07-17 21:55:08 +0900</h1>
    <div class="ui pagination menu">
      <a href="../21.html" class="item">Back to beginners #21</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1658062508.826259">
        <div class="content">
          <div class="summary">
            <div class="user">tuft</div>
            <div class="date"><a class="date" href="#message-1658062508.826259">2022-07-17 21:55:08 +0900</a></div>
          </div>
          <div class="description">多段に構える、LamdaCase、maybe関数を使う、3つのパターンと回答ありがとうございます。<br/><br/>LamdaCaseだと警告が出てくれるんですね。<br/>maybeは慣れるまでなかなかぱっと出てこなさそうです。<br/><br/>pt1のように書いてしまった場合、GHCオプションで警告やエラーにするオプションはありますでしょうか?</div>
        </div>
      </div>
      <div class="event" id="message-1658064128.590249">
        <div class="content">
          <div class="summary">
            <div class="user">mod_poppo</div>
            <div class="date"><a class="date" href="#message-1658064128.590249">2022-07-17 22:22:08 +0900</a></div>
          </div>
          <div class="description">pt1のようにdo記法の <code>&lt;-</code> でパターンマッチが失敗しうる場合に警告を出すオプションは今のGHCにはなさそうです。`&lt;-` のパターンマッチ失敗はcatchを使わなくても処理できることが多いこと、 <code>Maybe</code> やリストなどのモナドでは <code>&lt;-</code> で意図的に失敗しうるパターンマッチを使うことがあり、警告の優先度が低いと思われたのかもしれません。一応issueは立ってます：<https://gitlab.haskell.org/ghc/ghc/-/issues/19327> どうしてもどうにかしたければ、IOモナド（等）のMonadFailを実装しないラッパーを用意するといういう手があります。<br/><br/>警告をエラーにするには <code>-Werror</code> オプションが利用できます。`-Werror=incomplete-patterns -Werror=incomplete-uni-patterns` という風に利用できます。<br/><br/>「main関数をcatchで包んで全てのエラーを捕捉する」のは状況にもよりますが、あまりお勧めしません。下手なエラーの握りつぶし方をすると発生箇所等の情報が得られなくなってデバッグが困難になる恐れがあります。</div>
        </div>
      </div>
      <div class="event" id="message-1658118029.208219">
        <div class="content">
          <div class="summary">
            <div class="user">tuft</div>
            <div class="date"><a class="date" href="#message-1658118029.208219">2022-07-18 13:20:29 +0900</a></div>
          </div>
          <div class="description">オプションはないものなんですね。<br/>例外が起きる箇所を意識できていないので全部エラーか警告にと思ったのですが。<br/><br/>回答ありがとうございます。</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../21.html" class="item">Back to beginners #21</a>
    </div>
  </div>
</body>
</html>
