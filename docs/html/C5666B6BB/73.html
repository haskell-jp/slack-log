<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / questions #73</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / questions #73</h1>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/72.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
      <a href="../../html/C5666B6BB/74.html" class="item">Next</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1571060497.020900">
        <div class="content">
          <div class="summary">
            <div class="user">yatiwataru</div>
            <div class="date"><a class="date" href="#message-1571060497.020900">2019-10-14 22:41:37 +0900</a></div>
          </div>
          <div class="description">@yatiwataru has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571073112.021200">
        <div class="content">
          <div class="summary">
            <div class="user">watosar2113</div>
            <div class="date"><a class="date" href="#message-1571073112.021200">2019-10-15 02:11:52 +0900</a></div>
          </div>
          <div class="description">@watosar2113 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571110568.021400">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571110568.021400">2019-10-15 12:36:08 +0900</a></div>
          </div>
          <div class="description">ぼくもまったく同じことをしているので気持ちが分かる気がします。実際のソースを追うと勉強しなきゃいけないことが増える、の繰り返しがあって、もともと知りたかったことに素直にたどり着けない。</div>
        </div>
      </div>
      <div class="event" id="message-1571194221.023700">
        <div class="content">
          <div class="summary">
            <div class="user">developer</div>
            <div class="date"><a class="date" href="#message-1571194221.023700">2019-10-16 11:50:21 +0900</a></div>
          </div>
          <div class="description">@developer has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571201772.023900">
        <div class="content">
          <div class="summary">
            <div class="user">hiroto.shioi</div>
            <div class="date"><a class="date" href="#message-1571201772.023900">2019-10-16 13:56:12 +0900</a></div>
          </div>
          <div class="description">友達はこの記事を読んでStateモナドが理解できたって言ってました。参考程度にはなるかも？<br/><a href='http://brandon.si/code/the-state-monad-a-tutorial-for-the-confused/'>http://brandon.si/code/the-state-monad-a-tutorial-for-the-confused/</a></div>
        </div>
      </div>
      <div class="event" id="message-1571208445.024500">
        <div class="content">
          <div class="summary">
            <div class="user">9647142</div>
            <div class="date"><a class="date" href="#message-1571208445.024500">2019-10-16 15:47:25 +0900</a></div>
          </div>
          <div class="description">一回Stateモナド無しで状態を扱ってみて、Stateが何をやってくれてるかを感じるのも良いかも</div>
        </div>
      </div>
      <div class="event" id="message-1571229221.025400">
        <div class="content">
          <div class="summary">
            <div class="user">as_capabl</div>
            <div class="date"><a class="date" href="#message-1571229221.025400">2019-10-16 21:33:41 +0900</a></div>
          </div>
          <div class="description">昔は <code>cabal-rangefinder</code> というツールで出来たんですが、メンテ止まってて新しいcabalだと動かなそうです</div>
        </div>
      </div>
      <div class="event" id="message-1571259372.025800">
        <div class="content">
          <div class="summary">
            <div class="user">inzembla</div>
            <div class="date"><a class="date" href="#message-1571259372.025800">2019-10-17 05:56:12 +0900</a></div>
          </div>
          <div class="description">@inzembla has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571294939.028900">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571294939.028900">2019-10-17 15:48:59 +0900</a></div>
          </div>
          <div class="description">勉強のためにいくつかの基本的な部品を自分でも書いてみているところです。ExceptT の &lt;*&gt; の定義なんですが、Control.Monad.Trans.Except のソース（<http://hackage.haskell.org/package/transformers-0.5.6.2/docs/src/Control.Monad.Trans.Except.html#line-185> ）だと</div>
        </div>
      </div>
      <div class="event" id="message-1571295026.029000">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571295026.029000">2019-10-17 15:50:26 +0900</a></div>
          </div>
          <div class="description"></div>
        </div>
      </div>
      <div class="event" id="message-1571295123.030100">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571295123.030100">2019-10-17 15:52:03 +0900</a></div>
          </div>
          <div class="description">こうなんですが、単に以下でもよさそうに思うんですがどうでしょう。</div>
        </div>
      </div>
      <div class="event" id="message-1571295200.030200">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571295200.030200">2019-10-17 15:53:20 +0900</a></div>
          </div>
          <div class="description"></div>
        </div>
      </div>
      <div class="event" id="message-1571301558.030900">
        <div class="content">
          <div class="summary">
            <div class="user">minorinoki_haskjp</div>
            <div class="date"><a class="date" href="#message-1571301558.030900">2019-10-17 17:39:18 +0900</a></div>
          </div>
          <div class="description">それだと「fがLeftを返した場合にvが実行されない」という挙動を実現できないのではないでしょうか</div>
        </div>
      </div>
      <div class="event" id="message-1571301886.031100">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571301886.031100">2019-10-17 17:44:46 +0900</a></div>
          </div>
          <div class="description">Data.Either （<http://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.Either.html#line-149> ）のソースによると</div>
        </div>
      </div>
      <div class="event" id="message-1571301928.031300">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571301928.031300">2019-10-17 17:45:28 +0900</a></div>
          </div>
          <div class="description">Either の &lt;*&gt; はこうなってるようなので、mf が Left e ならそのまま Left e が返るように見えます。</div>
        </div>
      </div>
      <div class="event" id="message-1571302105.031800">
        <div class="content">
          <div class="summary">
            <div class="user">minorinoki_haskjp</div>
            <div class="date"><a class="date" href="#message-1571302105.031800">2019-10-17 17:48:25 +0900</a></div>
          </div>
          <div class="description">vに副作用がなければそれでいいんですが、現実にはvが副作用を持っているかもしれないので、 <code>mv &lt;- v</code> が実行される前にLeft eを返す必要があります</div>
        </div>
      </div>
      <div class="event" id="message-1571302169.032000">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571302169.032000">2019-10-17 17:49:29 +0900</a></div>
          </div>
          <div class="description">なるほど！</div>
        </div>
      </div>
      <div class="event" id="message-1571302330.032200">
        <div class="content">
          <div class="summary">
            <div class="user">t.mitsuchi3</div>
            <div class="date"><a class="date" href="#message-1571302330.032200">2019-10-17 17:52:10 +0900</a></div>
          </div>
          <div class="description">だからわざわざこう書いてあるわけなんですね…。すごい。ありがとうございます！</div>
        </div>
      </div>
      <div class="event" id="message-1571318262.032800">
        <div class="content">
          <div class="summary">
            <div class="user">haryu703</div>
            <div class="date"><a class="date" href="#message-1571318262.032800">2019-10-17 22:17:42 +0900</a></div>
          </div>
          <div class="description">@haryu703 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571404278.033600">
        <div class="content">
          <div class="summary">
            <div class="user">momohatt10</div>
            <div class="date"><a class="date" href="#message-1571404278.033600">2019-10-18 22:11:18 +0900</a></div>
          </div>
          <div class="description">@momohatt10 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571487473.034000">
        <div class="content">
          <div class="summary">
            <div class="user">selty524</div>
            <div class="date"><a class="date" href="#message-1571487473.034000">2019-10-19 21:17:53 +0900</a></div>
          </div>
          <div class="description">かなり初歩的な質問で恐縮なのですが、「データ型」という言葉は「型」という言葉と全く同じ意味だと考えても大丈夫でしょうか？ Haskellの入門書とかだとデータ型という言葉がいきなり登場するので気になってしまって。</div>
        </div>
      </div>
      <div class="event" id="message-1571526549.034100">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1571526549.034100">2019-10-20 08:09:09 +0900</a></div>
          </div>
          <div class="description">はい。問題ないと思います。</div>
        </div>
      </div>
      <div class="event" id="message-1571571555.034400">
        <div class="content">
          <div class="summary">
            <div class="user">yutaro.ngsw</div>
            <div class="date"><a class="date" href="#message-1571571555.034400">2019-10-20 20:39:15 +0900</a></div>
          </div>
          <div class="description">@yutaro.ngsw has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571619157.034600">
        <div class="content">
          <div class="summary">
            <div class="user">selty524</div>
            <div class="date"><a class="date" href="#message-1571619157.034600">2019-10-21 09:52:37 +0900</a></div>
          </div>
          <div class="description">ありがとうございます!</div>
        </div>
      </div>
      <div class="event" id="message-1571647116.035000">
        <div class="content">
          <div class="summary">
            <div class="user">tempxla.public</div>
            <div class="date"><a class="date" href="#message-1571647116.035000">2019-10-21 17:38:36 +0900</a></div>
          </div>
          <div class="description">@tempxla.public has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571691321.035200">
        <div class="content">
          <div class="summary">
            <div class="user">gettaplacetogo</div>
            <div class="date"><a class="date" href="#message-1571691321.035200">2019-10-22 05:55:21 +0900</a></div>
          </div>
          <div class="description">ちょっと疑問なのですが，data typeってもちろん「型」の意味でも使われていると思うのですが， <code>data</code> type，すなわち代数的データ型の意味で使われていることないです？ <a href='https://gitlab.haskell.org/ghc/ghc/wikis/unlifted-data-types'>https://gitlab.haskell.org/ghc/ghc/wikis/unlifted-data-types</a> とかその例だと思うんですよね．</div>
        </div>
      </div>
      <div class="event" id="message-1571735651.035800">
        <div class="content">
          <div class="summary">
            <div class="user">yoshikit75</div>
            <div class="date"><a class="date" href="#message-1571735651.035800">2019-10-22 18:14:11 +0900</a></div>
          </div>
          <div class="description">@yoshikit75 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1571874827.038500">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1571874827.038500">2019-10-24 08:53:47 +0900</a></div>
          </div>
          <div class="description">最近のcabalで、stackのglobal project相当のこと、つまり、cabal.projectなどがないディレクトリーでcabal v2-installを実行することはできますか？<br/>ちょっとパッケージを試すのに逐一プロジェクトを作るのも不便だな、と思いまして。</div>
        </div>
      </div>
      <div class="event" id="message-1571875161.038700">
        <div class="content">
          <div class="summary">
            <div class="user">maoe</div>
            <div class="date"><a class="date" href="#message-1571875161.038700">2019-10-24 08:59:21 +0900</a></div>
          </div>
          <div class="description">3.0では実行ファイルはcabal installで、ライブラリはcabal install --libでglobal project相当の場所にインストール出来ます。</div>
        </div>
      </div>
      <div class="event" id="message-1571875235.039000">
        <div class="content">
          <div class="summary">
            <div class="user">maoe</div>
            <div class="date"><a class="date" href="#message-1571875235.039000">2019-10-24 09:00:35 +0900</a></div>
          </div>
          <div class="description">ちなみにreplだけならcabal repl -b package1 -b package2みたいに依存関係をその場で指定してreplをスタートできます</div>
        </div>
      </div>
      <div class="event" id="message-1571875622.039400">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1571875622.039400">2019-10-24 09:07:02 +0900</a></div>
          </div>
          <div class="description">できました！ありがとうございます！</div>
        </div>
      </div>
      <div class="event" id="message-1571875966.039600">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1571875966.039600">2019-10-24 09:12:46 +0900</a></div>
          </div>
          <div class="description">捕捉: cabal 2.4でも <code>v2-install --lib package</code> や <code>v2-repl -b package</code> でできました。</div>
        </div>
      </div>
      <div class="event" id="message-1572030294.040100">
        <div class="content">
          <div class="summary">
            <div class="user">nysopua</div>
            <div class="date"><a class="date" href="#message-1572030294.040100">2019-10-26 04:04:54 +0900</a></div>
          </div>
          <div class="description">@nysopua has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1572075693.040500">
        <div class="content">
          <div class="summary">
            <div class="user">hexirp</div>
            <div class="date"><a class="date" href="#message-1572075693.040500">2019-10-26 16:41:33 +0900</a></div>
          </div>
          <div class="description">Apache-2.0 を使っているライブラリって見たことがありますか？ 使おうと思っているんですが</div>
        </div>
      </div>
      <div class="event" id="message-1572075745.040600">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1572075745.040600">2019-10-26 16:42:25 +0900</a></div>
          </div>
          <div class="description">ライセンスの話ですよね。<br/>:raised_hand: 私が個人で作るときは基本Apache-2.0にしてます。</div>
        </div>
      </div>
      <div class="event" id="message-1572135510.041100">
        <div class="content">
          <div class="summary">
            <div class="user">tooppoo56</div>
            <div class="date"><a class="date" href="#message-1572135510.041100">2019-10-27 09:18:30 +0900</a></div>
          </div>
          <div class="description">@tooppoo56 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1572169514.041400">
        <div class="content">
          <div class="summary">
            <div class="user">starrybird.lostman</div>
            <div class="date"><a class="date" href="#message-1572169514.041400">2019-10-27 18:45:14 +0900</a></div>
          </div>
          <div class="description">@starrybird.lostman has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1572226415.046000">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1572226415.046000">2019-10-28 10:33:35 +0900</a></div>
          </div>
          <div class="description">いわゆるRecord of Functionsを好んでよく作るのですが、例えば以下のように <code>print</code> 関数をセットできるRecord型を作ろうとすると、Impredicative Typeを作ってしまい、コンパイルが通せません。<br/><pre>
data Env m = Env
  { print :: forall a. Show a =&gt; a -&gt; m ()
  , otherFields :: m Int
  }
</pre><br/>Record of Functionsを諦めてreflectionsパッケージを使うとか、妥協して <code>print</code> を <code>String -&gt; m ()</code> に変えるとか、いろいろ回避策は考えられると思うのですが、どんな方法がいいと思いますか？</div>
        </div>
      </div>
      <div class="event" id="message-1572234908.046300">
        <div class="content">
          <div class="summary">
            <div class="user">as_capabl</div>
            <div class="date"><a class="date" href="#message-1572234908.046300">2019-10-28 12:55:08 +0900</a></div>
          </div>
          <div class="description">その宣言だけなら普通に通るっぽいです<br/><br/><pre>
Prelude&gt; :set -XRankNTypes
Prelude&gt; data Env m = Env { print :: forall a. Show a =&gt; a -&gt; m (), otherFields :: m Int }
Prelude&gt; :type Env
Env :: (forall a. Show a =&gt; a -&gt; m ()) -&gt; m Int -&gt; Env m
Prelude&gt; x = Env Prelude.print (return 0)
Prelude&gt; :info x
x :: Env IO     -- Defined at &lt;interactive&gt;:10:1
</pre></div>
        </div>
      </div>
      <div class="event" id="message-1572234968.046600">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1572234968.046600">2019-10-28 12:56:08 +0900</a></div>
          </div>
          <div class="description">あれ、どこで間違えたんだろう... すみません... :sweat_drops:</div>
        </div>
      </div>
      <div class="event" id="message-1572280112.050200">
        <div class="content">
          <div class="summary">
            <div class="user">pontyan12</div>
            <div class="date"><a class="date" href="#message-1572280112.050200">2019-10-29 01:28:32 +0900</a></div>
          </div>
          <div class="description">2重リストにmapを適用させる関数を書きたいのですが、<br/><br/><code>[[2],[2]Listed: Listed.hs:(10,1)-(11,55): Non-exhaustive patterns in function secmap</code><br/><br/>このようなエラーが出てしまいます。どなたかアドバイスいただけないでしょうか？<br/>また、haskellでは多重リストに対してはあまり関数を作らないのでしょうか？ネットにあまりそう言った記事がなかったので多重リストに対し処理を行うのであれば他のアプローチがあるのであれば教えていただけると幸いです。<br/>よろしくお願いします。<br/><br/><pre>
module Listed(main) where

main :: IO ()
main = do
       print $ secmap (+1) [[1],[1]]
       print 1


secmap :: (a-&gt; b) -&gt; [[a]] -&gt; [[b]]
secmap f [[]]           = [[]]
secmap f ((x : xs):xxs) = ((f x:map f xs):secmap f xxs)
</pre></div>
        </div>
      </div>
      <div class="event" id="message-1572303640.050800">
        <div class="content">
          <div class="summary">
            <div class="user">9647142</div>
            <div class="date"><a class="date" href="#message-1572303640.050800">2019-10-29 08:00:40 +0900</a></div>
          </div>
          <div class="description"><code>[[][]]</code>にマッチしないからですかね?</div>
        </div>
      </div>
      <div class="event" id="message-1572303649.051000">
        <div class="content">
          <div class="summary">
            <div class="user">matsubara0507</div>
            <div class="date"><a class="date" href="#message-1572303649.051000">2019-10-29 08:00:49 +0900</a></div>
          </div>
          <div class="description">ちなみに、エラーの意味はわかってますか？</div>
        </div>
      </div>
      <div class="event" id="message-1572304814.051300">
        <div class="content">
          <div class="summary">
            <div class="user">nobsun</div>
            <div class="date"><a class="date" href="#message-1572304814.051300">2019-10-29 08:20:14 +0900</a></div>
          </div>
          <div class="description">意図は`secmap = map . map`なのでしょうか．</div>
        </div>
      </div>
      <div class="event" id="message-1572309325.055800">
        <div class="content">
          <div class="summary">
            <div class="user">pontyan12</div>
            <div class="date"><a class="date" href="#message-1572309325.055800">2019-10-29 09:35:25 +0900</a></div>
          </div>
          <div class="description">おそらく再帰の最後(今回だと二つ目の[1]の後)にsecmapに渡されるとき[]になってしまって違う型になっているのだと思いますが、関数の定義の際それをどうやって指定すればいいのかわかりません...<br/><br/>意図としてはそうですがMap関数はリストのリストに対しても適当可能なのでしょうか？</div>
        </div>
      </div>
      <div class="event" id="message-1572309953.056000">
        <div class="content">
          <div class="summary">
            <div class="user">matsubara0507</div>
            <div class="date"><a class="date" href="#message-1572309953.056000">2019-10-29 09:45:53 +0900</a></div>
          </div>
          <div class="description">（type エラーもあるかもしれませんが）<br/>これはパターンマッチングにおいてパターンが網羅的になってないって意味のエラーなはず</div>
        </div>
      </div>
      <div class="event" id="message-1572310566.056200">
        <div class="content">
          <div class="summary">
            <div class="user">matonix</div>
            <div class="date"><a class="date" href="#message-1572310566.056200">2019-10-29 09:56:06 +0900</a></div>
          </div>
          <div class="description">多重リストを扱うとき，自分もこんがらがるのでリスト内包表記を併用したりしてます．（例えば下記のような感じで…）<br/><pre>
[ map (+1) xs | xs &lt;- [[1], [1]] ]
</pre><br/>もちろん，リスト内包表記の内部でリスト内包表記を扱うことも出来ます．<br/><pre>
[ [ x + 1 | x &lt;- xs] | xs &lt;- [[1], [1]] ] 
</pre></div>
        </div>
      </div>
      <div class="event" id="message-1572318925.057300">
        <div class="content">
          <div class="summary">
            <div class="user">hexirp</div>
            <div class="date"><a class="date" href="#message-1572318925.057300">2019-10-29 12:15:25 +0900</a></div>
          </div>
          <div class="description">今作ってるライブラリも個人なので Apache-2.0 にしました <a href='https://github.com/Hexirp/yhseq'>https://github.com/Hexirp/yhseq</a></div>
        </div>
      </div>
      <div class="event" id="message-1572318939.057700">
        <div class="content">
          <div class="summary">
            <div class="user">hexirp</div>
            <div class="date"><a class="date" href="#message-1572318939.057700">2019-10-29 12:15:39 +0900</a></div>
          </div>
          <div class="description">ありがとうございます</div>
        </div>
      </div>
      <div class="event" id="message-1572322045.058100">
        <div class="content">
          <div class="summary">
            <div class="user">pontyan12</div>
            <div class="date"><a class="date" href="#message-1572322045.058100">2019-10-29 13:07:25 +0900</a></div>
          </div>
          <div class="description">リスト内包はこう言う時に使うんですね、、、<br/>ありがとうございます！</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/72.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
      <a href="../../html/C5666B6BB/74.html" class="item">Next</a>
    </div>
  </div>
</body>
</html>
