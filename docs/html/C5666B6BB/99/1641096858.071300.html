<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / questions #99 at 2022-01-02 13:14:18 +0900</title>
<link rel="stylesheet" href="../../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / questions #99 at 2022-01-02 13:14:18 +0900</h1>
    <div class="ui pagination menu">
      <a href="../99.html" class="item">Back to questions #99</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1641096858.071300">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1641096858.071300">2022-01-02 13:14:18 +0900</a></div>
          </div>
          <div class="description">HspecのExpectations(`shouldBe` とか)について質問です<br/>数値をテストする際に、浮動少数計算によって起きる僅かな誤差を取り除いてくれるExpectationってありますか...?<br/>今3次元ベクトルを回転行列で変換する関数を書いていて、そのテストをしたいのですが三角関数周りの誤差でテストが書けずにいます...<br/>例えば <code>cos (pi/2) </code>shouldBe` 0` は成功してほしいのですが失敗するなどします。<br/><br/>現在は、ある程度の誤差を無視する以下のような関数を作成してそれで判定をしているのですが、何かしら一般的な方法があったりしますでしょうか...?<br/><pre>almostEqual :: Float -&gt; Float -&gt; Bool
almostEqual a b = a+diff &gt;= b &amp;&amp; b &lt;= a+diff 
  where
    diff = 0.1 -- 無視してよい誤差の範囲を決めるよしなな数字、今は適当</pre><br/></div>
        </div>
      </div>
      <div class="event" id="message-1641178077.071400">
        <div class="content">
          <div class="summary">
            <div class="user">kakkun61</div>
            <div class="date"><a class="date" href="#message-1641178077.071400">2022-01-03 11:47:57 +0900</a></div>
          </div>
          <div class="description">自分で使ったことはないのですがこういうのがあるみたいです<br/><a href='https://hackage.haskell.org/package/HUnit-approx-1.1.1.1/docs/Test-HUnit-Approx.html'>https://hackage.haskell.org/package/HUnit-approx-1.1.1.1/docs/Test-HUnit-Approx.html</a></div>
        </div>
      </div>
      <div class="event" id="message-1641216612.071700">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1641216612.071700">2022-01-03 22:30:12 +0900</a></div>
          </div>
          <div class="description">HUnitは使ってないのでそのままは使えなさそうですが、実装の仕方参考になりました!ありがとうございます!!<br/>上記した <code>almostEqual</code> よりも、差分を計算する方が良さそうなのでそうしてみます!</div>
        </div>
      </div>
      <div class="event" id="message-1641260260.071900">
        <div class="content">
          <div class="summary">
            <div class="user">fumieval</div>
            <div class="date"><a class="date" href="#message-1641260260.071900">2022-01-04 10:37:40 +0900</a></div>
          </div>
          <div class="description"><a href='https://hackage.haskell.org/package/hspec-expectations-0.8.2/docs/Test-Hspec-Expectations.html#t:Expectation'>type Expectation = Assertion</a> からわかる通り、hspecはHUnitのラッパーなのでそのまま使えますよ！</div>
        </div>
      </div>
      <div class="event" id="message-1641281684.072400">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1641281684.072400">2022-01-04 16:34:44 +0900</a></div>
          </div>
          <div class="description">なるほど!知りませんでしたありがとうございます...!!</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../99.html" class="item">Back to questions #99</a>
    </div>
  </div>
</body>
</html>
