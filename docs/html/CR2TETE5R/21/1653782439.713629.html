<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / beginners #21 at 2022-05-29 09:00:39 +0900</title>
<link rel="stylesheet" href="../../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / beginners #21 at 2022-05-29 09:00:39 +0900</h1>
    <div class="ui pagination menu">
      <a href="../21.html" class="item">Back to beginners #21</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1653782439.713629">
        <div class="content">
          <div class="summary">
            <div class="user">宮入徹也</div>
            <div class="date"><a class="date" href="#message-1653782439.713629">2022-05-29 09:00:39 +0900</a></div>
          </div>
          <div class="description">現在haskell で gmail の新着を imap で取得し、tmux のステータスバーに表示するプログラムを常用しております。oauth2.0 認証に変更したいのですが、参考にすべきサンプルコード等を探しています。参考情報等ご教示いただけると助かります。</div>
        </div>
      </div>
      <div class="event" id="message-1654086829.602029">
        <div class="content">
          <div class="summary">
            <div class="user">宮入徹也</div>
            <div class="date"><a class="date" href="#message-1654086829.602029">2022-06-01 21:33:49 +0900</a></div>
          </div>
          <div class="description">質問の補足として、今回使用しているコードは以下のとおりです。<br/><br/>また、検討の経緯は、gmailが5月30日からユーザー名とパスワードのみでログインするアプリがブロックされるとの情報によるものでした。しかし、現時点で、これまでどおり情報取得ができているため、急いで認証方式を変更する必要はないようです。<br/><br/><pre>import Network.HaskellNet.IMAP.SSL
getMail = forever $ do
  conn &lt;-connectIMAPSSLWithSettings "<http://imap.gmail.com|imap.gmail.com>" defaultSettingsIMAPSSL { sslMaxLineLength = 100000 } 
  id &lt;- getEnv "IMAP_USER"
  pass &lt;- getEnv "IMAP_PASS"
  login conn id pass
  [(_, msgNo)] &lt;- status conn "INBOX" [UNSEEN]
  logout conn
  print msgNo
  threadDelay $ 5 × 1000 × 1000</pre></div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../21.html" class="item">Back to beginners #21</a>
    </div>
  </div>
</body>
</html>
