<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / beginners #9</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / beginners #9</h1><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/8.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1594177785.113400"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1594177785.113400">2020-07-08&nbsp;12:09:45 +0900</a></div></div><div class="message__body description">あ、なるほど。</div></div></div><div class="message event" id="message-1594182324.113700"><div class="content"><div class="summary"><div class="message__header user">sesame.parrot</div><div class="message__timestamp date"><a class="date" href="#message-1594182324.113700">2020-07-08&nbsp;13:25:24 +0900</a></div></div><div class="message__body description">@sesame.parrot has joined the channel</div></div></div><div class="message event" id="message-1594265082.120700"><div class="content"><div class="summary"><div class="message__header user">k.f.shogi</div><div class="message__timestamp date"><a class="date" href="#message-1594265082.120700">2020-07-09&nbsp;12:24:42 +0900</a></div></div><div class="message__body description">stackの使い方について質問させていただきたいです．<br/>yamlファイルやcabalファイルについてまだ使い方がちゃんとわかっていないところがあると思うのですが，回答いただければ幸いです．<br/><br/>環境はWindows10でstack2.3.1を使っています．<br/><br/>Haskellでsqliteを扱いたく， <code>sqlite-simple</code> というライブラリを使おうと，`stack.yaml` の <code>extra-devs</code> と プロジェクトのcabalファイルに以下のように追加しました．<br/><pre># stack.yaml
# コメント行は省略します

resolver: lts-16.2

packages:
- .

extra-deps:
- sqlite-simple-0.4.16.0@sha256:aeb9502c0004054846829766a08d856122a7e7386077b95048e60edaf9f46b88,2947</pre><br/><pre># cabalファイル(一部)
library
  hs-source-dirs:      src
  exposed-modules:     Lexer, Writer
  build-depends:       base &gt;= 4.7 &amp;&amp; &lt; 5
                     , text
                     , sqlite-simple       # この行を追加しました
  default-language:    Haskell2010</pre><br/><br/>するとビルド時に以下のようなエラーが出ました．<br/><pre>Error: While constructing the build plan, the following exceptions were encountered:

In the dependencies for sqlite-simple-0.4.16.0:
    base-4.13.0.0 from stack configuration does not match &lt;4.13  (latest matching version
                  is 4.12.0.0)
    direct-sqlite must match &gt;=2.3.13 &amp;&amp; &lt;2.4, but the stack configuration has no specified
                  version  (latest matching version is 2.3.26)
    semigroups-0.19.1 from stack configuration does not match ==0.18.*  (latest matching version
                      is 0.18.5)
needed due to AIQRating-0.1.0.0 -&gt; sqlite-simple-0.4.16.0

Some different approaches to resolving this:

  * Build requires unattainable version of base. Since base is a part of GHC, you most likely
    need to use a different GHC version with the matching base.

Plan construction failed.</pre><br/><code>dependencies</code> 等々書いてあったため，baseのバージョンが新しすぎて対応していないのかな？などと思い，cabalファイルの <code>build-depends</code> をいじったりしていたのですが，エラーが全く解決できず困っています．<br/>初歩的な質問かもしれないのですが，原因と対処法を教えていただければ幸いです．</div></div></div><div class="message event" id="message-1594265641.122900"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date"><a class="date" href="#message-1594265641.122900">2020-07-09&nbsp;12:34:01 +0900</a></div></div><div class="message__body description">そのエラーは「sqlite-simpleのバージョンを0.4.16を指定してるけど、stackage の LTS-16.2 の base バージョン 4.13 では使えないよ（&lt;4.13 という条件がある）」って感じ</div></div></div><div class="message event" id="message-1594265791.123500"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date"><a class="date" href="#message-1594265791.123500">2020-07-09&nbsp;12:36:31 +0900</a></div></div><div class="message__body description">エラーの解決方法は次のどちらか<br/>1. 古い base のバージョンを使う（stack.yaml の <code>resolver</code> を lts-15 系を使う）<br/>2. 新しい sqlite-simple を使う（stack.yaml の <code>extra-deps</code> の <code>sqlite-simple-0.4.16.0@...</code> を <code>sqlite-simple-0.4.18.0</code> とかにする）</div></div></div><div class="message event" id="message-1594268493.123900"><div class="content"><div class="summary"><div class="message__header user">k.f.shogi</div><div class="message__timestamp date"><a class="date" href="#message-1594268493.123900">2020-07-09&nbsp;13:21:33 +0900</a></div></div><div class="message__body description">ありがとうございます！やってみます！！</div></div></div><div class="message event" id="message-1594371824.124700"><div class="content"><div class="summary"><div class="message__header user">tatsurotamashiro</div><div class="message__timestamp date"><a class="date" href="#message-1594371824.124700">2020-07-10&nbsp;18:03:44 +0900</a></div></div><div class="message__body description">@tatsurotamashiro has joined the channel</div></div></div><div class="message event" id="message-1594459062.124900"><div class="content"><div class="summary"><div class="message__header user">fal19cotton</div><div class="message__timestamp date"><a class="date" href="#message-1594459062.124900">2020-07-11&nbsp;18:17:42 +0900</a></div></div><div class="message__body description">@fal19cotton has joined the channel</div></div></div><div class="message event" id="message-1594467677.125100"><div class="content"><div class="summary"><div class="message__header user">shiogai1987</div><div class="message__timestamp date"><a class="date" href="#message-1594467677.125100">2020-07-11&nbsp;20:41:17 +0900</a></div></div><div class="message__body description">@shiogai1987 has joined the channel</div></div></div><div class="message event" id="message-1594516358.129200"><div class="content"><div class="summary"><div class="message__header user">nagata.hbdc</div><div class="message__timestamp date"><a class="date" href="#message-1594516358.129200">2020-07-12&nbsp;10:12:38 +0900</a></div></div><div class="message__body description">すこし漠然とした質問なのですが、Haskellで個人のウェブサイトを立ち上げようとした場合、どのフレームワークを使うのがおすすめですか？CMSライブラリも使いたいと考えています。<br/>バックとフロントをWebAPIで繋ぐヘッドレス構成にし、フロントはReasonMLを使ってみようと思います。ちなみにHaskellユーザはPureScriptを使うものなのでしょうか？</div></div></div><div class="message event" id="message-1594517267.129400"><div class="content"><div class="summary"><div class="message__header user">eagle.hokkaido2317</div><div class="message__timestamp date"><a class="date" href="#message-1594517267.129400">2020-07-12&nbsp;10:27:47 +0900</a></div></div><div class="message__body description">@eagle.hokkaido2317 has joined the channel</div></div></div><div class="message event" id="message-1594518055.129500"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1594518055.129500">2020-07-12&nbsp;10:40:55 +0900</a></div></div><div class="message__body description">APIを作るならservantが人気ですね。<br/>フロントは好きなの使えばいいんじゃないっすかね。確かにPureScriptの方がReasonより流行っている <b>イメージ</b> はありますけど。</div></div></div><div class="message event" id="message-1594528296.129800"><div class="content"><div class="summary"><div class="message__header user">nagata.hbdc</div><div class="message__timestamp date"><a class="date" href="#message-1594528296.129800">2020-07-12&nbsp;13:31:36 +0900</a></div></div><div class="message__body description">servant, ありがとうございます！！試してみます！！</div></div></div><div class="message event" id="message-1594535803.130100"><div class="content"><div class="summary"><div class="message__header user">stmtk13044032</div><div class="message__timestamp date"><a class="date" href="#message-1594535803.130100">2020-07-12&nbsp;15:36:43 +0900</a></div></div><div class="message__body description">@stmtk13044032 has joined the channel</div></div></div><div class="message event" id="message-1594544835.130200"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1594544835.130200">2020-07-12&nbsp;18:07:15 +0900</a></div></div><div class="message__body description">:pray: 進めておいてからなんで申し訳ないのですが、servantはもりもりの型レベルプログラミングを必要とする、結構しんどいフレームワークである点はご注意ください。<br/><a href='https://wiki.haskell.jp/Hikers%20Guide%20to%20Haskell#web%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3'>https://wiki.haskell.jp/Hikers%20Guide%20to%20Haskell#web%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3</a> にも書いたとおり難しければspockでもいいかも。<br/>あるいは思い切って、servantもspockもベースとしているWAI <a href='http://hackage.haskell.org/package/wai'>http://hackage.haskell.org/package/wai</a> を直接使うのもいいでしょう。</div></div></div><div class="message event" id="message-1594551580.130700"><div class="content"><div class="summary"><div class="message__header user">nagata.hbdc</div><div class="message__timestamp date"><a class="date" href="#message-1594551580.130700">2020-07-12&nbsp;19:59:40 +0900</a></div></div><div class="message__body description">情報ありがとうございます！</div></div></div><div class="message event" id="message-1595333310.133800"><div class="content"><div class="summary"><div class="message__header user">nagata.hbdc</div><div class="message__timestamp date"><a class="date" href="#message-1595333310.133800">2020-07-21&nbsp;21:08:30 +0900</a></div></div><div class="message__body description">今使ってるMacBook Proを修理に出そうと思っていて、<br/>代わりにWindowsにstack.exeをDLしてstackからhlintとhoogleをインストールしようとしたところエラーが出たのですが<br/>この記事<br/><a href='https://haskell.jp/blog/posts/2017/windows-gotchas.html'>https://haskell.jp/blog/posts/2017/windows-gotchas.html</a><br/>のおかげで助かりました。<br/><pre>chcp 65001</pre><br/>これ知らないと詰まりますね…</div></div></div><div class="message event" id="message-1595471988.134400"><div class="content"><div class="summary"><div class="message__header user">takatoshi.ichikawa</div><div class="message__timestamp date"><a class="date" href="#message-1595471988.134400">2020-07-23&nbsp;11:39:48 +0900</a></div></div><div class="message__body description">@takatoshi.ichikawa has joined the channel</div></div></div><div class="message event" id="message-1595478634.140100"><div class="content"><div class="summary"><div class="message__header user">eagle.hokkaido2317</div><div class="message__timestamp date"><a class="date" href="#message-1595478634.140100">2020-07-23&nbsp;13:30:34 +0900</a></div></div><div class="message__body description">質問です．<br/>glossとgloss-juicyを入れたいのですが，Bitmap型コンストラクタの引数がgloss-1.11.1.1とgloss&gt;=1.13で変わっているため<br/><br/>dependencies:<br/>- base &gt;= 4.7 &amp;&amp; &lt; 5<br/>- gloss == 1.11.1.1<br/>- gloss-juicy == 0.2.2<br/>の構成でstack buildしようとすると<br/>&gt; In the dependencies for hima-0.1.0.0:<br/>&gt;   gloss-1.13.1.2 from stack configuration does not match ==1.11.1.1 <br/>&gt;           (latest matching version is 1.11.1.1)<br/>&gt; needed since hima is a build target.<br/>&gt; <br/>&gt; Some different approaches to resolving this:<br/>&gt; <br/>&gt;  * Set 'allow-newer: true'<br/>&gt;   in /Users/vogel/.stack/config.yaml to ignore all version constraints and build anyway.<br/>&gt; <br/>&gt;  * *Recommended action:* try adding the following to your extra-deps<br/>&gt;   in /Users/vogel/Documents/Haskell/hima/stack.yaml:<br/>&gt; <br/>&gt; - gloss-1.11.1.1@sha256:6b5f8428b204b2c8fecba0b3dc5f49278d5c57a0003e59c46b16b356a770adaf,3840<br/>と返ってきます．<br/>・一番下のextra-deps追加　→　baseやcontainersでさらにエラーが返ってくる<br/>のですが，<br/>・config.yamlのallow-newerはtrueにしても問題ないのでしょうか(他のプロジェクトへの影響など)<br/>・他に解決方法はないでしょうか</div></div></div><div class="message event" id="message-1595479130.140300"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1595479130.140300">2020-07-23&nbsp;13:38:50 +0900</a></div></div><div class="message__body description"><blockquote>他のプロジェクトへの影響など</blockquote><code>allow-newer</code> を <code>true</code> にしてもとくに他のプロジェクトへの影響はありません。<br/>自力で直す気もより古いバージョン（古いGHCと合わせて）を使う気もないなら <code>allow-newer</code> する以外の方法はないでしょう。</div></div></div><div class="message event" id="message-1595479192.140500"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1595479192.140500">2020-07-23&nbsp;13:39:52 +0900</a></div></div><div class="message__body description">補足: baseやcontainerはGHCに付属しているパッケージなので、それらが合わない、といわれたらGHCのバージョンを下げる（古いLTS Haskellに変える）しかないです。</div></div></div><div class="message event" id="message-1595479256.140700"><div class="content"><div class="summary"><div class="message__header user">eagle.hokkaido2317</div><div class="message__timestamp date"><a class="date" href="#message-1595479256.140700">2020-07-23&nbsp;13:40:56 +0900</a></div></div><div class="message__body description">ありがとうございます，あんまり大元のファイルをいじりたくないのでバージョン下げる方法でtryしてみます</div></div></div><div class="message event" id="message-1595479353.140900"><div class="content"><div class="summary"><div class="message__header user">eagle.hokkaido2317</div><div class="message__timestamp date"><a class="date" href="#message-1595479353.140900">2020-07-23&nbsp;13:42:33 +0900</a></div></div><div class="message__body description"><strike>gloss-juicyの作者に変更点を送ることも考えます</strike><br/>あれ，最新のgithubみると修正されていますね，私の設定が悪い気がしてきました，見直してみます</div></div></div><div class="message event" id="message-1595479556.141200"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1595479556.141200">2020-07-23&nbsp;13:45:56 +0900</a></div></div><div class="message__body description">単純にリリースを後回しにしている可能性もあります（作者に連絡してリリースをせかすのもいいでしょう）。<br/>GitHubに上がっているバージョンを直接使う場合は <a href='https://haskell.e-bigmoon.com/stack/intro/extra-deps.html'>https://haskell.e-bigmoon.com/stack/intro/extra-deps.html</a> に書かれている方法を参考にしてください。</div></div></div><div class="message event" id="message-1595480920.141600"><div class="content"><div class="summary"><div class="message__header user">eagle.hokkaido2317</div><div class="message__timestamp date"><a class="date" href="#message-1595480920.141600">2020-07-23&nbsp;14:08:40 +0900</a></div></div><div class="message__body description">ありがとうございます，無事環境設定できました！</div></div></div><div class="message event" id="message-1595483275.141800"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date"><a class="date" href="#message-1595483275.141800">2020-07-23&nbsp;14:47:55 +0900</a></div></div><div class="message__body description">趣味や民間(?)のパッケージが多いプロジェクトは、stackよりもcabal-installのほうが詰まりにくいかもしれません。StackageのLTSは新しいライブラリや処理系が出回るまでどうしてもタイムラグがあるので、cabalで最新版を使ってもらったほうがライブラリ開発者としてもありがたいです</div></div></div><div class="message event" id="message-1595484333.142000"><div class="content"><div class="summary"><div class="message__header user">eagle.hokkaido2317</div><div class="message__timestamp date"><a class="date" href="#message-1595484333.142000">2020-07-23&nbsp;15:05:33 +0900</a></div></div><div class="message__body description">なるほど，これまでもstackで使えずに車輪の再発明したものもあるので，そろそろ真面目にcabalやり直した方がいいかもしれません．<br/>皆様色々とありがとうございます</div></div></div><div class="message event" id="message-1595514860.142900"><div class="content"><div class="summary"><div class="message__header user">imura</div><div class="message__timestamp date"><a class="date" href="#message-1595514860.142900">2020-07-23&nbsp;23:34:20 +0900</a></div></div><div class="message__body description">@imura has joined the channel</div></div></div><div class="message event" id="message-1595593351.143100"><div class="content"><div class="summary"><div class="message__header user">henri.saks.math</div><div class="message__timestamp date"><a class="date" href="#message-1595593351.143100">2020-07-24&nbsp;21:22:31 +0900</a></div></div><div class="message__body description">@henri.saks.math has joined the channel</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/8.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>