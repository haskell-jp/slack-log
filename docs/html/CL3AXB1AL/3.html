<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / atcoder-lang-update #3</title><link rel="stylesheet" href="../../messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / atcoder-lang-update #3</h1><div class="pager"><a href="../../html/CL3AXB1AL/2.html" class="pager__previous">Previous</a><a href="../../" class="pager__top">Top</a></div><div class="message_list"><div class="message" id="message-1566687665.006300"><div class="message__timestamp">2019-08-25<br/>08:01:05 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">すみません、tf-randomも欲しいのを完全に忘れてました。PullReqを投げようかと思います。ただ、このままだとmod_poppoさんのと(アルファベット順を考えると)conflictを起こしそうなので、……GitHubの使い方に慣れていません。マージ待ちをするのが良いのでしょうか？</div></div><div class="message" id="message-1566687950.006400"><div class="message__timestamp">2019-08-25<br/>08:05:50 +0900</div><div class="message__header">wado</div><div class="message__body">今日作業する予定なので、一緒に更新しますね！</div></div><div class="message" id="message-1566688307.007200"><div class="message__timestamp">2019-08-25<br/>08:11:47 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">すみません、よろしくお願いします。</div></div><div class="message" id="message-1566715670.010600"><div class="message__timestamp">2019-08-25<br/>15:47:50 +0900</div><div class="message__header">wado</div><div class="message__body">@minorinoki_haskjp merge しました。<br/>@gettaplacetogo <code>tf-random</code> も追記しました。<br/><br/>インストール手順を再確認しドキュメントを少し微調整しました。<br/>また、README に色々書いてあったのでドキュメントを分離しました。<br/><a href='https://github.com/haskell-jp/atcoder-haskell-resources'>https://github.com/haskell-jp/atcoder-haskell-resources</a><br/><br/>スプレッドシートへの反映もOKです。<br/>ちょっと気になるのは、言語アップデートの実施日が伸びるとタイミング的に GHC 8.8 がリリースされて <code>ghcup</code> の手順が若干変わるのではないかという・・・。</div></div><div class="message" id="message-1566719172.011300"><div class="message__timestamp">2019-08-25<br/>16:46:12 +0900</div><div class="message__header">igrep</div><div class="message__body">確かに間もなく出るよ、と一昨日のHIWでいうてましたね</div></div><div class="message" id="message-1566816192.012200"><div class="message__timestamp">2019-08-26<br/>19:43:12 +0900</div><div class="message__header">igrep</div><div class="message__body">本当に間もなくだった :sweat_smile:<br/><a href='https://haskell-jp.slack.com/archives/C4M4TT8JJ/p1566812233010100'>https://haskell-jp.slack.com/archives/C4M4TT8JJ/p1566812233010100</a><br/>でもbuggyだったら困るし、8.6.5で様子見るのもいいんじゃないっすか。</div></div><div class="message" id="message-1566884623.012400"><div class="message__timestamp">2019-08-27<br/>14:43:43 +0900</div><div class="message__header">wado</div><div class="message__body">8.6.5 を利用したいんですが、ghcup のコマンドをそのまま実行した際に落ちてくるバージョンが 8.8.1 に切り替わると困るので、やっぱりスクリプトをちょっと修正して明示的に 8.6.5 を使うようにした方が安全ですね。</div></div><div class="message" id="message-1566895509.012700"><div class="message__timestamp">2019-08-27<br/>17:45:09 +0900</div><div class="message__header">wado</div><div class="message__body">cabal-install も 3.0.0.0 がリリースされたので同様に修正します。<br/><a href='https://hackage.haskell.org/package/cabal-install-3.0.0.0'>https://hackage.haskell.org/package/cabal-install-3.0.0.0</a></div></div><div class="message" id="message-1567378923.000200"><div class="message__timestamp">2019-09-02<br/>08:02:03 +0900</div><div class="message__header">tomitake.yokosekanemo</div><div class="message__body">@tomitake.yokosekanemo has joined the channel</div></div><div class="message" id="message-1567653891.000400"><div class="message__timestamp">2019-09-05<br/>12:24:51 +0900</div><div class="message__header">addokoda</div><div class="message__body">@addokoda has joined the channel</div></div><div class="message" id="message-1568772127.009000"><div class="message__timestamp">2019-09-18<br/>11:02:07 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">超今更なんですけど， <code>bytestring-to-vector</code> ( <code>ByteString</code> とStorable <code>Vector</code> の間の変換をcopylessに行う)ってどう思います？ このパッケージ自体はnaiveに考えると文字列問題系のときに気軽に使えそうでちょっと欲しいな，とも思うんですが，申請しようかは迷っております． <code>vector-bytestring</code> ( <code>ByteString</code> reimplemented as Storable <code>Vector</code> of <code>Word8</code> …しかし性能は追いついていないので代替にはならない)とかとモジュール名被りを起こしていたり，そのあとStream Fusionで連鎖的に変換することを前提にするなら <code>unfoldrN n ByteString.uncons</code> でもいいような気もしたり，で……</div></div><div class="message" id="message-1569669796.011600"><div class="message__timestamp">2019-09-28<br/>20:23:16 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">いつまで経ってもアップデート実施されないですね…。今更 <code>vector-th-unbox</code> (それに伴い <code>template-haskell</code>) , <code>mutable-containers</code>, <code>hashable</code> (`psqueues` の関係で) くらいあった方が良さそうだと気がついたので、明日か明後日あたりプルリク投げます</div></div><div class="message" id="message-1569670117.013000"><div class="message__timestamp">2019-09-28<br/>20:28:37 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body"><code>vector-th-unbox</code> は <code>unboxing-vector</code> があればいらなさそう、というのはありますが。</div></div><div class="message" id="message-1569802764.017900"><div class="message__timestamp">2019-09-30<br/>09:19:24 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">今プルリク投げる前にと思って仮想環境上でやってるんですけど、 <code>bytestring</code>, <code>deepseq</code>, <code>transformers</code>, <code>containers</code> 辺りのインストール済みパッケージが含まれるのは…まあ含まれても問題ないんだからいいんでしょうか？  ghcupの既定ghcバージョンが上がった時にそこらへんでエラーが起きてくれそうでもありますし。</div></div><div class="message" id="message-1569802880.019700"><div class="message__timestamp">2019-09-30<br/>09:21:20 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">いや、というのも <code>template-haskell</code> はGHC付属パッケージに含まれるため、要望パッケージに追加しないつもりでいたので。追加した方がいいんですかね？</div></div><div class="message" id="message-1569803375.020500"><div class="message__timestamp">2019-09-30<br/>09:29:35 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">とりあえず含めて投げますね</div></div><div class="message" id="message-1569833080.023300"><div class="message__timestamp">2019-09-30<br/>17:44:40 +0900</div><div class="message__header">as_capabl</div><div class="message__body">亀ですが <code>bytestring-to-vector</code> 、DL数の少なさから、今後メンテされるか不安が。どうしても添え字アクセスがしたければ <code>unsafeUseAsCString</code> と <code>peekElemOff</code> で似たような事が可能ですし</div></div><div class="message" id="message-1569833285.024400"><div class="message__timestamp">2019-09-30<br/>17:48:05 +0900</div><div class="message__header">as_capabl</div><div class="message__body">というか普通に <code>index</code> 関数ありましたね。 <code>Vector</code> にしかないアルゴリズムをどうしても使いたい、みたいなユースケースでしょうか</div></div><div class="message" id="message-1569840855.026600"><div class="message__timestamp">2019-09-30<br/>19:54:15 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">というか，<br/><code>ByteString</code><br/>-&gt; <code>Vector</code><br/>-(`unsafeThaw`)-&gt; <code>MVector</code><br/>-(modifications)-&gt; <code>MVector</code><br/>-(`create`)-&gt; <code>Vector</code><br/>-(Stream-fusible transformations)-&gt; <code>Vector</code><br/>-&gt; Output, みたいなユースケースを想定してました．</div></div><div class="message" id="message-1569841416.027000"><div class="message__timestamp">2019-09-30<br/>20:03:36 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body"><code>bytestring-to-vector</code> も（容易に削除可能な形で）含めてプルリク投げたので，みなさまコメントをお願いします<br/><a href='https://github.com/haskell-jp/atcoder-haskell-resources/pull/3'>https://github.com/haskell-jp/atcoder-haskell-resources/pull/3</a></div></div><div class="message" id="message-1569842889.027500"><div class="message__timestamp">2019-09-30<br/>20:28:09 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">不安の声があったので，とりあえずbytestring-to-vectorを除外しました．別のプルリクにします．</div></div><div class="message" id="message-1569844229.027700"><div class="message__timestamp">2019-09-30<br/>20:50:29 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">別のpull requestとして投げました．</div></div><div class="message" id="message-1569844712.028900"><div class="message__timestamp">2019-09-30<br/>20:58:32 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">@wado このプルリクには問題なさそうなのだけ残してあるので，確認の上mergeしてもらえると嬉しいです． <a href='https://github.com/haskell-jp/atcoder-haskell-resources/pull/3'>https://github.com/haskell-jp/atcoder-haskell-resources/pull/3</a></div></div><div class="message" id="message-1570187281.033300"><div class="message__timestamp">2019-10-04<br/>20:08:01 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body"><code>index</code> とかで処理するなら、実のところ <code>Vector</code> に変換する必要は感じてなくて、GCでTLEが嫌なので入力領域を可変配列でそのまま書き換えたい、という欲求がある場合を想定してるんですよね。</div></div><div class="message" id="message-1570261970.033500"><div class="message__timestamp">2019-10-05<br/>16:52:50 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">@wado いま確認したら，妙なところに改行があってspec.mdのレイアウトがおかしいことになっているのですが，追加コミットをして構いませんか？</div></div><div class="message" id="message-1570262575.034500"><div class="message__timestamp">2019-10-05<br/>17:02:55 +0900</div><div class="message__header">wado</div><div class="message__body">どうぞー。今日の夜確認しますね。</div></div><div class="message" id="message-1570358972.034900"><div class="message__timestamp">2019-10-06<br/>19:49:32 +0900</div><div class="message__header">wado</div><div class="message__body">@gettaplacetogo<br/>以下のPRをマージしました。ありがとうございます。<br/><a href='https://github.com/haskell-jp/atcoder-haskell-resources/pull/3'>https://github.com/haskell-jp/atcoder-haskell-resources/pull/3</a></div></div><div class="message" id="message-1570359018.035400"><div class="message__timestamp">2019-10-06<br/>19:50:18 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">@wado ありがとうございます。</div></div><div class="message" id="message-1570359357.035600"><div class="message__timestamp">2019-10-06<br/>19:55:57 +0900</div><div class="message__header">wado</div><div class="message__body"><a href='https://github.com/haskell-jp/atcoder-haskell-resources/pull/4'>https://github.com/haskell-jp/atcoder-haskell-resources/pull/4</a><br/><br/>上記のPRについては、他の方の意見も聞いた方が良いということなのでまだマージしていません。個人的には以下の点が気になるのですが、みなさんご意見ありますか？<br/><br/><blockquote>vector-bytestring とモジュール名被りを起こしている</blockquote><br/>また、実際の AtCoder の問題でこんな感じで使えそうです。というような実例とかってありますか？<@UL1HFJATE></div></div><div class="message" id="message-1570359960.036800"><div class="message__timestamp">2019-10-06<br/>20:06:00 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">ちょっと待ってください．今探してます・・・．</div></div><div class="message" id="message-1570361276.037100"><div class="message__timestamp">2019-10-06<br/>20:27:56 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">「使える」… <code>ByteString</code> って，入力のタイミング以外ではほとんど使いません．だから，メリットって，使うと実行時間とメモリ使用量をO(N) [N:入力サイズ] 減少できる（精神衛生上良い）ぐらいしかないんですよね．Constant mutipleでTLE/MLEになるような問題で微妙に時間計算量を稼ぐとか，それくらいなんですよねえ．</div></div><div class="message" id="message-1570361534.037600"><div class="message__timestamp">2019-10-06<br/>20:32:14 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">実行時間を微妙に縮められる可能性がある，ということであれば，<br/><a href='https://atcoder.jp/contests/joi2008ho/submissions/3927679'>https://atcoder.jp/contests/joi2008ho/submissions/3927679</a><br/>とかが例になります．Storable Arrayとして入力を受け取っておいて，それをVectorとしてコピーしています．</div></div><div class="message" id="message-1570361645.037900"><div class="message__timestamp">2019-10-06<br/>20:34:05 +0900</div><div class="message__header">igrep</div><div class="message__body">名前かぶりは最悪PackageImportsを使うと言うことでいいんじゃないっすかね。<br/>端から見るにそこまでするメリットがあるの、という気もしますが。<br/>でもPackageImports使うことを周知しておけばいいと思います。</div></div><div class="message" id="message-1570361885.038100"><div class="message__timestamp">2019-10-06<br/>20:38:05 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">ちなみにさっきあげた点についてはさっきまで気がついていませんでした．コンテスト終わった後にC++レベルにまで実行時間縮めて悦に入るのが趣味の人間の悪いところが出た感じかなあ．[追記] 気が付いていなかったというよりは，入力時間を数ms縮めることを目的にものを考えることになんの疑いも持っていなかった．[/追記]</div></div><div class="message" id="message-1570362494.038300"><div class="message__timestamp">2019-10-06<br/>20:48:14 +0900</div><div class="message__header">wado</div><div class="message__body"><blockquote>名前かぶりは最悪PackageImportsを使うと言うことでいいんじゃないっすかね。</blockquote><br/>方法論としては可能ですが、あまり得策ではない気がしています。<br/>AtCoder にそのような注意点を書ける場所があれば良いのかもしれませんが、現状そうなっていないためコンテスト参加者への周知が難しいと思います。<br/><br/><blockquote>端から見るにそこまでするメリットがあるの、という気もしますが。</blockquote><br/>僕も同じ意見です。(AtCoder の簡単な問題しか解いたことが無いので必要性に気づけていないだけなのかもしれませんが・・・)</div></div><div class="message" id="message-1570363066.038500"><div class="message__timestamp">2019-10-06<br/>20:57:46 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">O(入力サイズ)の高速化にしかならないのですから，もう別に入れなくてもいい感じはします．<br/><br/>＊ちなみに＊付言しておくと， <code>vector-bytestring</code> についてはそこまで気にしないでもいいという意見を持っています．というのも，正直， <code>vector-bytestring</code> には <code>bytestring-to-vector</code> に比べても全く使い道が見当たらないんですよね．<br/><br/> <code>bytestring-to-vector</code> は <code>ByteString</code> と Storable <code>Vector</code> の代数的データ型としての違いを単純に吸収するだけなので，データ型としての定義が変更されない限りメンテナンスの必要がありません．しかし，<br/><a href='https://stackoverflow.com/questions/24517995/why-bytestring-is-not-vector-word8'>https://stackoverflow.com/questions/24517995/why-bytestring-is-not-vector-word8</a><br/>を見るに， <code>bytestring</code> そのものの速度を得るには <code>bytestring</code> と同レベルの開発リソースが注がれる必要がありそうですが，メンテナンスは活発ではなさそうです．</div></div><div class="message" id="message-1570363549.038900"><div class="message__timestamp">2019-10-06<br/>21:05:49 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">ただ，逆にいうといきなり開発が活発になってStackageに <code>vector-bytestring</code> が導入されて <code>bytestring-to-vector</code> が除外されるレベルで <code>vector-bytestring</code> がポピュラーになるなんて未来もないではない(本当に？)し，最悪遊びがしたければdata型の書き換えを手でやっても良いんですよね．</div></div><div class="message" id="message-1570367030.045900"><div class="message__timestamp">2019-10-06<br/>22:03:50 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">なんか、こう、 <code>VU.unfoldrN n BS.uncons</code> と書くたびに生じる「無駄なコピーをしているときの強迫的な罪悪感」みたいなもの、から離れて競技に対する集中力を取り戻したい、みたいな動機が近い気がするので、正直、時間が経てば経つほどこのパッケージを強く推すのには躊躇が生まれてきてしまっています。</div></div><div class="message" id="message-1570782440.000200"><div class="message__timestamp">2019-10-11<br/>17:27:20 +0900</div><div class="message__header">a0</div><div class="message__body">@a0 has joined the channel</div></div><div class="message" id="message-1572319139.003600"><div class="message__timestamp">2019-10-29<br/>12:18:59 +0900</div><div class="message__header">wado</div><div class="message__body">言語アップデートの作業が始まったみたいです。(作業シートが追加された)<br/><a href='https://docs.google.com/spreadsheets/d/1PmsqufkF3wjKN6g1L0STS80yP4a6u-VdGiEv5uOHe0M/edit#gid=0'>https://docs.google.com/spreadsheets/d/1PmsqufkF3wjKN6g1L0STS80yP4a6u-VdGiEv5uOHe0M/edit#gid=0</a></div></div><div class="message" id="message-1573351694.004300"><div class="message__timestamp">2019-11-10<br/>11:08:14 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">提案者も乗り気ではなくなっているし，賛同者もいないし，作業が開始した後に書き換えをするのはよほどのことがないとよくない気がするので， <code>bytestring-to-vector</code> のpull requestをcloseしようと思っているのですが，大丈夫ですよね？</div></div><div class="message" id="message-1573477177.004800"><div class="message__timestamp">2019-11-11<br/>21:59:37 +0900</div><div class="message__header">wado</div><div class="message__body">了解しました。スプレッドシートの編集自体は作業が完了していなければ大丈夫？っぽい感じがします。(ちょくださいさんのツイート等から推測)<br/><a href='https://twitter.com/chokudai/status/1192261237049946112'>https://twitter.com/chokudai/status/1192261237049946112</a></div></div><div class="message" id="message-1573480326.007300"><div class="message__timestamp">2019-11-11<br/>22:52:06 +0900</div><div class="message__header">gettaplacetogo</div><div class="message__body">オッケーです、closeします。それはそれとして、私も先ほど行った会話で、まだ一応書き換えが許されてそうな感じは受けました。<br/><a href='https://twitter.com/fine_sugar_hill/status/1193876967918948352?s=21'>https://twitter.com/fine_sugar_hill/status/1193876967918948352?s=21</a><br/><a href='https://twitter.com/chokudai/status/1193883647889137665?s=12'>https://twitter.com/chokudai/status/1193883647889137665?s=12</a></div></div><div class="message" id="message-1573480433.007600"><div class="message__timestamp">2019-11-11<br/>22:53:53 +0900</div><div class="message__header">wado</div><div class="message__body">そうなんですね！情報ありがとうございます！<br/>近々もう一度手元でインストール方法を最終確認する予定なので、手順に変更があったら修正しておきます。</div></div></div><div class="pager"><a href="../../html/CL3AXB1AL/2.html" class="pager__previous">Previous</a><a href="../../" class="pager__top">Top</a></div></body></html>