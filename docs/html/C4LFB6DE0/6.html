<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / general #6</title><link rel="stylesheet" href="/slack-log/messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / general #6</h1><div class="pager"><a href="/slack-log/html/C4LFB6DE0/5.html" class="pager__previous">Previous</a><a href="/slack-log/" class="pager__top">Top</a><a href="/slack-log/html/C4LFB6DE0/7.html" class="pager__next">Next</a></div><div class="message_list"><div class="message" id="message-1522125920.000030"><div class="message__timestamp">2018-03-27<br/>13:45:20 +0900</div><div class="message__header">igrep</div><div class="message__body">@igrep pinned a message to this channel.</div></div><div class="message" id="message-1522125939.000056"><div class="message__timestamp">2018-03-27<br/>13:45:39 +0900</div><div class="message__header">igrep</div><div class="message__body">回答期間は、約2週間後の4月11日 08:00までです。<br/>（すみません、一度公開してからでは自動で回答締め切りするのが難しそうなのでやっぱり自分でOFFにできる時間帯にします）</div></div><div class="message" id="message-1522219353.000094"><div class="message__timestamp">2018-03-28<br/>15:42:33 +0900</div><div class="message__header">yuuki.1226.saito</div><div class="message__body">@yuuki.1226.saito has joined the channel</div></div><div class="message" id="message-1522236925.000211"><div class="message__timestamp">2018-03-28<br/>20:35:25 +0900</div><div class="message__header">andes</div><div class="message__body">@andes has joined the channel</div></div><div class="message" id="message-1522254156.000540"><div class="message__timestamp">2018-03-29<br/>01:22:36 +0900</div><div class="message__header">agenda21st_slack</div><div class="message__body">@agenda21st_slack has joined the channel</div></div><div class="message" id="message-1522385863.000144"><div class="message__timestamp">2018-03-30<br/>13:57:43 +0900</div><div class="message__header">andes</div><div class="message__body">趣味で、HaskellでFXのシストレを作ってます。よろしくお願いします。</div></div><div class="message" id="message-1522388682.000195"><div class="message__timestamp">2018-03-30<br/>14:44:42 +0900</div><div class="message__header">rustofau</div><div class="message__body">@rustofau has joined the channel</div></div><div class="message" id="message-1522427371.000182"><div class="message__timestamp">2018-03-31<br/>01:29:31 +0900</div><div class="message__header">shohei.takaichi</div><div class="message__body">@shohei.takaichi has joined the channel</div></div><div class="message" id="message-1522587605.000073"><div class="message__timestamp">2018-04-01<br/>22:00:05 +0900</div><div class="message__header">mail</div><div class="message__body">@mail has joined the channel</div></div><div class="message" id="message-1522587681.000135"><div class="message__timestamp">2018-04-01<br/>22:01:21 +0900</div><div class="message__header">mail</div><div class="message__body">hi, are there any Japanese Haskell users with Windows around that could try<br/><pre>
import GHC.IO.Encoding
getForeignEncoding
</pre><br/>for me and tell me what it outputs? I'm trying to fix a bug in Haskell's rocksdb bindings</div></div><div class="message" id="message-1522622371.000031"><div class="message__timestamp">2018-04-02<br/>07:39:31 +0900</div><div class="message__header">igrep</div><div class="message__body">From my console:<br/><br/><pre>
λ stack exec ghci
GHCi, version 8.2.2: <http://www.haskell.org/ghc/>  :? for help
Loaded GHCi configuration from C:\Users\igrep\Dropbox\dot-files\dot-files\.ghci
[Prelude]
&gt; import GHC.IO.Encoding
[Prelude GHC.IO.Encoding]
&gt; getForeignEncoding
CP932
</pre></div></div><div class="message" id="message-1522630817.000263"><div class="message__timestamp">2018-04-02<br/>10:00:17 +0900</div><div class="message__header">slackbot</div><div class="message__body">Reminder: <a href='https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233'>https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233</a></div></div><div class="message" id="message-1522660125.000016"><div class="message__timestamp">2018-04-02<br/>18:08:45 +0900</div><div class="message__header">service</div><div class="message__body">@service has joined the channel</div></div><div class="message" id="message-1522764016.000965"><div class="message__timestamp">2018-04-03<br/>23:00:16 +0900</div><div class="message__header">mail</div><div class="message__body">@igrep Thanks a lot. How did you get this setting? Is it what happens when you install a Japanese Windows edition (and which version?), or after changing it from an English install? I'm trying to set my system so I also get <code>CP932</code></div></div><div class="message" id="message-1522767589.000645"><div class="message__timestamp">2018-04-03<br/>23:59:49 +0900</div><div class="message__header">yharuhi39</div><div class="message__body">What it outputs, is really depending on the code page which the command prompt (or powershell) uses, by default Windows Japanese edition set it to CP932. If you get other than this, you need to change it to CP932 by calling <code>chcp 932</code> before running haskell or (I believe) you can use Japanese edition.</div></div><div class="message" id="message-1522777561.000306"><div class="message__timestamp">2018-04-04<br/>02:46:01 +0900</div><div class="message__header">mail</div><div class="message__body">Yes, that makes sense. I'm just asking because I want to test my changes on as realistic a Japanese system as I can get (to reproduce the bug found by users reported to run on Japanese Windows), and I'm not sure if just the <code>chcp 932</code> is enough.</div></div><div class="message" id="message-1522777582.000032"><div class="message__timestamp">2018-04-04<br/>02:46:22 +0900</div><div class="message__header">mail</div><div class="message__body">The setting sets set this default seems to be <a href='https://knowledgebase.progress.com/articles/Article/4677'>https://knowledgebase.progress.com/articles/Article/4677</a>:</div></div><div class="message" id="message-1522777611.000834"><div class="message__timestamp">2018-04-04<br/>02:46:51 +0900</div><div class="message__header">mail</div><div class="message__body"><blockquote>Open Windows Control Panel<br/>Select Region and Language<br/>Click on the Administrative tab<br/>Under Language for non-Unicode programs, click on Change System Locale</blockquote></div></div><div class="message" id="message-1522777744.000051"><div class="message__timestamp">2018-04-04<br/>02:49:04 +0900</div><div class="message__header">mail</div><div class="message__body">I set this to <code>Japanese (Japan)</code> and after a reboot I got <code>CP932</code> in the ghci</div></div><div class="message" id="message-1522785858.000377"><div class="message__timestamp">2018-04-04<br/>05:04:18 +0900</div><div class="message__header">yharuhi39</div><div class="message__body">If the bug (maybe) rely on the result of <code>getForeignEncoding</code> then, I think <code>chcp 932</code> is just enough, since if we put <code>chcp 65001</code> and then run <code>getForeignEncoding</code>, it outputs <code>UTF-8</code>, as we intended the result to be.</div></div><div class="message" id="message-1522796298.000293"><div class="message__timestamp">2018-04-04<br/>07:58:18 +0900</div><div class="message__header">igrep</div><div class="message__body">I agree with りんご姫. If the error is related to character encoding, <code>chcp 65001</code> or <code>chcp 20127</code> is usually a sufficient workaround.</div></div><div class="message" id="message-1522796499.000273"><div class="message__timestamp">2018-04-04<br/>08:01:39 +0900</div><div class="message__header">igrep</div><div class="message__body">If your error is similar to one referred in <a href='https://haskell.jp/blog/posts/2017/windows-gotchas.html'>https://haskell.jp/blog/posts/2017/windows-gotchas.html</a>, codes in the article would help you.<br/>(Sorry, this is not translated into English yet...)</div></div><div class="message" id="message-1522801141.000091"><div class="message__timestamp">2018-04-04<br/>09:19:01 +0900</div><div class="message__header">igrep</div><div class="message__body">こちらですが残り一週間を切りました。大分集まったようですがまだまだ投票は受け付けているので是非！ hask(_ _)eller<br/><https://docs.google.com/forms/d/e/1FAIpQLSdBR3hal7RdXnF2BML3qXCyEUnA7NoZ00dLY4_y4CLtikfTtQ/viewform><br/><https://haskell-jp.slack.com/archives/C4LFB6DE0/p1522125865000004></div></div><div class="message" id="message-1522905385.000029"><div class="message__timestamp">2018-04-05<br/>14:16:25 +0900</div><div class="message__header">s.hayashi.py</div><div class="message__body">@s.hayashi.py has joined the channel</div></div><div class="message" id="message-1522905651.000233"><div class="message__timestamp">2018-04-05<br/>14:20:51 +0900</div><div class="message__header">s.hayashi.py</div><div class="message__body">はじめまして、普段はwebアプリをつくるため、pythonやらjavaを書いています。Haskellに最近興味がわいて学習しています。<br/>初心者ですがよろしくお願いいたします。</div></div><div class="message" id="message-1522921848.000027"><div class="message__timestamp">2018-04-05<br/>18:50:48 +0900</div><div class="message__header">pan.live</div><div class="message__body">@pan.live has joined the channel</div></div><div class="message" id="message-1523235626.000247"><div class="message__timestamp">2018-04-09<br/>10:00:26 +0900</div><div class="message__header">slackbot</div><div class="message__body">Reminder: <a href='https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233'>https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233</a></div></div><div class="message" id="message-1523274471.000230"><div class="message__timestamp">2018-04-09<br/>20:47:51 +0900</div><div class="message__header">htilcs1115</div><div class="message__body">@htilcs1115 has joined the channel</div></div><div class="message" id="message-1523314442.000297"><div class="message__timestamp">2018-04-10<br/>07:54:02 +0900</div><div class="message__header">mail</div><div class="message__body">@igrep @yharuhi39 thanks a lot!<br/>Also your linked article seems to be very relevant to me right now.<br/>Can you tell me, does ghc itself usually work when working under the Japenese locale?<br/>For me, when I run <code>stack exec -- ghc --version</code> with the locale set to Japanese, I get<br/><pre>
C:\Users\
ghc-pkg.EXE: &lt;stdout&gt;: commitBuffer: invalid argument (invalid character)
</pre><br/>Is that the same for you?</div></div><div class="message" id="message-1523314884.000383"><div class="message__timestamp">2018-04-10<br/>08:01:24 +0900</div><div class="message__header">igrep</div><div class="message__body">GHC should work under the Japanese locale usually...<br/><pre>
&gt; stack exec ghc -- --version
The Glorious Glasgow Haskell Compilation System, version 8.2.2
</pre><br/>Hmmm...  You might have got a bug of GHC...?:confused:</div></div><div class="message" id="message-1523315035.000271"><div class="message__timestamp">2018-04-10<br/>08:03:55 +0900</div><div class="message__header">mail</div><div class="message__body">@igrep I'm also not sure what's going on, I just installed it with the stack installer <a href='https://www.stackage.org/stack/windows-x86_64-installer'>https://www.stackage.org/stack/windows-x86_64-installer</a></div></div><div class="message" id="message-1523315102.000363"><div class="message__timestamp">2018-04-10<br/>08:05:02 +0900</div><div class="message__header">mail</div><div class="message__body">@igrep just to double check, for me it fails when I have both the Japanese locale and a Japanese user name, do you think this combination should work?</div></div><div class="message" id="message-1523315121.000339"><div class="message__timestamp">2018-04-10<br/>08:05:21 +0900</div><div class="message__header">mail</div><div class="message__body">because that funny newline split is exactly where the user name should be</div></div><div class="message" id="message-1523315206.000091"><div class="message__timestamp">2018-04-10<br/>08:06:46 +0900</div><div class="message__header">igrep</div><div class="message__body">@mail Oh, yeah, it can be related.<br/>Because GHC installed via stack is usually installed under <code>%LOCALAPPDATA%</code>.<br/>E.g.<br/><pre>
&gt; stack exec which ghc
/c/Users/Yuji/AppData/Local/Programs/stack/x86_64-windows/ghc-8.2.2/bin/ghc
</pre></div></div><div class="message" id="message-1523315283.000361"><div class="message__timestamp">2018-04-10<br/>08:08:03 +0900</div><div class="message__header">igrep</div><div class="message__body">We know we should avoid making <code>%USERPROFILE%</code> contain Japanese name, which causes some errors.</div></div><div class="message" id="message-1523316291.000026"><div class="message__timestamp">2018-04-10<br/>08:24:51 +0900</div><div class="message__header">mail</div><div class="message__body">@igrep Is that also written down / documented somewhere? I would like to know more about it, maybe I can even fix it</div></div><div class="message" id="message-1523316390.000196"><div class="message__timestamp">2018-04-10<br/>08:26:30 +0900</div><div class="message__header">igrep</div><div class="message__body">Hmmm... Sorry, I don't know the detail. Maybe we're too accustomed to avoid Japanese characters before fixing it... :disappointed_relieved:</div></div><div class="message" id="message-1523316853.000032"><div class="message__timestamp">2018-04-10<br/>08:34:13 +0900</div><div class="message__header">igrep</div><div class="message__body">第1回Haskell-jpロゴ選挙、投票期間が残り24時間を切りました。<br/>まだ投票していないという方はお急ぎください！<br/><a href='https://docs.google.com/forms/d/e/1FAIpQLSdBR3hal7RdXnF2BML3qXCyEUnA7NoZ00dLY4_y4CLtikfTtQ/viewform'>https://docs.google.com/forms/d/e/1FAIpQLSdBR3hal7RdXnF2BML3qXCyEUnA7NoZ00dLY4_y4CLtikfTtQ/viewform</a></div></div><div class="message" id="message-1523317058.000082"><div class="message__timestamp">2018-04-10<br/>08:37:38 +0900</div><div class="message__header">mail</div><div class="message__body">@igrep no worries, knowing that this is a known problem already helps a lot, so I know it isn't a fault of my setup</div></div><div class="message" id="message-1523320312.000273"><div class="message__timestamp">2018-04-10<br/>09:31:52 +0900</div><div class="message__header">h.hata.ai.t</div><div class="message__body">@h.hata.ai.t has joined the channel</div></div><div class="message" id="message-1523320413.000242"><div class="message__timestamp">2018-04-10<br/>09:33:33 +0900</div><div class="message__header">h.hata.ai.t</div><div class="message__body">こんにちは、はじめましてXmonadからHaskellに入ってきました、よろしくお願いします :pray:</div></div><div class="message" id="message-1523401859.000342"><div class="message__timestamp">2018-04-11<br/>08:10:59 +0900</div><div class="message__header">igrep</div><div class="message__body">@igrep uploaded a file: <a href='https://haskell-jp.slack.com/files/U4LGTMTMK/FA5EW3WG6/___1____haskell_jp_______________________.png'>第1回 Haskell jp 新ロゴ選挙 結果.png</a> and commented: <a href='!here'>!here</a> 第１回Haskell-jp 新ロゴ選挙、投票受付を完了しました。<br/>次のような結果になりました！<br/>A案に決定です！作成した @fumievalさんありがとうございました！</div></div><div class="message" id="message-1523402426.000095"><div class="message__timestamp">2018-04-11<br/>08:20:26 +0900</div><div class="message__header">&lt;non-user&gt;</div><div class="message__body">@igrep commented on @igrep’s file <a href='https://haskell-jp.slack.com/files/U4LGTMTMK/FA5EW3WG6/___1____haskell_jp_______________________.png'>第1回 Haskell jp 新ロゴ選挙 結果.png</a>: 念のため補足すると、A案とは<br/><a href='https://trello-attachments.s3.amazonaws.com/58ce7624b280ea1d77ac7376/58de0d81f11881e259fa9f48/97d66bb2f7e5e08eaeaef19ec91e7847/haskell-jp.png'>https://trello-attachments.s3.amazonaws.com/58ce7624b280ea1d77ac7376/58de0d81f11881e259fa9f48/97d66bb2f7e5e08eaeaef19ec91e7847/haskell-jp.png</a><br/>のことです。</div></div><div class="message" id="message-1523484436.000042"><div class="message__timestamp">2018-04-12<br/>07:07:16 +0900</div><div class="message__header">katsushi.kagaya</div><div class="message__body">@katsushi.kagaya has joined the channel</div></div><div class="message" id="message-1523494133.000123"><div class="message__timestamp">2018-04-12<br/>09:48:53 +0900</div><div class="message__header">zeroinon1206bass</div><div class="message__body">@zeroinon1206bass has joined the channel</div></div><div class="message" id="message-1523498268.000015"><div class="message__timestamp">2018-04-12<br/>10:57:48 +0900</div><div class="message__header">maeken2010</div><div class="message__body">@maeken2010 has joined the channel</div></div><div class="message" id="message-1523498649.000138"><div class="message__timestamp">2018-04-12<br/>11:04:09 +0900</div><div class="message__header">kawarusosu</div><div class="message__body">@kawarusosu has joined the channel</div></div><div class="message" id="message-1523498757.000172"><div class="message__timestamp">2018-04-12<br/>11:05:57 +0900</div><div class="message__header">kawarusosu</div><div class="message__body">Haskell大好きな高校生です。よろしくお願いします！</div></div><div class="message" id="message-1523534438.000443"><div class="message__timestamp">2018-04-12<br/>21:00:38 +0900</div><div class="message__header">hansel.no.kioku</div><div class="message__body">@hansel.no.kioku has joined the channel</div></div><div class="message" id="message-1523537264.000315"><div class="message__timestamp">2018-04-12<br/>21:47:44 +0900</div><div class="message__header">akirakawata1</div><div class="message__body">@akirakawata1 has joined the channel</div></div></div><div class="pager"><a href="/slack-log/html/C4LFB6DE0/5.html" class="pager__previous">Previous</a><a href="/slack-log/" class="pager__top">Top</a><a href="/slack-log/html/C4LFB6DE0/7.html" class="pager__next">Next</a></div></body></html>