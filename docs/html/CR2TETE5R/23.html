<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / beginners #23</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / beginners #23</h1>
    <div class="ui pagination menu">
      <a href="../../html/CR2TETE5R/22.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1674891407.139569">
        <div class="content">
          <div class="summary">
            <div class="user">HN</div>
            <div class="date"><a class="date" href="#message-1674891407.139569">2023-01-28 16:36:47 +0900</a></div>
          </div>
          <div class="description">@HN has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675173537.884209">
        <div class="content">
          <div class="summary">
            <div class="user">まど</div>
            <div class="date"><a class="date" href="#message-1675173537.884209">2023-01-31 22:58:57 +0900</a></div>
          </div>
          <div class="description">@まど has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675174780.764359">
        <div class="content">
          <div class="summary">
            <div class="user">ai-ou</div>
            <div class="date"><a class="date" href="#message-1675174780.764359">2023-01-31 23:19:40 +0900</a></div>
          </div>
          <div class="description">@ai-ou has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675217825.168639">
        <div class="content">
          <div class="summary">
            <div class="user">yoshitsugu</div>
            <div class="date"><a class="date" href="#message-1675217825.168639">2023-02-01 11:17:05 +0900</a></div>
          </div>
          <div class="description">@yoshitsugu has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675217825.168639">
        <div class="content">
          <div class="summary">
            <div class="user">yoshitsugu</div>
            <div class="date"><a class="date" href="#message-1675217825.168639">2023-02-01 11:17:05 +0900</a></div>
          </div>
          <div class="description">@yoshitsugu has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1676140328.163949">
        <div class="content">
          <div class="summary">
            <div class="user">mocamocaland</div>
            <div class="date"><a class="date" href="#message-1676140328.163949">2023-02-12 03:32:08 +0900</a></div>
          </div>
          <div class="description">@mocamocaland has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1676196208.507679">
        <div class="content">
          <div class="summary">
            <div class="user">h r</div>
            <div class="date"><a class="date" href="#message-1676196208.507679">2023-02-12 19:03:28 +0900</a></div>
          </div>
          <div class="description">@h r has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1677690079.961519">
        <div class="content">
          <div class="summary">
            <div class="user">Greg Fragin</div>
            <div class="date"><a class="date" href="#message-1677690079.961519">2023-03-02 02:01:19 +0900</a></div>
          </div>
          <div class="description">@Greg Fragin has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1678377424.030769">
        <div class="content">
          <div class="summary">
            <div class="user">フラワー</div>
            <div class="date"><a class="date" href="#message-1678377424.030769">2023-03-10 00:57:04 +0900</a></div>
          </div>
          <div class="description">@フラワー has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1678767625.804149">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1678767625.804149">2023-03-14 13:20:25 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1679039675.001459">
        <div class="content">
          <div class="summary">
            <div class="user">kudos3939</div>
            <div class="date"><a class="date" href="#message-1679039675.001459">2023-03-17 16:54:35 +0900</a></div>
          </div>
          <div class="description">@kudos3939 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1679400115.927789">
        <div class="content">
          <div class="summary">
            <div class="user">西澤秀樹</div>
            <div class="date"><a class="date" href="#message-1679400115.927789">2023-03-21 21:01:55 +0900</a></div>
          </div>
          <div class="description">@西澤秀樹 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1679925721.714839">
        <div class="content">
          <div class="summary">
            <div class="user">Hisawo TAKASE</div>
            <div class="date"><a class="date" href="#message-1679925721.714839">2023-03-27 23:02:01 +0900</a></div>
          </div>
          <div class="description">@Hisawo TAKASE has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1680134409.818339">
        <div class="content">
          <div class="summary">
            <div class="user">Slackbot</div>
            <div class="date"><a class="date" href="#message-1680134409.818339">2023-03-30 09:00:09 +0900</a></div>
          </div>
          <div class="description">Reminder: beginnersチャンネルは、新しい人がスムーズにHaskellに慣れるための質問を歓迎するチャンネルです。 Haskell-Beginners ML や IRCの#haskell-beginners  や RedditのMonthly Hask Anythingのような位置づけを意図しています。  beginnersチャンネルでの回答側は、以下の左側のような応答を厳禁とする運用です。 • それはくだらない質問だ → くだらない質問など無い • その質問は以前にもあった → 質問者はそんなこと知らない • Google検索せよ → 検索できないから質問している  beginnersチャンネルでは、例えば以下のレベルの質問から歓迎します。 • <code>:</code> とは何のことですか。 • タプルとは何ですか。 </div>
        </div>
      </div>
      <div class="event" id="message-1681055436.507129">
        <div class="content">
          <div class="summary">
            <div class="user">canalun</div>
            <div class="date"><a class="date" href="#message-1681055436.507129">2023-04-10 00:50:36 +0900</a></div>
          </div>
          <div class="description">こんばんは。学習のために色々な処理をfunctionalなアプローチで書いてみる中で浮かんだ疑問です。<br/><br/>手続き的な書き方は難しくないのに、functionalに書こうと思うと急に難度があがる処理があるように感じ始めています。<br/>当たり前のことなのですが、これは慣れるしかないのですよね……？<br/>自分には到底書けないよと思う処理も、関数型言語に慣れ親しむうちに処理が書けるようになっていくのでしょうか？:smiling_face_with_tear:<br/><br/>例えば`List.GroupBy`をあえて自分で実装するとなると、<br/>手続き型では「forループを回して、毎要素ペアを条件判定し、適宜新しい配列を作成したり既存の配列に追加したり」で済むところが、<br/>関数型では下記のように(*私にとっては*)難しい書き方になってしまいます。<br/><pre>myGroupBy :: (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [[a]]
myGroupBy p xs = foldl step [] xs
    where step ys x | null ys = (x:[]):ys
                    | p (head (last ys)) x = (init ys) ++ (((last ys) ++ (x:[])):[])
                    | otherwise = ys ++ ((x:[]):[])</pre><br/>自力では書けなかったので、<https://www.mkamimura.com/2013/02/haskell-datalistgroupby.html> を引用しています(正直、このコードにバグがあるかどうかも私には自信を持っては分かりません)。<br/>このような処理を書けるようになるためには、他言語の習得と同様に練習するしかないのですよね……！<br/><br/>すみません、とても当たり前のことしか言っていないのですが、難しさに圧倒されて思わず何かご意見を伺いたくなってしまい……:eyes:</div>
          <a class="link-to-replies" href="23/1681055436.507129.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1681100617.176789">
        <div class="content">
          <div class="summary">
            <div class="user">nobsun</div>
            <div class="date"><a class="date" href="#message-1681100617.176789">2023-04-10 13:23:37 +0900</a></div>
          </div>
          <div class="description">groupBy は foldr より unfoldr のほうがすっきりしますね。<br/><a href='https://scrapbox.io/Haskell-Misc/span%E3%81%AE%E5%B0%8F%E3%83%8D%E3%82%BF%EF%BC%88%E4%BD%BF%E3%81%84%E6%96%B9%E7%B7%A8%EF%BC%89'>https://scrapbox.io/Haskell-Misc/span%E3%81%AE%E5%B0%8F%E3%83%8D%E3%82%BF%EF%BC%88%E4%BD%BF%E3%81%84%E6%96%B9%E7%B7%A8%EF%BC%89</a></div>
        </div>
      </div>
      <div class="event" id="message-1681353081.736949">
        <div class="content">
          <div class="summary">
            <div class="user">ai-ou</div>
            <div class="date"><a class="date" href="#message-1681353081.736949">2023-04-13 11:31:21 +0900</a></div>
          </div>
          <div class="description">詳しい方教えてください。<br/><br/>引数の値を、複数の関数(Char -&gt; Bool) に適用して or をとることを考えています。<br/>最初にシンプルに考えて以下のようになりました。<br/><pre>import Data.Char
f x = or $ map ($ x) [isDigit, isLetter]

ghci&gt; f '1'
True</pre><br/>これをポイントフリー化しようと以下のように変更し<br/><pre>f x = or . flip map [isDigit, isLetter] $ ($ x)

ghci&gt; f '1'
True</pre><br/>ここまでは良かったのですが、最後に引数を消すことを考え<br/><br/><pre>f = or . flip map [isDigit, isLetter] . ($)

ghci&gt; :t f
f :: ((Char -&gt; Bool) -&gt; Bool) -&gt; Bool</pre><br/>このようにしたところ、これは期待している型と違ってしまいます。<br/><br/>うまく説明できているかわかりませんが、上記のような場合<br/>ポイントフリーな書き方は可能でしょうか ?</div>
          <a class="link-to-replies" href="23/1681353081.736949.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1681367761.317629">
        <div class="content">
          <div class="summary">
            <div class="user">光志賀</div>
            <div class="date"><a class="date" href="#message-1681367761.317629">2023-04-13 15:36:01 +0900</a></div>
          </div>
          <div class="description">@光志賀 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1681382954.057189">
        <div class="content">
          <div class="summary">
            <div class="user">nobsun</div>
            <div class="date"><a class="date" href="#message-1681382954.057189">2023-04-13 19:49:14 +0900</a></div>
          </div>
          <div class="description">関数型 (function type) の意味がなんとなく判ってくると自然にそういう発想になるかなと思います。<br/>「σ と τ が型ならばσ → τ も型である」つまり、関数はそれ自身で値をもつ一級の(計算)対象で、なにも特別なものではないということが腑におちるとよいかもしれません。ちょっと手前味噌ですが、2019年のHaskell dayのときの「お話」のスライドです。御笑覧ください。<br/><a href='https://github.com/nobsun/hday2019/blob/master/doc/ftype.pdf'>https://github.com/nobsun/hday2019/blob/master/doc/ftype.pdf</a></div>
        </div>
      </div>
      <div class="event" id="message-1681741820.164389">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1681741820.164389">2023-04-17 23:30:20 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1681791728.777879">
        <div class="content">
          <div class="summary">
            <div class="user">Keonhwa Ryu</div>
            <div class="date"><a class="date" href="#message-1681791728.777879">2023-04-18 13:22:08 +0900</a></div>
          </div>
          <div class="description">@Keonhwa Ryu has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1682068157.989739">
        <div class="content">
          <div class="summary">
            <div class="user">ai-ou</div>
            <div class="date"><a class="date" href="#message-1682068157.989739">2023-04-21 18:09:17 +0900</a></div>
          </div>
          <div class="description">(&gt;&gt;=) と (&gt;=&gt;) の違いについて<br/><br/>ChatGPT で教えてもらったところ<br/><blockquote>(&gt;&gt;=)はバインド演算子と呼ばれ、モナド値を取り、モナドの中の値を抽出し、それを次の関数に渡します。<br/>一方、(&gt;=&gt;)は関数合成演算子であり、モナドを扱う関数を合成するための演算子です。</blockquote>との事でした。<br/><br/>簡単に試してみたところ、以下のようなコードになったのですが<br/>違いは最初の関数 (f) の引数の渡し方くらいでした。<br/><br/>この二つの違いは、そのくらいの認識で問題ないでしょうか ?<br/><pre>import Control.Monad

f x = Just $ x + 1
g x = if x &gt; 0 then Just (x * 2) else Nothing
h x = Just $ "The number is " ++ show x

fgh    = f   &gt;=&gt; g &gt;=&gt; h
fgh' x = f x &gt;&gt;= g &gt;&gt;= h

main = do
  putStrLn $ show $ fgh  1
  putStrLn $ show $ fgh' 1</pre><br/></div>
          <a class="link-to-replies" href="23/1682068157.989739.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1682165305.160919">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1682165305.160919">2023-04-22 21:08:25 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1682743797.041699">
        <div class="content">
          <div class="summary">
            <div class="user">EtoAl</div>
            <div class="date"><a class="date" href="#message-1682743797.041699">2023-04-29 13:49:57 +0900</a></div>
          </div>
          <div class="description">@EtoAl has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1682852642.717049">
        <div class="content">
          <div class="summary">
            <div class="user">Archgen</div>
            <div class="date"><a class="date" href="#message-1682852642.717049">2023-04-30 20:04:02 +0900</a></div>
          </div>
          <div class="description">@Archgen has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1682951128.365409">
        <div class="content">
          <div class="summary">
            <div class="user">ai-ou</div>
            <div class="date"><a class="date" href="#message-1682951128.365409">2023-05-01 23:25:28 +0900</a></div>
          </div>
          <div class="description">分岐処理について教えて下さい<br/><br/>Maybe を使った場合<br/><pre>import Control.Monad

f :: String -&gt; Maybe String
f x = do
    guard (x == "MZ")

    return "SUCCESS"


main :: IO ()
main = do
    print $ f "MZ"
    print $ f "ELF"</pre><br/>このような形 (guard) で条件によって処理を中断ができます。<br/>しかし、それ以外の文脈の場合この方法は使えないと思います。<br/><br/>具体的には以下のようなプログラムを作っています。<br/><pre>import <http://System.IO|System.IO>
import System.Directory ( getCurrentDirectory )
import System.FilePath ( joinPath )

import qualified Data.ByteString.Lazy as B
import qualified Data.ByteString.Internal as BI ( w2c )
import Data.Binary.Get

getC :: Get Char
getC = BI.w2c &lt;$&gt; getWord8

readPE :: Get (Maybe String)
readPE = do
    isMZ &lt;- (== "MZ") &lt;$&gt; sequence [getC, getC]

    if isMZ then
        return $ Just "SUCCESS"
    else
        return Nothing

main :: IO ()
main = do
    xpath &lt;- joinPath . flip (:) ["src", "a.exe"] &lt;$&gt; getCurrentDirectory

    withBinaryFile xpath ReadMode $ \h -&gt; do
        dat &lt;- B.hGetContents h
        print $ runGet readPE dat

    print "done."</pre><br/>上記の <code>readPE</code> 関数の中で if による分岐を行っていますが<br/>もし、この後も条件による分岐が必要だった場合 if 文をネスト<br/>させていくような形で作るのが正しいのでしょうか ?</div>
          <a class="link-to-replies" href="23/1682951128.365409.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1683003502.792269">
        <div class="content">
          <div class="summary">
            <div class="user">tedzuka</div>
            <div class="date"><a class="date" href="#message-1683003502.792269">2023-05-02 13:58:22 +0900</a></div>
          </div>
          <div class="description">@tedzuka has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1683303647.855859">
        <div class="content">
          <div class="summary">
            <div class="user">ai-ou</div>
            <div class="date"><a class="date" href="#message-1683303647.855859">2023-05-06 01:20:47 +0900</a></div>
          </div>
          <div class="description">型の異なる値の計算について教えて下さい<br/><br/>以下の関数 f は a, b に対し fromIntegral を適用することで (+) の引数とできます。<br/><pre>import Data.Word
import Data.Function ( on )
import Control.Monad ( liftM2 )

f = do
    let a = pure 1 :: Maybe Word32
    let b = pure 2 :: Maybe Word64

    let a' = fromIntegral &lt;$&gt; a
    let b' = fromIntegral &lt;$&gt; b

    let c = (+) &lt;$&gt; a' &lt;*&gt; b'

    print c
---
ghci&gt; f
Just 3
it :: ()</pre><br/>これを <code>on</code> 関数を使って一気に適用すると a, b の型が異なるため不可能です。<br/><pre>g = do
    let a = pure 1 :: Maybe Word32
    let b = pure 2 :: Maybe Word64

    let c = on (liftM2 (+)) (fromIntegral &lt;$&gt;) a b

    print c
---
a.hs:23:50: error:
    • Couldn't match type 'Word64' with 'Word32'
      Expected: Maybe Word32
        Actual: Maybe Word64
    • In the fourth argument of 'on', namely 'b'
      In the expression: on (liftM2 (+)) (fromIntegral &lt;$&gt;) a b
      In an equation for 'c': c = on (liftM2 (+)) (fromIntegral &lt;$&gt;) a b
   |
23 |     let c = on (liftM2 (+)) (fromIntegral &lt;$&gt;) a b
   |   </pre><br/>このような場合、なにか上手に解決する方法はあるのでしょうか ?</div>
          <a class="link-to-replies" href="23/1683303647.855859.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1684068566.870359">
        <div class="content">
          <div class="summary">
            <div class="user">bbmallow</div>
            <div class="date"><a class="date" href="#message-1684068566.870359">2023-05-14 21:49:26 +0900</a></div>
          </div>
          <div class="description">@bbmallow has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1684521016.871239">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1684521016.871239">2023-05-20 03:30:16 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1685616849.406719">
        <div class="content">
          <div class="summary">
            <div class="user">Lefl</div>
            <div class="date"><a class="date" href="#message-1685616849.406719">2023-06-01 19:54:09 +0900</a></div>
          </div>
          <div class="description">@Lefl has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1685679030.360229">
        <div class="content">
          <div class="summary">
            <div class="user">Sakae</div>
            <div class="date"><a class="date" href="#message-1685679030.360229">2023-06-02 13:10:30 +0900</a></div>
          </div>
          <div class="description">@Sakae has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1685851209.772479">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1685851209.772479">2023-06-04 13:00:09 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1686335331.628809">
        <div class="content">
          <div class="summary">
            <div class="user">aja</div>
            <div class="date"><a class="date" href="#message-1686335331.628809">2023-06-10 03:28:51 +0900</a></div>
          </div>
          <div class="description">@aja has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1686494168.110519">
        <div class="content">
          <div class="summary">
            <div class="user">goma11</div>
            <div class="date"><a class="date" href="#message-1686494168.110519">2023-06-11 23:36:08 +0900</a></div>
          </div>
          <div class="description">@goma11 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1686989448.446709">
        <div class="content">
          <div class="summary">
            <div class="user">MaxBruchDev</div>
            <div class="date"><a class="date" href="#message-1686989448.446709">2023-06-17 17:10:48 +0900</a></div>
          </div>
          <div class="description">@MaxBruchDev has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1687245602.055509">
        <div class="content">
          <div class="summary">
            <div class="user">bunny_hopper isolated</div>
            <div class="date"><a class="date" href="#message-1687245602.055509">2023-06-20 16:20:02 +0900</a></div>
          </div>
          <div class="description">@bunny_hopper isolated has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1687392028.769649">
        <div class="content">
          <div class="summary">
            <div class="user">Slackbot</div>
            <div class="date"><a class="date" href="#message-1687392028.769649">2023-06-22 09:00:28 +0900</a></div>
          </div>
          <div class="description">Reminder: beginnersチャンネルは、新しい人がスムーズにHaskellに慣れるための質問を歓迎するチャンネルです。 Haskell-Beginners ML や IRCの#haskell-beginners  や RedditのMonthly Hask Anythingのような位置づけを意図しています。  beginnersチャンネルでの回答側は、以下の左側のような応答を厳禁とする運用です。 • それはくだらない質問だ → くだらない質問など無い • その質問は以前にもあった → 質問者はそんなこと知らない • Google検索せよ → 検索できないから質問している  beginnersチャンネルでは、例えば以下のレベルの質問から歓迎します。 • <code>:</code> とは何のことですか。 • タプルとは何ですか。 </div>
        </div>
      </div>
      <div class="event" id="message-1688347266.498129">
        <div class="content">
          <div class="summary">
            <div class="user">Shogo</div>
            <div class="date"><a class="date" href="#message-1688347266.498129">2023-07-03 10:21:06 +0900</a></div>
          </div>
          <div class="description">@Shogo has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1688395741.134189">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1688395741.134189">2023-07-03 23:49:01 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/CR2TETE5R/22.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
  </div>
</body>
</html>
