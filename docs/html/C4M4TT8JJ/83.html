<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / random #83</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / random #83</h1><div class="pager ui pagination menu"><a href="../../html/C4M4TT8JJ/82.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1603872045.092700"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date"><a class="date" href="#message-1603872045.092700">2020-10-28&nbsp;17:00:45 +0900</a></div></div><div class="message__body description"><a href='https://scrapbox.io/haskell-shoen/barbies-th'>https://scrapbox.io/haskell-shoen/barbies-th</a> barbies-thの新しいバージョン0.1.7をリリースしました。今まで扱いがあやふやだったderiving周りの変換を改善し、元のデータ型と等価なものが導出されるようになったため、既存のコードを歪めずに導入しやすくなりました。データ型の形状と実体を分離できるHKDは幅広い応用ができ、ボイラープレートを一掃できることも珍しくないので、その有用性がさらに評価されることを願っています</div></div></div><div class="message event" id="message-1603926590.094300"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603926590.094300">2020-10-29&nbsp;08:09:50 +0900</a></div></div><div class="message__body description">また物騒なタイトルだけどいい記事が出ましたね<br/><a href='https://www.snoyman.com/blog/2020/10/haskell-bad-parts-1'>https://www.snoyman.com/blog/2020/10/haskell-bad-parts-1</a></div></div></div><div class="message event" id="message-1603932309.097300"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1603932309.097300">2020-10-29&nbsp;09:45:09 +0900</a></div></div><div class="message__body description"><code>Data.Monoid.First</code> が deprecated になるよとドキュメントに書いてあったので代替方法などについて書きました<br/><a href='https://kakkun61.hatenablog.com/entry/2020/10/28/Data.Monoid.First_%E3%81%A8_Data.Semigroup.First_%E3%81%82%E3%82%8B%E3%81%84%E3%81%AF_Last'>https://kakkun61.hatenablog.com/entry/2020/10/28/Data.Monoid.First_%E3%81%A8_Data.Semigroup.First_%E3%81%82%E3%82%8B%E3%81%84%E3%81%AF_Last</a></div></div></div><div class="message event" id="message-1603932515.097500"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1603932515.097500">2020-10-29&nbsp;09:48:35 +0900</a></div></div><div class="message__body description">このdeprecationは撤回されたような記憶があります。</div></div></div><div class="message event" id="message-1603932631.097800"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1603932631.097800">2020-10-29&nbsp;09:50:31 +0900</a></div></div><div class="message__body description"><a href='https://gitlab.haskell.org/ghc/ghc/-/merge_requests/3154'>https://gitlab.haskell.org/ghc/ghc/-/merge_requests/3154</a></div></div></div><div class="message event" id="message-1603932644.098100"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1603932644.098100">2020-10-29&nbsp;09:50:44 +0900</a></div></div><div class="message__body description"><a href='https://mail.haskell.org/pipermail/libraries/2020-April/030357.html'>https://mail.haskell.org/pipermail/libraries/2020-April/030357.html</a></div></div></div><div class="message event" id="message-1603933077.098300"><div class="content"><div class="summary"><div class="message__header user">naohaq</div><div class="message__timestamp date"><a class="date" href="#message-1603933077.098300">2020-10-29&nbsp;09:57:57 +0900</a></div></div><div class="message__body description">(あまりよく知らない状態ですが)Firstでくるんだだけだと単位元が存在しないのでMonoid(単位元のあるSemigroup)にはなれない、ということですかね。</div></div></div><div class="message event" id="message-1603933392.098800"><div class="content"><div class="summary"><div class="message__header user">kazu</div><div class="message__timestamp date"><a class="date" href="#message-1603933392.098800">2020-10-29&nbsp;10:03:12 +0900</a></div></div><div class="message__body description">sumは何が悪くて、代わりに何を使うべきなのか、よく読み取れないんですが、分かりますか？</div></div></div><div class="message event" id="message-1603934350.099200"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603934350.099200">2020-10-29&nbsp;10:19:10 +0900</a></div></div><div class="message__body description">大抵の <code>Num</code> 型クラスのインスタンスは <code>+</code> の両辺を正格に評価すべきであるにも関わらず、`sum` などは事実上 <code>foldr (+)</code> 相当なので、最適化で特殊化されない限りサンクが増えてしまうよ、という主張だという認識です。<br/>代わりは <code>foldl' (+)</code> ではないかと。</div></div></div><div class="message event" id="message-1603934450.099500"><div class="content"><div class="summary"><div class="message__header user">kazu</div><div class="message__timestamp date"><a class="date" href="#message-1603934450.099500">2020-10-29&nbsp;10:20:50 +0900</a></div></div><div class="message__body description">あー、そうですね。sum' = fold' (+) が必要なのかも。</div></div></div><div class="message event" id="message-1603964587.099900"><div class="content"><div class="summary"><div class="message__header user">minorinoki_haskjp</div><div class="message__timestamp date"><a class="date" href="#message-1603964587.099900">2020-10-29&nbsp;18:43:07 +0900</a></div></div><div class="message__body description">First/Lastモノイドについては「Haskellerのためのモノイド完全ガイド」でも触れました（宣伝） <a href='https://blog.miz-ar.info/2019/02/monoid-for-haskellers/'>https://blog.miz-ar.info/2019/02/monoid-for-haskellers/</a></div></div></div><div class="message event" id="message-1603964960.100100"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1603964960.100100">2020-10-29&nbsp;18:49:20 +0900</a></div></div><div class="message__body description">mod_poppo さんのに書いてたっけなーと書く前に見直しました</div></div></div><div class="message event" id="message-1603965171.100300"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1603965171.100300">2020-10-29&nbsp;18:52:51 +0900</a></div></div><div class="message__body description">@naohaq <code>Data.Semigroup.First</code> は Monoid になれないと思います。<br/><code>Data.Monoid.First</code> は <code>Maybe</code> の性質を持ってて <code>Nothing</code> が単位元になってますね。</div></div></div><div class="message event" id="message-1603965891.100500"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1603965891.100500">2020-10-29&nbsp;19:04:51 +0900</a></div></div><div class="message__body description">Merge Request が Merge Bot にクローズされてるのはどういうステータスなんでしょうか？</div></div></div><div class="message event" id="message-1603966425.100700"><div class="content"><div class="summary"><div class="message__header user">minorinoki_haskjp</div><div class="message__timestamp date"><a class="date" href="#message-1603966425.100700">2020-10-29&nbsp;19:13:45 +0900</a></div></div><div class="message__body description">botのコメントの通り、マージされたのでは</div></div></div><div class="message event" id="message-1603968114.100900"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1603968114.100900">2020-10-29&nbsp;19:41:54 +0900</a></div></div><div class="message__body description">元投稿の主題から離れてきましたが、自分が GHC の MR や Git の運用が理解できていないみたいです</div></div></div><div class="message event" id="message-1603982326.102400"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603982326.102400">2020-10-29&nbsp;23:38:46 +0900</a></div></div><div class="message__body description">Haskellと圏論の関わりがいつからなのか気になって歴史を調べてみたら、各標準へのリンクをまとめているとてもステキなページを見つけました。<br/><a href='https://typeclasses.com/timeline'>https://typeclasses.com/timeline</a> :sugoi:</div></div></div><div class="message event" id="message-1603982384.102500"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603982384.102500">2020-10-29&nbsp;23:39:44 +0900</a></div></div><div class="message__body description">別のところで聞いてたんですけど、本当にHaskell 1.0ってIOが（どうやらMonadも）なかったんですねー！ :open_mouth:</div></div></div><div class="message event" id="message-1603982672.102700"><div class="content"><div class="summary"><div class="message__header user">lotz</div><div class="message__timestamp date"><a class="date" href="#message-1603982672.102700">2020-10-29&nbsp;23:44:32 +0900</a></div></div><div class="message__body description">これ超大作ですね :open_mouth:<br/>GHC 3.02 の位置が気になる…ｗ</div></div></div><div class="message event" id="message-1603982721.103000"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603982721.103000">2020-10-29&nbsp;23:45:21 +0900</a></div></div><div class="message__body description">Haskell Reportにばっかり気をとられて気づかなかった！</div></div></div><div class="message event" id="message-1603983986.108700"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603983986.108700">2020-10-30&nbsp;00:06:26 +0900</a></div></div><div class="message__body description">やっぱりざっと調べた限り、圏論っぽい名前のFunctorやMonadなどが標準に入ったのはHaskell 1.3からみたいですね。</div></div></div><div class="message event" id="message-1603984621.111300"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603984621.111300">2020-10-30&nbsp;00:17:01 +0900</a></div></div><div class="message__body description">興が乗ったので作った <a href='https://twitter.com/igrep/status/1321833162217975808'>https://twitter.com/igrep/status/1321833162217975808</a></div></div></div><div class="message event" id="message-1603984863.112100"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date"><a class="date" href="#message-1603984863.112100">2020-10-30&nbsp;00:21:03 +0900</a></div></div><div class="message__body description">高パフォーマンスかつwell-typedなシリアライズライブラリ、<http://hackage.haskell.org/package/winery|winery >の1.3.2を公開しました。<https://scrapbox.io/haskell-shoen/HKD|HKD>からExtractorを生成するbuildRecordExtractorが目玉で、たとえ大きなレコードであっても最小限のコードでカスタマイズできます。<br/><pre>extractor = fmap bstrip $ buildRecordExtractor bextractors
    { hoge = extractField "hoge" &lt;|&gt; extractField "oldHoge" }</pre><br/>また、直前の1.3.1では、《貧者のDerivingVia》と名付けた技法を用いたbundleViaという関数が追加され、DerivingViaのような使い心地でありながら必要に応じてメソッドを上書きすることもできます。<br/><pre>instance Serialise Foo where
  bundleSerialise = bundleVia WineryRecord
  extractor = buildExtractor ...</pre><br/>wineryはaesonよりも時間・空間効率に優れ、cerealと違って変更に強いので、Haskellのデータの永続化にきっと役に立つと思います</div></div></div><div class="message event" id="message-1603986187.112400"><div class="content"><div class="summary"><div class="message__header user">lotz</div><div class="message__timestamp date"><a class="date" href="#message-1603986187.112400">2020-10-30&nbsp;00:43:07 +0900</a></div></div><div class="message__body description">リンク見れないです:eyes:<br/><a href='https://gyazo.com/2643fd689c7f665b5b52d783fbb2f760'>https://gyazo.com/2643fd689c7f665b5b52d783fbb2f760</a></div></div></div><div class="message event" id="message-1603986319.112800"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1603986319.112800">2020-10-30&nbsp;00:45:19 +0900</a></div></div><div class="message__body description">ご指摘あざっす！修正しました！</div></div></div><div class="message event" id="message-1604017934.114600"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date"><a class="date" href="#message-1604017934.114600">2020-10-30&nbsp;09:32:14 +0900</a></div></div><div class="message__body description"><blockquote>やっぱりざっと調べた限り、圏論っぽい名前のFunctorやMonadなどが標準に入ったのはHaskell 1.3からみたいですね。</blockquote><br/>Haskell 1.2 までは、確かそもそも higher kind type に対するクラスが作れなくて、それが Monadic notions of computations が大きな動機となって 1.3 で緩和されたという話だった気がしますね。1.2 まではそもそもユーザ定義の Functor クラスも書けなかったはずです</div></div></div><div class="message event" id="message-1604024185.115600"><div class="content"><div class="summary"><div class="message__header user">s.uotani.zetakansu</div><div class="message__timestamp date"><a class="date" href="#message-1604024185.115600">2020-10-30&nbsp;11:16:25 +0900</a></div></div><div class="message__body description">@s.uotani.zetakansu has joined the channel</div></div></div><div class="message event" id="message-1604024833.115700"><div class="content"><div class="summary"><div class="message__header user">nobuyuki.tomizawa</div><div class="message__timestamp date"><a class="date" href="#message-1604024833.115700">2020-10-30&nbsp;11:27:13 +0900</a></div></div><div class="message__body description">学生の頃にこれを読んだのですが、このあと入ったのだとするとたしかにタイミング的には入っていなかったのかと思います。<br/><br/><br/><a href='https://www.microsoft.com/en-us/research/wp-content/uploads/1993/01/imperative.pdf'>https://www.microsoft.com/en-us/research/wp-content/uploads/1993/01/imperative.pdf</a></div></div></div><div class="message event" id="message-1604025177.115900"><div class="content"><div class="summary"><div class="message__header user">nobuyuki.tomizawa</div><div class="message__timestamp date"><a class="date" href="#message-1604025177.115900">2020-10-30&nbsp;11:32:57 +0900</a></div></div><div class="message__body description">でこれを読んだのは大学で他の部門の先生から、純関数型言語で入出力のうまい解決方法を考えてみるとか興味ない？と言われて、Goferで遊んだりしていたのですが、その当時ですと、CPS使うとかストリームの遅延束縛を使うとかしていて、これがまたなかなかユニークな感じ往生していました。</div></div></div><div class="message event" id="message-1604025294.116100"><div class="content"><div class="summary"><div class="message__header user">nobuyuki.tomizawa</div><div class="message__timestamp date"><a class="date" href="#message-1604025294.116100">2020-10-30&nbsp;11:34:54 +0900</a></div></div><div class="message__body description">多分そのころに、GHCがだいぶ広まったりしてきて、東大の武市先生？の周りでもいろいろ活動をし始めた頃で、monadの解説聞いた記憶があります。<br/><br/>'92-93ころでしょうか。</div></div></div><div class="message event" id="message-1604027107.116300"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date"><a class="date" href="#message-1604027107.116300">2020-10-30&nbsp;12:05:07 +0900</a></div></div><div class="message__body description">そうですね、dialogue から io monad に切り替わったのも Haskell 1.3 のタイミングなはずですね</div></div></div><div class="message event" id="message-1604168083.118600"><div class="content"><div class="summary"><div class="message__header user">boogie_of_lesfreres</div><div class="message__timestamp date"><a class="date" href="#message-1604168083.118600">2020-11-01&nbsp;03:14:43 +0900</a></div></div><div class="message__body description">@boogie_of_lesfreres has joined the channel</div></div></div><div class="message event" id="message-1604199494.119600"><div class="content"><div class="summary"><div class="message__header user">nobuyuki.tomizawa</div><div class="message__timestamp date"><a class="date" href="#message-1604199494.119600">2020-11-01&nbsp;11:58:14 +0900</a></div></div><div class="message__body description">今日だけ1299円みたいです。（実際に買うときはレートの関係？で若干変動します…経験者談）<br/><a href='https://www.apress.com/jp/book/9781484244791'>https://www.apress.com/jp/book/9781484244791</a></div></div></div><div class="message event" id="message-1604200157.119800"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date"><a class="date" href="#message-1604200157.119800">2020-11-01&nbsp;12:09:17 +0900</a></div></div><div class="message__body description">ブログに deprecation 撤回の旨追記しました</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/C4M4TT8JJ/82.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>