<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / atcoder-lang-updates #7</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / atcoder-lang-updates #7</h1>
    <div class="ui pagination menu">
      <a href="../../html/CL3AXB1AL/6.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
      <a href="../../html/CL3AXB1AL/8.html" class="item">Next</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1680152962.225539">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680152962.225539">2023-03-30 14:09:22 +0900</a></div>
          </div>
          <div class="description">追加提案，というか皆さまの意見を聞きたいです:<br/> <code>strict</code>  (<https://hackage.haskell.org/package/strict>): 基本的なデータ型 ( <code>Either</code> ,  <code>Maybe</code> , and pair from <code>base</code>,  <code>These</code> from <code>these</code> )のfield-strict version と baseに入ってる lazy IO の strict version を実装します． 元々transitive dependency に入ってて， <a href='https://haskell-jp.slack.com/archives/C014PGG641Z/p1678521681800639'>https://haskell-jp.slack.com/archives/C014PGG641Z/p1678521681800639</a> = <a href='https://haskell.jp/slack-log/html/C014PGG641Z/4.html#message-1678521681.800639'>https://haskell.jp/slack-log/html/C014PGG641Z/4.html#message-1678521681.800639</a> あたり見てもモチベーションはありそうな気がします．しかし，リンク先の会話の主題そのものはタプルなのですが，このパッケージの <code>Data.Strict.Tuple</code> はペア <code>Pair a b</code> しかサポートしてなくて，19項までのタプル( <code>T1</code> , <code>T2</code> , … , <code>T19</code> )をサポートしてる <code>strict-tuple</code>  (<https://hackage.haskell.org/package/strict-tuple>) はモジュール名が <code>Data.Tuple.Strict</code> でややこしい，というのがアレですね．</div>
        </div>
      </div>
      <div class="event" id="message-1680155886.899719">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1680155886.899719">2023-03-30 14:58:06 +0900</a></div>
          </div>
          <div class="description">話を複雑にするようで申し訳ないんですが、 <a href='http://h2.jaguarpaw.co.uk/posts/nested-strict-data/'>http://h2.jaguarpaw.co.uk/posts/nested-strict-data/</a> とかどうですか？<br/>多分 <a href='https://hackage.haskell.org/package/strict-wrapper-0.0.0.0'>https://hackage.haskell.org/package/strict-wrapper-0.0.0.0</a> がその実装のようです。</div>
        </div>
      </div>
      <div class="event" id="message-1680155928.276409">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1680155928.276409">2023-03-30 14:58:48 +0900</a></div>
          </div>
          <div class="description">引用頂いたスレッドの発言の時も本当はこれを挙げたかったんですけど、うまく探せなかったもので...</div>
        </div>
      </div>
      <div class="event" id="message-1680156325.696669">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156325.696669">2023-03-30 15:05:25 +0900</a></div>
          </div>
          <div class="description">あー，頭のいい実装だ．4項までのタプルしか実装がないのは残念ではありますが，結構便利そう．</div>
        </div>
      </div>
      <div class="event" id="message-1680156381.606969">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1680156381.606969">2023-03-30 15:06:21 +0900</a></div>
          </div>
          <div class="description">あまり利用もメンテも熱心にされてなさそうなのが惜しいんですけどね。すごくいいアイディアなのに。</div>
        </div>
      </div>
      <div class="event" id="message-1680156426.323509">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156426.323509">2023-03-30 15:07:06 +0900</a></div>
          </div>
          <div class="description">貫禄の Dependencies: <code>base &lt; 5</code></div>
        </div>
      </div>
      <div class="event" id="message-1680156692.120609">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156692.120609">2023-03-30 15:11:32 +0900</a></div>
          </div>
          <div class="description">こういうパッケージって「古く」はならなそうに見えるので入れるのにそんなにリスクはなさそうですが，無意味に入れると収拾がつかなくなりそうという理由だけで躊躇するところはあるんですよね…</div>
        </div>
      </div>
      <div class="event" id="message-1680156820.743719">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156820.743719">2023-03-30 15:13:40 +0900</a></div>
          </div>
          <div class="description">でも Haskell の競プロ提出コードなんて bang がついてない変数を思い浮かべるのが難しいくらいですし，あったら結構嬉しそうなんだよな…</div>
        </div>
      </div>
      <div class="event" id="message-1680231036.259809">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680231036.259809">2023-03-31 11:50:36 +0900</a></div>
          </div>
          <div class="description"><code>strict-wrappers</code> については， unsafe な関数が注釈なしに含まれているので導入を見合わせようかなと思います．<https://haskell.jp/slack-log/html/C5666B6BB/103.html#message-1680184874.825459> = <a href='https://haskell-jp.slack.com/archives/C5666B6BB/p1680184874825459'>https://haskell-jp.slack.com/archives/C5666B6BB/p1680184874825459</a> でのログをご確認くだされば幸いです．</div>
        </div>
      </div>
      <div class="event" id="message-1680233986.982779">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680233986.982779">2023-03-31 12:39:46 +0900</a></div>
          </div>
          <div class="description"><code>strict</code> の <code>Data.Strict.Tuple</code> は <code>Pair a b</code> しかないですが <code>x :!: y :!: z</code> のようにできるのでそこまで不便ではないかもしれません。<br/>オンラインジャッジ的な対応としては <code>containers</code> にある <code>Utils.Containers.Internal.StrictPair</code> を使うという手もありますが <code>Show</code> にすらなっていなくて不便ですね</div>
        </div>
      </div>
      <div class="event" id="message-1680237192.269909">
        <div class="content">
          <div class="summary">
            <div class="user">ほげやま</div>
            <div class="date"><a class="date" href="#message-1680237192.269909">2023-03-31 13:33:12 +0900</a></div>
          </div>
          <div class="description">@ほげやま has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1680266406.952249">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680266406.952249">2023-03-31 21:40:06 +0900</a></div>
          </div>
          <div class="description">あー、とすると <code>strict</code> はだいぶ良さそうですか。メモリ上のレイアウトまで気にするなら <code>strict-tuple</code> を更に追加で入れるのも一応選択肢にはならないことは…ないのか？</div>
        </div>
      </div>
      <div class="event" id="message-1680272951.343829">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680272951.343829">2023-03-31 23:29:11 +0900</a></div>
          </div>
          <div class="description">あ，忘れてた．最適化をまともにperf取らずに神に祈るのが好きな私みたいな軟弱者には，`strict-containers`  (<https://hackage.haskell.org/package/strict-containers-0.2|https://hackage.haskell.org/package/strict-containers-0.2>) のデータ型のフィールドまでstrict flagがついた containers (+unordered-containers) 実装とか見せられるとちょっと気になってしまいます。<br/><br/><pre>data X = X !Int !Double
data Y = Y Int Double</pre><br/>を考えたときに、 <code>case x_value of X !a !b -&gt; ...</code> は <code>a</code>, <code>b</code> が評価されているかを判定するコードが不要だが、<br/><code>case y_value of Y !a !b -&gt; ...</code> において <code>y_value</code> のフィールドがあらゆる評価パスで評価済みだとしても、実行時に評価済みかどうかを判定するコードが消せない可能性がある、みたいなことを耳にするので…</div>
        </div>
      </div>
      <div class="event" id="message-1680690476.770539">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680690476.770539">2023-04-05 19:27:56 +0900</a></div>
          </div>
          <div class="description">Language Test Contestが2nd freeze (3/28)版に更新されました！<br/><br/>期待通り，次のコードをコードテストに投げると <code>cabal.project.freeze</code> ファイルを取ってこれました:<br/><br/><pre>import <http://System.IO|System.IO>

main :: IO ()
main = putStr =&lt;&lt; readFile "/judge/submission/cabal.project.freeze"</pre><br/>結果は <a href='https://gist.github.com/gksato/b7d0b18e9ef8be5762fef8717737e27b#file-4-cabal-project-freeze'>https://gist.github.com/gksato/b7d0b18e9ef8be5762fef8717737e27b#file-4-cabal-project-freeze</a> です．<br/><br/>あと，全exposed modulesのインポート (<https://gist.github.com/gksato/b7d0b18e9ef8be5762fef8717737e27b#file-3-imports-hs>) を投げても実行が通ることも確認できました！<br/><br/>今の所，次のfreezeの時には，<br/>• <code>extra</code> : 1.7.12 -&gt; 1.7.13<br/>• <code>strict</code> を追加<br/>• インストールコマンドとコンパイルコマンドにおいて，workdirの仕様が不明だったために必要だった余計なコマンド群を除去(参照: <a href='https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1835616968&amp;range=H67:I68'>https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1835616968&amp;range=H67:I68</a>)<br/>を確定で実施するつもりでおり，<br/>• <code>strict-tuple</code> の追加<br/>• <code>strict-containers</code> の追加<br/>については保留中です．</div>
        </div>
      </div>
      <div class="event" id="message-1680713459.208939">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680713459.208939">2023-04-06 01:50:59 +0900</a></div>
          </div>
          <div class="description">GHCについてくるライブラリ群で現環境では使えるが新環境では使えない状態のものがあるので対応しておきたいです<br/><pre>import Data.Binary () -- binary
import Data.Time () -- time
import System.Directory () -- directory
import System.FilePath () -- filepath
import System.Posix () -- unix
import System.Process () -- process
import Text.PrettyPrint () -- pretty

main=pure()</pre><br/></div>
          <a class="link-to-replies" href="7/1680713459.208939.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680736340.027829">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680736340.027829">2023-04-06 08:12:20 +0900</a></div>
          </div>
          <div class="description">あーそれ，（競プロに関係あるかわかんなくて）入れるか迷ってたんですよね．入れる側に一票入ったので入れることにしましょう！</div>
        </div>
      </div>
      <div class="event" id="message-1680744242.989739">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680744242.989739">2023-04-06 10:24:02 +0900</a></div>
          </div>
          <div class="description">あと， GHC-bundled library で現環境で使えるけど新環境では使えない，というと <code>ghc-boot</code>, <code>ghc-boot-th</code>,  <code>hpc</code>,  <code>integer-gmp</code>,  <code>terminfo</code>, <code>ghc-prim</code> あたりもそうなはずですね．ここら辺も入れた方がいいでしょうか？<br/><br/>現環境は <code>cabal install --lib</code> を用いているので， GHC-bundled library (<https://gitlab.haskell.org/ghc/ghc/-/wikis/commentary/libraries/version-history> で確認できます)のうち，`cabal-install &lt;= 3.8.1.0` が <a href='https://hackage.haskell.org/package/cabal-install-3.8.1.0/docs/src/Distribution.Client.CmdInstall.html#globalPackages'>Distribution.Client.CmdInstall.globalPackages</a> 変数によって明示的に global package とみなしていたものは利用可能だったはずです．<br/><br/>ほかには，現環境では使用できない GHC-bundled package (一度も <code>cabal install --lib</code> を投げたことのない裸の <code>ghc</code> では使えるが，一度でも <code>cabal install --lib</code> を投げてしまうと top-level <code>ghc</code> から不可視になってしまうタイプのGHC-bundled package．`globalPackages` 変数に名前が挙がってないとそうなる)もありますが，そこら辺についてはどうしましょうか．</div>
        </div>
      </div>
      <div class="event" id="message-1680783614.872259">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680783614.872259">2023-04-06 21:20:14 +0900</a></div>
          </div>
          <div class="description">なるほど． Windows 環境下でないとビルドできない <code>Win32</code> を除き，<br/>• <code>Cabal</code><br/>• <code>Cabal-syntax</code><br/>• <code>binary</code><br/>• <code>directory</code><br/>• <code>filepath</code><br/>• <code>ghc</code> <br/>• <code>ghc-boot</code> <br/>• <code>ghc-boot-th</code><br/>• <code>ghc-compact</code><br/>• <code>ghc-heap</code><br/>• <code>ghc-prim</code><br/>• <code>ghci</code><br/>• <code>haskelline</code><br/>• <code>hpc</code><br/>• <code>integer-gmp</code><br/>• <code>libiserv</code><br/>• <code>pretty</code><br/>• <code>process</code><br/>• <code>stm</code><br/>• <code>terminfo</code><br/>• <code>time</code><br/>• <code>unix</code><br/>• <code>xhtml</code><br/>を全て追加する，ということですか． <code>ghc-compact</code> をただ追加するのもアレなので，<br/>• <code>compact</code><br/>を追加してもいいかもしれませんね．<br/><br/>さしあたって気にすべき点は，特に <code>ghc-prim</code> などの <code>ghc*</code> 系が GHC のバージョン間で安定したAPIを提供しそうに見えない，ということでしょうか．<br/><br/>細かい反論としては:<br/>• <code>ghc</code> とか <code>terminfo</code>  とか本当に要るの？  → 「本当に」要る要らないの線引きは難しいので，「GHC-bundled」という明確な線引きがあるのは良いこと<br/>• <code>ghc*</code> 系はHackageにアップロードされていないことが多い（ 「GHC-bundled version しか使えないからHackageからのダウンロードの需要がない以上，面倒だからいいよね〜」という理由なのかは知らない）ので，`cabal-plan license-report`  が自動でライセンスを拾ってこれないため，License report の Human-written caveat を手書きで追加執筆しなければならないのが面倒 → 頑張れ<br/>という点もありますが，ここら辺は簡単に再反論できるところですね．とくに「GHC-bundled」という明確な線引きがある，というのは結構な美点っぽいです．<br/><br/>みなさんのご意見もお聞きしたいので，よろしくお願いします．</div>
        </div>
      </div>
      <div class="event" id="message-1680837944.442169">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680837944.442169">2023-04-07 12:25:44 +0900</a></div>
          </div>
          <div class="description">transitive dependencies に入ってて，ちょっと便利そうなので，追加提案：<br/>• <code>indexed-traversable</code><br/>• <code>indexed-traversable-instances</code> <br/>あと， <code>lens</code> 系が入っているので，<br/>• <code>strict-containers-lens</code> (`strict-containers` を入れるなら)<br/>を追加提案しておきます．</div>
          <a class="link-to-replies" href="7/1680837944.442169.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680838999.208309">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680838999.208309">2023-04-07 12:43:19 +0900</a></div>
          </div>
          <div class="description">せっかく <code>attoparsec</code> と <code>parsec</code> が入っているなら <code>trifecta</code> と <code>megaparsec</code> を紛れ込ませたいという悪い欲望があります:sweat_smile:</div>
        </div>
      </div>
      <div class="event" id="message-1680839106.112889">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680839106.112889">2023-04-07 12:45:06 +0900</a></div>
          </div>
          <div class="description">あとは，ユーザー側に 「serverに提出されたコードだ」ということを条件に conditional compilation を許すためになんかの Cabal flag を定義してもいいのでは，ということになんとなく思い至りました．環境変数 <code>ATCODER = 1</code> だけだと Conditional compilation には不便なので．</div>
        </div>
      </div>
      <div class="event" id="message-1680847504.237249">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680847504.237249">2023-04-07 15:05:04 +0900</a></div>
          </div>
          <div class="description">transitive dependency の direct dependency への 格上げの追加提案:<br/>• <code>contravariant</code><br/>• <code>kan-extensions</code><br/>• <code>adjunctions</code><br/>• <code>bifunctors</code><br/>• <code>comonad</code><br/>• <code>distributive</code><br/>• <code>profunctors</code><br/>• <code>semigroupoids</code></div>
        </div>
      </div>
      <div class="event" id="message-1680850863.201929">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680850863.201929">2023-04-07 16:01:03 +0900</a></div>
          </div>
          <div class="description">忘れるところでした:<br/>• <code>strict-lens</code></div>
        </div>
      </div>
      <div class="event" id="message-1680878603.060549">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680878603.060549">2023-04-07 23:43:23 +0900</a></div>
          </div>
          <div class="description">滑り込みですが、 <code>trifecta</code> , <code>megaparsec</code> 等々を突っ込むのに賛成が得られるなら<br/>• <code>parser-combinators</code><br/>もあったほうが良さそう</div>
        </div>
      </div>
      <div class="event" id="message-1680879234.100049">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680879234.100049">2023-04-07 23:53:54 +0900</a></div>
          </div>
          <div class="description">前回のアップデートで外れていたこの2つは復活させたいです。漏れてるのにそもそも気づいてなかったが<br/>• scientific<br/>• split<br/>transitive dependencyに入っていてよく使われてる <code>tagged</code> も入れてもいいかもです</div>
        </div>
      </div>
      <div class="event" id="message-1680879469.610739">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680879469.610739">2023-04-07 23:57:49 +0900</a></div>
          </div>
          <div class="description">そう言えば， <code>strict</code> に <code>These</code> 入ってるんだから，<br/>• <code>these</code><br/>•  <code>these-lens</code> <br/>は入れないと整合性がないですね．</div>
        </div>
      </div>
      <div class="event" id="message-1680881517.727479">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680881517.727479">2023-04-08 00:31:57 +0900</a></div>
          </div>
          <div class="description">まとめます．現在結論が出てないものと出ているっぽいものをごた混ぜにして，現在提案されているパッケージは次の通りです．transitive dependency からの昇格については :arrow_heading_up: で示します：<br/><code>strict</code> 系:<br/>• :arrow_heading_up: <code>strict</code>  <br/>• :new: <code>strict-lens</code><br/>• :new: <code>strict-containers</code> (?)<br/>• :new: <code>strict-containers-lens</code> (?)<br/>• :new: <code>strict-tuple</code>  (?)<br/>パーサ系:<br/>• :new: <code>megaparsec</code> <br/>• :new: <code>trifecta</code><br/>• :new: <code>parser-combinators</code><br/>圏論系 (transitive dependency の昇格):<br/>• :arrow_heading_up: <code>contravariant</code><br/>• :arrow_heading_up: <code>kan-extensions</code><br/>• :arrow_heading_up: <code>adjunctions</code> <br/>• :arrow_heading_up: <code>bifunctors</code> <br/>• :arrow_heading_up: <code>comonad</code> <br/>• :arrow_heading_up: <code>distributive</code> <br/>• :arrow_heading_up: <code>profunctors</code> <br/>• :arrow_heading_up: <code>semigroupoids</code><br/>GHC-bundled packages:<br/>• :new: <code>Cabal</code><br/>• :new: <code>Cabal-syntax</code><br/>• :arrow_heading_up: <code>binary</code><br/>• :arrow_heading_up: <code>directory</code><br/>• :arrow_heading_up: <code>filepath</code><br/>• :new: <code>ghc</code><br/>• :new: <code>ghc-boot</code><br/>• :arrow_heading_up: <code>ghc-boot-th</code><br/>• :new: <code>ghc-compact</code><br/>• :new: <code>ghc-heap</code><br/>• :arrow_heading_up: <code>ghc-prim</code><br/>• :new: <code>ghci</code><br/>• :new: <code>haskelline</code> <br/>• :new: <code>hpc</code><br/>• :new: <code>integer-gmp</code> <br/>• :new: <code>libiserv</code><br/>• :arrow_heading_up: <code>pretty</code><br/>• :arrow_heading_up: <code>process</code><br/>• :arrow_heading_up: <code>stm</code><br/>• :new: <code>terminfo</code><br/>• :arrow_heading_up: <code>time</code><br/>• :arrow_heading_up: <code>unix</code><br/>• :new: <code>xhtml</code><br/>その他:<br/>• :arrow_heading_up: <code>these</code>  (cf. <code>strict</code>)<br/>• :new: <code>these-lens</code> <br/>• :arrow_heading_up: <code>scientific</code> (前々回の環境からの復活)<br/>• :arrow_heading_up: <code>split</code>  (前々回の環境からの復活)<br/>• :arrow_heading_up: <code>tagged</code> <br/>• :arrow_heading_up: <code>indexed-traversable</code><br/>• :arrow_heading_up: <code>indexed-traversable-instances</code><br/>パッケージ追加以外の提案:<br/>• Cabal flag <code>atcoder</code> を追加して有効化する</div>
          <a class="link-to-replies" href="7/1680881517.727479.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680882594.428769">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680882594.428769">2023-04-08 00:49:54 +0900</a></div>
          </div>
          <div class="description">strict-tuple, strict-containersはhackageでみるとあんまり使われてないのでちょっと不安があります。<br/>実際に使っていくのであれば入れてもいいかなという感じです</div>
          <a class="link-to-replies" href="7/1680882594.428769.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680911991.248749">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680911991.248749">2023-04-08 08:59:51 +0900</a></div>
          </div>
          <div class="description">theseのdocを読んでたんですけど、semialignとsemialign-indexedまで入れないと片手落ちだったりしますかね、これ……？ (取り敢えず追加提案の期限は過ぎてるので、明示的な賛同が出ない限りは提案はしません)</div>
          <a class="link-to-replies" href="7/1680911991.248749.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680914067.289309">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680914067.289309">2023-04-08 09:34:27 +0900</a></div>
          </div>
          <div class="description">圏論系ライブラリは <code>free</code> を入れ忘れてました。transitive dependencyとしては入ってはいるものです</div>
          <a class="link-to-replies" href="7/1680914067.289309.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680922590.107489">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680922590.107489">2023-04-08 11:56:30 +0900</a></div>
          </div>
          <div class="description"><code>witherable</code> を入れたいのを今思い出したけど，もうすぐテスト開始時間だし，transitive dependency にも入ってないし，やめといた方がいいかな…</div>
          <a class="link-to-replies" href="7/1680922590.107489.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680934717.456669">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680934717.456669">2023-04-08 15:18:37 +0900</a></div>
          </div>
          <div class="description">ここまでの議論で提示されたパッケージでテスト作業を開始します．いくつか変更があるのでご確認ください．</div>
        </div>
      </div>
      <div class="event" id="message-1680939307.908529">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680939307.908529">2023-04-08 16:35:07 +0900</a></div>
          </div>
          <div class="description"><code>libiserv</code> が <code>bytestring</code> の更新を拒絶する (installed version 以外の使用を許さない)ので除外します．結構なbugfixと速度改善が入ってるっぽいので bytestring 更新 を外すのは惜しい．</div>
        </div>
      </div>
      <div class="event" id="message-1680939575.001419">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680939575.001419">2023-04-08 16:39:35 +0900</a></div>
          </div>
          <div class="description"><code>ghci</code> も <code>bytestring</code> を拒絶したので除外しましたが，これ <code>ghc</code> 系が軒並み拒絶されそうですね…</div>
        </div>
      </div>
      <div class="event" id="message-1680940179.601149">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680940179.601149">2023-04-08 16:49:39 +0900</a></div>
          </div>
          <div class="description"><code>compact</code> 系がややこしいですね．これ， <code>ghc-compact</code> が Hackage上で dependency を upgrade されておらず <code>&lt;4.17</code> になっているから，~GHC git repo の 9.4.4 tag 上でちゃんと <code>&lt;4.18</code> になっているにもかかわらず~依存性解決に失敗する．その上 <code>compact-0.2.0.0</code>  の deps が <code>base &lt;4.16</code> なのは本当にわけがわからない！</div>
        </div>
      </div>
      <div class="event" id="message-1680940294.580299">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680940294.580299">2023-04-08 16:51:34 +0900</a></div>
          </div>
          <div class="description"><code>cabal build --only-dependencies</code> に <code>--upgrade-dependencies</code> をつけているので，これを除外するとどうにかなるかも知れませんが，今回は <code>compact</code> と <code>ghc-compact</code> はともに諦めます．後で Issue でも投げます．</div>
        </div>
      </div>
      <div class="event" id="message-1680940821.676839">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680940821.676839">2023-04-08 17:00:21 +0900</a></div>
          </div>
          <div class="description">今回諦めたパッケージ:<br/>• <code>compact</code><br/>• <code>ghc</code><br/>• <code>ghc-boot</code><br/>• <code>ghc-compact</code><br/>• <code>ghci</code><br/>• <code>libiserv</code><br/>dependency solver は取り敢えず通ったので，あとはビルド待ちです．</div>
        </div>
      </div>
      <div class="event" id="message-1680941450.522769">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680941450.522769">2023-04-08 17:10:50 +0900</a></div>
          </div>
          <div class="description">各パッケージに丁寧に lower bound をつけているので， <code>--upgrade-dependencies</code>  をやっぱり外すことにしました． <code>compact</code> はもちろん不可能ですが， <strike><code>ghc-compact</code> は回復できました．</strike></div>
          <a class="link-to-replies" href="7/1680941450.522769.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680951784.338169">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680951784.338169">2023-04-08 20:03:04 +0900</a></div>
          </div>
          <div class="description"><code>filepath-1.4.100.3</code> が <code>System.OSPath</code> を <code>Trustworthy</code> にしといてくれなかったので，こいつに <code>directory</code> を介して依存する <code>hpc</code> とincompatibleになってますね… <code>hpc</code> , なんか全module <code>Safe</code> なんですよ…</div>
        </div>
      </div>
      <div class="event" id="message-1680952478.992929">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680952478.992929">2023-04-08 20:14:38 +0900</a></div>
          </div>
          <div class="description">意見募集: <code>directory</code> を最新版 (`1.3.8.1`  ), <code>filepath</code> を <code>1.4.100.3</code> にする代わりに <code>hpc</code> を諦めるのと， <code>directory</code> を <code>1.3.7.1</code>, <code>filepath</code>  を <code>1.4.2.2</code> にして <code>hpc</code> を入れるのと，どっちが良いと思いますか？</div>
        </div>
      </div>
      <div class="event" id="message-1680952640.756449">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680952640.756449">2023-04-08 20:17:20 +0900</a></div>
          </div>
          <div class="description">ghc 9.4.4にバンドルされてるのが`directory-1.3.7.1`, <code>filepath-1.4.2.2</code> なので，最新バージョンを諦めてhpcを入れる方がいいかなと思います</div>
        </div>
      </div>
      <div class="event" id="message-1680952890.028239">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680952890.028239">2023-04-08 20:21:30 +0900</a></div>
          </div>
          <div class="description">そうかー… というか，`directory` はなんで pre-existing visible module を safe から unsafe に格下げしておいて minor bump なんだろう…</div>
        </div>
      </div>
      <div class="event" id="message-1680953103.667429">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680953103.667429">2023-04-08 20:25:03 +0900</a></div>
          </div>
          <div class="description">それはそれとして，すでに <code>bytestring</code> を (競プロ的により重要であろうという予断により) 優先して <code>ghc</code>, <code>ghc-boot</code>, <code>ghci</code> <code>libiserv</code> を諦めているので， 何か <code>filepath</code> か <code>directory</code> を優先する 理由があるようであれば <code>hpc</code> を諦めなきゃいけないんですけど，パッと思いつくところにはないですよね？</div>
        </div>
      </div>
      <div class="event" id="message-1680953392.639869">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680953392.639869">2023-04-08 20:29:52 +0900</a></div>
          </div>
          <div class="description">hpcを入れる理由は最大限対応できそうなものは対応する以上の意味はないですね。 filepathとdirectoryのバージョンに関してはどれでもいいかなと思ってます。競プロ的にはそこまで重要ではないはずです</div>
        </div>
      </div>
      <div class="event" id="message-1680953753.398359">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680953753.398359">2023-04-08 20:35:53 +0900</a></div>
          </div>
          <div class="description">後から hpc を入れるようにも filepath + directory を最新版にするようにもどっちにも後方互換性を保って対応できるようにするために hpc を除外して directory-1.3.7.1 と filepath-1.4.2.2 を導入しておくみたいなやり方も考えてます…</div>
        </div>
      </div>
      <div class="event" id="message-1680954281.326489">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680954281.326489">2023-04-08 20:44:41 +0900</a></div>
          </div>
          <div class="description">ghciを諦めているのであればhpcを諦めるのは自然な感じはします。<br/>あと，ghciの依存関係のために入っているhaskeline, terminfo外せるかなと。<br/>directory, filepathのバージョンは依存関係の解決が1番簡単なものがよさそうで，<br/>無難に行くならdirectory-1.3.7.1とfilepath-1.4.2.2になるんですかね</div>
        </div>
      </div>
      <div class="event" id="message-1680954553.784719">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680954553.784719">2023-04-08 20:49:13 +0900</a></div>
          </div>
          <div class="description"><code>hpc, haskeline, terminfo</code> を 除外して <code>directory &gt;=1.3.7.1 &amp;&amp; &lt;1.3.8.0</code> と <code>filepath &gt;=1.4.2.2 &amp;&amp; &lt;1.4.99</code> にします…．</div>
        </div>
      </div>
      <div class="event" id="message-1680954719.837559">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680954719.837559">2023-04-08 20:51:59 +0900</a></div>
          </div>
          <div class="description">それに伴って <code>unix ^&gt;=2.7.3</code>  になりました</div>
        </div>
      </div>
      <div class="event" id="message-1680962046.713129">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680962046.713129">2023-04-08 22:54:06 +0900</a></div>
          </div>
          <div class="description">dependency がビルド完了すること， Hello Worldが走ることと， flag が役目を果たすのを一応チェックしました．まだ Imports of Export list を走らせてません． チェックソース生成器に修正が必要なので…．license report もまだ作ってないですが，時間が時間なので取り敢えず書いてきます．<https://gist.github.com/gksato/0993d739f2ac6e81100f41815a27a978></div>
        </div>
      </div>
      <div class="event" id="message-1680963330.176849">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680963330.176849">2023-04-08 23:15:30 +0900</a></div>
          </div>
          <div class="description"><code>ghc-compact</code> の回復はできていませんでした．これも同様に <code>bytestring</code> との conflict です．諦めます．</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/CL3AXB1AL/6.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
      <a href="../../html/CL3AXB1AL/8.html" class="item">Next</a>
    </div>
  </div>
</body>
</html>
