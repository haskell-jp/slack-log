<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / beginners #18 at 2021-11-14 19:22:25 +0900</title>
<link rel="stylesheet" href="../../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / beginners #18 at 2021-11-14 19:22:25 +0900</h1>
    <div class="ui pagination menu">
      <a href="../18.html" class="item">Back to beginners #18</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1636885345.028600">
        <div class="content">
          <div class="summary">
            <div class="user">U02M9636PFV</div>
            <div class="date"><a class="date" href="#message-1636885345.028600">2021-11-14 19:22:25 +0900</a></div>
          </div>
          <div class="description">自分はC#を用いることが多いのですが、FFIを用いてHaskellの関数やユーザー定義のデータ型などをC#とやり取りするにはどのようにすればよいのでしょうか？<br/>一応自分では調べてみたもののCの知識などを使うことが多くよくわからなかったので、できればそのあたりも教えてくださると大変助かります。</div>
        </div>
      </div>
      <div class="event" id="message-1636889996.028700">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1636889996.028700">2021-11-14 20:39:56 +0900</a></div>
          </div>
          <div class="description">多くのプログラミング言語と*恐らく*C#も同様に、HaskellからC#の関数を呼ぶにせよ、C#からHaskellの関数を呼ぶにせよ、C言語の関数としてFFIでexportしてFFIでimportする、というのが確実かと思います。<br/><br/>ただ、知る限りWindows限定ではあるものの、COMを使う、という手もあるかも知れません。<br/>と思ってhackageを漁ったら随分古いパッケージが出てきましたね... 今使えるかと言われるとこれは怪しい :disappointed:<br/><a href='https://hackage.haskell.org/package/com'>https://hackage.haskell.org/package/com</a><br/><br/>（あと、これはWasm好きとしての余談ですがWebAssembly Interface Typesが普及すればこういう相互呼び出しも楽になるはず...）</div>
        </div>
      </div>
      <div class="event" id="message-1636894722.029000">
        <div class="content">
          <div class="summary">
            <div class="user">minorinoki_haskjp</div>
            <div class="date"><a class="date" href="#message-1636894722.029000">2021-11-14 21:58:42 +0900</a></div>
          </div>
          <div class="description">Haskellで書かれた関数を他の言語から呼び出したい場合、GHC User's GuideのFFIのセクションにあるような手順で共有ライブラリーを作って、Cのライブラリーとして外から呼び出してやれば一応は可能です。その際、データ型の類は全てC言語で表現できる範囲に落とし込む必要があります。 <a href='https://downloads.haskell.org/ghc/latest/docs/html/users_guide/exts/ffi.html#making-a-haskell-library-that-can-be-called-from-foreign-code'>https://downloads.haskell.org/ghc/latest/docs/html/users_guide/exts/ffi.html#making-a-haskell-library-that-can-be-called-from-foreign-code</a> ただ、個人的な感触としては、C FFIを経由して外からHaskellを呼び出すのは茨の道で、Haskell側の処理を単体の実行ファイルとして使えるようにしてプロセス間通信した方が良いのではという気がします。</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../18.html" class="item">Back to beginners #18</a>
    </div>
  </div>
</body>
</html>
