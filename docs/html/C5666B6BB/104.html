<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / questions #104</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / questions #104</h1>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/103.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1685679030.509849">
        <div class="content">
          <div class="summary">
            <div class="user">Sakae</div>
            <div class="date"><a class="date" href="#message-1685679030.509849">2023-06-02 13:10:30 +0900</a></div>
          </div>
          <div class="description">@Sakae has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1685851209.924389">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1685851209.924389">2023-06-04 13:00:09 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1686190934.052419">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1686190934.052419">2023-06-08 11:22:14 +0900</a></div>
          </div>
          <div class="description">フォーマッタとして hindent を使っている人はいませんか？<br/>CPPを使っていると、ことごとくフォーマットできずにエラーになるんですが、そういうものですか？</div>
          <a class="link-to-replies" href="104/1686190934.052419.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1686335331.764689">
        <div class="content">
          <div class="summary">
            <div class="user">aja</div>
            <div class="date"><a class="date" href="#message-1686335331.764689">2023-06-10 03:28:51 +0900</a></div>
          </div>
          <div class="description">@aja has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1686494168.258189">
        <div class="content">
          <div class="summary">
            <div class="user">goma11</div>
            <div class="date"><a class="date" href="#message-1686494168.258189">2023-06-11 23:36:08 +0900</a></div>
          </div>
          <div class="description">@goma11 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1686720298.292579">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1686720298.292579">2023-06-14 14:24:58 +0900</a></div>
          </div>
          <div class="description">Hackage の upload 機能が死んでいるようなのですが、どこに連絡すればいいですか？<br/>Hackageには書かれてないように思いました。</div>
          <a class="link-to-replies" href="104/1686720298.292579.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1686989448.559229">
        <div class="content">
          <div class="summary">
            <div class="user">MaxBruchDev</div>
            <div class="date"><a class="date" href="#message-1686989448.559229">2023-06-17 17:10:48 +0900</a></div>
          </div>
          <div class="description">@MaxBruchDev has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1687240914.968079">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1687240914.968079">2023-06-20 15:01:54 +0900</a></div>
          </div>
          <div class="description"><a href='https://haskell.jp/blog/posts/2020/strict-gotchas.html'>https://haskell.jp/blog/posts/2020/strict-gotchas.html</a><br/>strictは!をつけてくれるのですが、!のseqではなくdeepseqに置き換えたい場合はどうすればいいでしょうか。</div>
          <a class="link-to-replies" href="104/1687240914.968079.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1687245602.208709">
        <div class="content">
          <div class="summary">
            <div class="user">bunny_hopper isolated</div>
            <div class="date"><a class="date" href="#message-1687245602.208709">2023-06-20 16:20:02 +0900</a></div>
          </div>
          <div class="description">@bunny_hopper isolated has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1687321140.257329">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1687321140.257329">2023-06-21 13:19:00 +0900</a></div>
          </div>
          <div class="description">Haskellのコードが書かれた大きなファイルを分割したいです。<br/>そのため関数の依存グラフが欲しいのですが、SourceGraphはもうメンテされてないようです。<br/>Haskellの関数の依存グラフを可視化するツールとかサービスは、他にありませんか？</div>
          <a class="link-to-replies" href="104/1687321140.257329.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1687643826.871559">
        <div class="content">
          <div class="summary">
            <div class="user">Sakae</div>
            <div class="date"><a class="date" href="#message-1687643826.871559">2023-06-25 06:57:06 +0900</a></div>
          </div>
          <div class="description">haskellの事をAIに質問していたら、sha256な文字列に出会いました。<br/><a href='https://hamesspam.sakura.ne.jp/hes2023/230625.html'>ask AI</a>  この鬼のように長いsha256な文字表現を短縮したいです。イメージは<br/>sed 's/hexDigit x 64/SHA256/g'<br/>これをparsecで実現するには、どうしたら良いのでしょうか？</div>
          <a class="link-to-replies" href="104/1687643826.871559.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1688347266.638029">
        <div class="content">
          <div class="summary">
            <div class="user">Shogo</div>
            <div class="date"><a class="date" href="#message-1688347266.638029">2023-07-03 10:21:06 +0900</a></div>
          </div>
          <div class="description">@Shogo has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1688395741.276539">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1688395741.276539">2023-07-03 23:49:01 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1688415525.784589">
        <div class="content">
          <div class="summary">
            <div class="user">Sakae</div>
            <div class="date"><a class="date" href="#message-1688415525.784589">2023-07-04 05:18:45 +0900</a></div>
          </div>
          <div class="description">参照されていないモジュールを指摘してくれるツールってありますでしょうか？<br/>golangでは、コンパイラーに厳しい指導をされたような。</div>
          <a class="link-to-replies" href="104/1688415525.784589.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1688790288.643299">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1688790288.643299">2023-07-08 13:24:48 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1689048948.519879">
        <div class="content">
          <div class="summary">
            <div class="user">nobsun</div>
            <div class="date"><a class="date" href="#message-1689048948.519879">2023-07-11 13:15:48 +0900</a></div>
          </div>
          <div class="description">base パッケージの versioning policy をさがしているのですが、見つけられないでいます．どなたかご存知でしょうか？</div>
          <a class="link-to-replies" href="104/1689048948.519879.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1689352495.167359">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1689352495.167359">2023-07-15 01:34:55 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1689404805.114849">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1689404805.114849">2023-07-15 16:06:45 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1690112065.483659">
        <div class="content">
          <div class="summary">
            <div class="user">minus1216</div>
            <div class="date"><a class="date" href="#message-1690112065.483659">2023-07-23 20:34:25 +0900</a></div>
          </div>
          <div class="description"><code>callCC</code>の型はなぜ`forall r m a. ((forall b. a -&gt; ContT r m b) -&gt; ContT r m a) -&gt; ContT r m a`ではなく`forall r m a b. ((a -&gt; ContT r m b) -&gt; ContT r m a) -&gt; ContT r m a`なのでしょうか<br/>実際`callCC' f = callCC (\exit -&gt; f $ (\ a -&gt; absurd &lt;$&gt; exit a))`とすれば前者の型にでき、前者の型のほうが脱出用の継続（`callCC (\exit -&gt; ...)`のexit）の返り値の型が制限されず便利であるように思えます</div>
          <a class="link-to-replies" href="104/1690112065.483659.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1691583960.006909">
        <div class="content">
          <div class="summary">
            <div class="user">toyboot4e</div>
            <div class="date"><a class="date" href="#message-1691583960.006909">2023-08-09 21:26:00 +0900</a></div>
          </div>
          <div class="description"><code>vector-13.0.0</code> における <code>newtype</code> に対する <code>Unbox</code> 実装の質問です。<br/>(1) <a href='https://hackage.haskell.org/package/vector-0.13.0.0/docs/Data-Vector-Unboxed.html#t:UnboxViaPrim'>UnboxViaPrim</a> を使う方法と (2)『`GeneralizedNewtypeDeriving`』を使う方法 [^1]  は、どちらを好むべきですか。 <code>U.Vector</code> を使うだけなら、大きな差は無いと思って良いでしょうか。<br/>[^1]: (<https://hackage.haskell.org/package/vector-0.13.0.0/docs/Data-Vector-Unboxed.html|Unbox モジュール> 冒頭 2 番目のコードブロックの例)</div>
        </div>
      </div>
      <div class="event" id="message-1691658512.849699">
        <div class="content">
          <div class="summary">
            <div class="user">zackey</div>
            <div class="date"><a class="date" href="#message-1691658512.849699">2023-08-10 18:08:32 +0900</a></div>
          </div>
          <div class="description">@zackey has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1691773078.229469">
        <div class="content">
          <div class="summary">
            <div class="user">Masaaki Saitow</div>
            <div class="date"><a class="date" href="#message-1691773078.229469">2023-08-12 01:57:58 +0900</a></div>
          </div>
          <div class="description">@Masaaki Saitow has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1691991330.531279">
        <div class="content">
          <div class="summary">
            <div class="user">khibino</div>
            <div class="date"><a class="date" href="#message-1691991330.531279">2023-08-14 14:35:30 +0900</a></div>
          </div>
          <div class="description"><code>RecordWildCards</code> 有効にすると、<br/>インポート元で定義済みフィールド名とかさなる名前の<br/><br/>"shadows the existing binding"<br/><br/>の警告が出なくなるみたいなんですが、<br/>そういうものでしょうか?<br/><br/><code>RecordWildCards</code> を有効にすると暗黙に有効にされる<br/><code>DisambiguateRecordFields</code> の効果なのかと思ったけどそういうわけでもないみたいです.<br/><br/><pre>module M where

data R = R { x :: String }</pre><br/><pre>{-# LANGUAGE RecordWildCards #-}

import M

inc :: Int -&gt; Int
inc x = x + 1

getX :: R -&gt; String
getX m = x m</pre></div>
        </div>
      </div>
      <div class="event" id="message-1692241313.592449">
        <div class="content">
          <div class="summary">
            <div class="user">milran</div>
            <div class="date"><a class="date" href="#message-1692241313.592449">2023-08-17 12:01:53 +0900</a></div>
          </div>
          <div class="description">@milran has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1692340291.598489">
        <div class="content">
          <div class="summary">
            <div class="user">りょー</div>
            <div class="date"><a class="date" href="#message-1692340291.598489">2023-08-18 15:31:31 +0900</a></div>
          </div>
          <div class="description">@りょー has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1692450923.172359">
        <div class="content">
          <div class="summary">
            <div class="user">ksrk</div>
            <div class="date"><a class="date" href="#message-1692450923.172359">2023-08-19 22:15:23 +0900</a></div>
          </div>
          <div class="description">パターンマッチで分けられた関数定義の一行一行`f p1 p2 ... pn = e`のことを何と呼びますか？<br/>Haskellのいくつかの文献では`equation`と呼ばれているようですが、`clause`というのも見かけます。<br/>日本語の文献では対応する用語が見当たらなかったのですが、日本語だと何というのでしょうか？<br/><br/>また、関数定義をデータ型として表現するときに、<br/><pre>data FunDecl = FunDecl String [([Pattern], Expr)]</pre><br/>と書くとして、`([Pattern], Expr)`　にはどんな名前をつけますか？<br/>case式`case e of {p1 -&gt; e1; p2 -&gt; e2; ... pn -&gt; en}` に含まれる`p1 -&gt; e1`は、HaskellではAlternativeと呼ばれていますが、パターンが複数になると何と呼ばれるのでしょう？</div>
          <a class="link-to-replies" href="104/1692450923.172359.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1692784236.307109">
        <div class="content">
          <div class="summary">
            <div class="user">りょー</div>
            <div class="date"><a class="date" href="#message-1692784236.307109">2023-08-23 18:50:36 +0900</a></div>
          </div>
          <div class="description">Haskellのライブラリをどのくらいの粒度でパッケージ分割したらいいのかの基準が自分の中でまだ整理が付いていないのですが、良い資料をご存知の方、もしくは考えをお持ちの方はいらっしゃいますか？<br/><br/>以前、いわゆる「Internalモジュール」パターンは間違っていて、Internalモジュールが作りたくなったらパッケージ分割の合図だろうといった旨の↓の記事を見まして。<br/>記事の内容には完全に同意なのですが、すると、究極的にはなるべく細かく分割するのがよいのではないかと思うようになってしまいました。<br/>分割を止める基準、つまりトレードオフの「分割すべきでない」側の壁がどの辺りにあるのかが分からなくなっています。<br/><br/><a href='http://nikita-volkov.github.io/internal-convention-is-a-mistake/'>http://nikita-volkov.github.io/internal-convention-is-a-mistake/</a></div>
          <a class="link-to-replies" href="104/1692784236.307109.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1692853327.298529">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1692853327.298529">2023-08-24 14:02:07 +0900</a></div>
          </div>
          <div class="description">Haskell で JSON を受け取って JSON を返す簡単なAPIサーバー（インメモリのキャッシュや openapiやドキュメントの自動生成があるとなおよい）を立てる場合どのようなスタックを使いますか？<br/><br/>参考となるレポジトリなどあれば教えてもらえると助かります.</div>
          <a class="link-to-replies" href="104/1692853327.298529.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1692859057.169869">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1692859057.169869">2023-08-24 15:37:37 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1693084934.121649">
        <div class="content">
          <div class="summary">
            <div class="user">ryoppippi</div>
            <div class="date"><a class="date" href="#message-1693084934.121649">2023-08-27 06:22:14 +0900</a></div>
          </div>
          <div class="description">@ryoppippi has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1694739882.946039">
        <div class="content">
          <div class="summary">
            <div class="user">高橋紀美</div>
            <div class="date"><a class="date" href="#message-1694739882.946039">2023-09-15 10:04:42 +0900</a></div>
          </div>
          <div class="description">@高橋紀美 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1695261242.484609">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1695261242.484609">2023-09-21 10:54:02 +0900</a></div>
          </div>
          <div class="description">以下、timeout の抜粋です。<br/>最近の timeout は、TimeManagerを使い「時間切れのどきだけ」スレッドが作られます(forkIOWithUnmask)。<br/>(gitでlog を読むと高野さんのアイディアらしい。)<br/>handleTimeoutで作られるこのスレッドは、どこにもブロックする箇所がないので、すぐに消滅しそうです。<br/>しかし、cleanupTimeoutでわざわざkillThreadしています。<br/>このkillThreadは必要なのでしょうか？<br/><br/><pre>Haskell
timeout :: Int -&gt; IO a -&gt; IO (Maybe a)
timeout n f
    | n &lt;  0    = fmap Just f
    | n == 0    = return Nothing
    | otherwise = do
        -- In the threaded RTS, we use the Timer Manager to delay the
        -- (fairly expensive) 'forkIO' call until the timeout has expired.
        --
        -- An additional thread is required for the actual delivery of
        -- the Timeout exception because killThread (or another throwTo)
        -- is the only way to reliably interrupt a throwTo in flight.
        pid &lt;- myThreadId
        ex  &lt;- fmap Timeout newUnique
        tm  &lt;- getSystemTimerManager
        -- 'lock' synchronizes the timeout handler and the main thread:
        --  * the main thread can disable the handler by writing to 'lock';
        --  * the handler communicates the spawned thread's id through 'lock'.
        -- These two cases are mutually exclusive.
        lock &lt;- newEmptyMVar
        let handleTimeout = do
                v &lt;- isEmptyMVar lock
                when v $ void $ forkIOWithUnmask $ \unmask -&gt; unmask $ do
                    v2 &lt;- tryPutMVar lock =&lt;&lt; myThreadId
                    when v2 $ throwTo pid ex
            cleanupTimeout key = uninterruptibleMask_ $ do
                v &lt;- tryPutMVar lock undefined
                if v then unregisterTimeout tm key
                     else takeMVar lock &gt;&gt;= killThread
        handleJust (\e -&gt; if e == ex then Just () else Nothing)
                   (\_ -&gt; return Nothing)
                   (bracket (registerTimeout tm n handleTimeout)
                            cleanupTimeout
                            (\_ -&gt; fmap Just f))</pre></div>
          <a class="link-to-replies" href="104/1695261242.484609.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1695432046.678049">
        <div class="content">
          <div class="summary">
            <div class="user">working neco</div>
            <div class="date"><a class="date" href="#message-1695432046.678049">2023-09-23 10:20:46 +0900</a></div>
          </div>
          <div class="description">@working neco has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1695954019.278299">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1695954019.278299">2023-09-29 11:20:19 +0900</a></div>
          </div>
          <div class="description"><a href='https://github.com/haskell/haskell-language-server/issues/365'>https://github.com/haskell/haskell-language-server/issues/365</a><br/><a href='https://haskell-language-server.readthedocs.io/en/latest/troubleshooting.html#static-binaries'>https://haskell-language-server.readthedocs.io/en/latest/troubleshooting.html#static-binaries</a><br/>template haskellとhlsって相性が悪いのですね。<br/>hls使ってないので、ハマらずに済んでいますが、一般的にどうやって解決していますか？<br/>hlsを直すのは難しいのでパッケージのtemplate haskellのコードを直すのが一般的なのでしょうか？</div>
          <a class="link-to-replies" href="104/1695954019.278299.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1695954716.946699">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1695954716.946699">2023-09-29 11:31:56 +0900</a></div>
          </div>
          <div class="description">これはTHというよりも、THとFFIが絡むような場合の話ですね。普通のTHとの組み合わせは大体問題なく動きます。</div>
        </div>
      </div>
      <div class="event" id="message-1695954836.423639">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1695954836.423639">2023-09-29 11:33:56 +0900</a></div>
          </div>
          <div class="description">ふたつ目の公式ドキュメントの話は静的バイナリだとうまく動かないという話で、いまのHLSは各プラットホームごとにDynamic binary で配布されているので問題はほとんどないです</div>
        </div>
      </div>
      <div class="event" id="message-1695955374.183339">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1695955374.183339">2023-09-29 11:42:54 +0900</a></div>
          </div>
          <div class="description">まあ完璧な解決策ではないですねえ……</div>
        </div>
      </div>
      <div class="event" id="message-1695964546.520879">
        <div class="content">
          <div class="summary">
            <div class="user">R</div>
            <div class="date"><a class="date" href="#message-1695964546.520879">2023-09-29 14:15:46 +0900</a></div>
          </div>
          <div class="description">@R has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1696137519.721689">
        <div class="content">
          <div class="summary">
            <div class="user">kk</div>
            <div class="date"><a class="date" href="#message-1696137519.721689">2023-10-01 14:18:39 +0900</a></div>
          </div>
          <div class="description"><code>forall</code>を用いたデータ型について質問です．<br/>以下の通りに`AnyBar`型を構成した場合に，値を取り出す関数を書きたいです．<br/><pre>{-# LANGUAGE ExistentialQuantification #-}

module Bar where

data AnyBar b = forall a. AnyBar a (a -&gt; b)

argBar :: AnyBar b -&gt; b
argBar (AnyBar x f) = f x

letBar :: AnyBar b -&gt; b
letBar ab = let AnyBar x f = ab in f x</pre><br/>2通りのうち`letBar`だけエラーになりました．<br/><pre>src/Bar.hs:11:26: error:
    • Couldn't match expected type 'p1' with actual type 'a -&gt; b'
      'p1' is a rigid type variable bound by
        the inferred types of
          x :: p
          f :: p1
        at src/Bar.hs:11:17-31
    • In the pattern: AnyBar x f
      In a pattern binding: AnyBar x f = ab
      In the expression: let AnyBar x f = ab in f x
    • Relevant bindings include
        ab :: AnyBar b (bound at src/Bar.hs:11:8)
        letBar :: AnyBar b -&gt; b (bound at src/Bar.hs:11:1)
   |
11 | letBar ab = let AnyBar x f = ab in f x
   |                          ^</pre><br/>原因が分からないです．見た感じだと両者ともパターンマッチしてるだけで差異が現れるとは思えません．</div>
          <a class="link-to-replies" href="104/1696137519.721689.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1696291826.040049">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1696291826.040049">2023-10-03 09:10:26 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1696492633.425049">
        <div class="content">
          <div class="summary">
            <div class="user">working neco</div>
            <div class="date"><a class="date" href="#message-1696492633.425049">2023-10-05 16:57:13 +0900</a></div>
          </div>
          <div class="description">Haskellの勉強がてら　コラッツ予想に取り組んでいます。<br/>ご存知の方も多いと思いますが　自然数において<br/>奇数の場合は　3倍して　1を足す<br/>偶数の場合は　2で割る　を繰り返すと<br/>1に収束するという予想です。<br/><br/>上記の条件を　奇数の場合に　3倍して　1を引く　とした場合には<br/>1に収束しなくなり　下記のプログラムでは　止まらなくなります。<br/>発散する場合は仕方ありませんが　1以外で収束する場合に　止まるようにしたいと考えています。<br/><br/>数列が　例えば　[2, 3, 4, 5]　まで形成され　次の数字が　今までに出現した数字の場合<br/>（左記の場合は　2　3　4　5　のいずれか）になった場合に停止するように　プログラムしたいのですが<br/>どうにもうまくいきません。<br/><br/>御指導いただければ助かります。<br/>よろしくお願いします。<br/><br/><br/>import Data.Char<br/>import Data.List<br/><br/>type Nat = Integer<br/><br/>collatz :: Nat -&gt; Nat<br/>collatz n<br/>  | odd n = 3 * n + 1<br/>  | even n = div n 2<br/><br/>sequence :: Nat -&gt; [Nat]<br/>sequence n<br/>  | n == 1  = 1 : []<br/>  | otherwise = n : sequence (collatz n)</div>
          <a class="link-to-replies" href="104/1696492633.425049.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1696751943.597629">
        <div class="content">
          <div class="summary">
            <div class="user">kei.ad</div>
            <div class="date"><a class="date" href="#message-1696751943.597629">2023-10-08 16:59:03 +0900</a></div>
          </div>
          <div class="description">@kei.ad has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1696917646.666229">
        <div class="content">
          <div class="summary">
            <div class="user">sat0ma</div>
            <div class="date"><a class="date" href="#message-1696917646.666229">2023-10-10 15:00:46 +0900</a></div>
          </div>
          <div class="description">@sat0ma has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1697196348.193759">
        <div class="content">
          <div class="summary">
            <div class="user">bizyutyu</div>
            <div class="date"><a class="date" href="#message-1697196348.193759">2023-10-13 20:25:48 +0900</a></div>
          </div>
          <div class="description">@bizyutyu has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1697286322.708199">
        <div class="content">
          <div class="summary">
            <div class="user">mitsuru793</div>
            <div class="date"><a class="date" href="#message-1697286322.708199">2023-10-14 21:25:22 +0900</a></div>
          </div>
          <div class="description">@mitsuru793 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1697815946.039169">
        <div class="content">
          <div class="summary">
            <div class="user">U061PD53MRV</div>
            <div class="date"><a class="date" href="#message-1697815946.039169">2023-10-21 00:32:26 +0900</a></div>
          </div>
          <div class="description">@U061PD53MRV has joined the channel</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/103.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
  </div>
</body>
</html>
