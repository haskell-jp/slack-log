<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / beginners #13</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / beginners #13</h1><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/12.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1606127990.064600"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606127990.064600">2020-11-23&nbsp;19:39:50 +0900</a></div></div><div class="message__body description">一時的に確認したいだけだったので、 :point_down: のコマンドを（ほぼ元のコードそのままですが）手打ちしました。<br/><br/><pre>&gt; stack haddock
&gt; stack exec -- hoogle generate -v --local=$(stack path --local-doc-root) --local=$(stack path --snapshot-doc-root) --database=$(stack path --local-hoogle-root)/database.hoo
&gt; stack exec -- hoogle --database=$(stack path --local-hoogle-root)/database.hoo "a -&gt; a" # 今回は動作確認がしたかっただけなので、 a -&gt; a という型の関数を探してみるだけ</pre><br/>なお、元のコードでは <code>hoogle server</code> を必ず実行することになっていますが、hoogleの他の機能を使いたい場合も考えるとbashの <code>"$@"</code> などで一般化した方がいいでしょうね。<br/><br/>で、本題に答えると、例えば <code>stack-hoogle</code> とかでいいんじゃないでしょうか。場所は本当に <code>PATH</code> の中の自分が触れる領域であればどこでもよいでしょう。もしなければ、この機会に自前で作ったコマンドを入れておくディレクトリーを一つ作っておいてそこにすればいいんじゃないかと。</div></div></div><div class="message event" id="message-1606130228.066000"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606130228.066000">2020-11-23&nbsp;20:17:08 +0900</a></div></div><div class="message__body description">すみません本題から外れますがこれからオンライン集合論ゼミのため反応が鈍ります。<br/>申し訳ないです。</div></div></div><div class="message event" id="message-1606133858.066200"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606133858.066200">2020-11-23&nbsp;21:17:38 +0900</a></div></div><div class="message__body description">お気になさらず！私含めみんな気が向いたときに回答しているので！</div></div></div><div class="message event" id="message-1606135205.066500"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606135205.066500">2020-11-23&nbsp;21:40:05 +0900</a></div></div><div class="message__body description">「stack haddock」<br/>と実行した時に以下のエラーメッセージが出ます<br/><br/>MacBook-Air:~ sirkerf$ stack haddock<br/>Error parsing targets: The specified targets matched no packages.<br/>Perhaps you need to run ‘stack init’?</div></div></div><div class="message event" id="message-1606135520.066700"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606135520.066700">2020-11-23&nbsp;21:45:20 +0900</a></div></div><div class="message__body description">あれ、global projectでは <code>stack haddock</code> は使えなかったっけか...<br/>ええっと、そのエラーメッセージは、「 <code>stack haddock</code> はプロジェクトのディレクトリー（ <code>stack.yaml</code> が入っているディレクトリー）でないと使えません」という旨のメッセージです。<br/>プロジェクトを作ってから使う... でもいいんですが、本当に必要かどうかちょっと自分も確信が持てなくなってきたのですっ飛ばして <code>stack exec -- hoogle generate ...</code> で始まる方を実行してみてください</div></div></div><div class="message event" id="message-1606136529.066900"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606136529.066900">2020-11-23&nbsp;22:02:09 +0900</a></div></div><div class="message__body description">「stack exec — hoogle generate …」<br/>で始まる方を実行した後に二個目実行してみました。<br/>その後に<br/>「stack hoogle “min”」で実行してみました。<br/><br/>MacBook-Air:~ sirkerf$ stack hoogle “min”<br/>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.<br/>Distribution.Compat.Prelude.Internal min :: Ord a =&gt; a -&gt; a -&gt; a<br/>Prelude min :: Ord a =&gt; a -&gt; a -&gt; a<br/>Data.Ord min :: Ord a =&gt; a -&gt; a -&gt; a<br/>GHC.Classes min :: Ord a =&gt; a -&gt; a -&gt; a<br/>Data.Semigroup newtype Min a<br/>Data.Semigroup Min :: a -&gt; Min a<br/>BasicTypes minPrecedence :: Int<br/>CmmExpr minusRegSet :: Ord r =&gt; RegSet r -&gt; RegSet r -&gt; RegSet r<br/>CmmProcPoint minimalProcPointSet :: Platform -&gt; ProcPointSet -&gt; CmmGraph -&gt; UniqSM ProcPointSet<br/>DynFlags mIN_CHARLIKE :: DynFlags -&gt; Int<br/>-- plus more results not shown, pass --count=20 to see more</div></div></div><div class="message event" id="message-1606136556.067100"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606136556.067100">2020-11-23&nbsp;22:02:36 +0900</a></div></div><div class="message__body description">必ず初めに<br/>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.<br/>が表示されるようです。</div></div></div><div class="message event" id="message-1606136743.067300"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606136743.067300">2020-11-23&nbsp;22:05:43 +0900</a></div></div><div class="message__body description">ともあれ、hoogleの機能は利用できるようになったのでありがとうございます。<br/>残った問題についてもできれば解決したいですが、また機会がありましたらお願いします。ありがとうございました。<br/>連日ありがとうございます、また機会がありましたらお願いします。</div></div></div><div class="message event" id="message-1606145054.071100"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606145054.071100">2020-11-24&nbsp;00:24:14 +0900</a></div></div><div class="message__body description">Haskellのコーディングでの質問です。<br/><br/>multiply :: Int -&gt; Int -&gt; Int<br/>multiply a b = a * b<br/><br/>main = do<br/>     return $ multiply a b<br/><br/>をしようとしたのですがうまくいきません。<br/>エラーコードは<br/><br/>MacBook-Air:haskell_sutdy sirkerf$ runghc multiple.hs <br/><br/>*multiple.hs*:eight:*23: error: Variable not in scope: a :: Int*<br/> *|*<br/>*8 |*   return $ multiply *a* b<br/> *|            ^*<br/><br/>*multiple.hs*:eight:*25: error: Variable not in scope: b :: Int*<br/> *|*<br/>*8 |*   return $ multiply a *b*<br/> *|             ^*<br/><br/>となります。<br/>Variable not in scopeのエラーを調べてみても「型が合ってない」としか言われないのですが、そもそもaとbはIntのはずですからこのエラーはおかしいように感じるのです。<br/>どなたか、このコードが通るように改変していただけませんでしょうか？</div></div></div><div class="message event" id="message-1606145174.072000"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606145174.072000">2020-11-24&nbsp;00:26:14 +0900</a></div></div><div class="message__body description">ちなみに最後を「return $ multiply 2 3」と具体的なIntのものにすると通ります。</div></div></div><div class="message event" id="message-1606145491.072200"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606145491.072200">2020-11-24&nbsp;00:31:31 +0900</a></div></div><div class="message__body description">推測するにaとbが具体的な型を持っていないと見られているのが問題だと思っています。</div></div></div><div class="message event" id="message-1606146527.072400"><div class="content"><div class="summary"><div class="message__header user">kyaddress</div><div class="message__timestamp date"><a class="date" href="#message-1606146527.072400">2020-11-24&nbsp;00:48:47 +0900</a></div></div><div class="message__body description">aとbが定義されていないというエラーです。<br/>a :: Int<br/>a = 2<br/>b :: Int<br/>b = 3</div></div></div><div class="message event" id="message-1606146559.072700"><div class="content"><div class="summary"><div class="message__header user">kyaddress</div><div class="message__timestamp date"><a class="date" href="#message-1606146559.072700">2020-11-24&nbsp;00:49:19 +0900</a></div></div><div class="message__body description">などと定義を追加すれば動きます</div></div></div><div class="message event" id="message-1606147157.072900"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606147157.072900">2020-11-24&nbsp;00:59:17 +0900</a></div></div><div class="message__body description">動きました。ありがとうございます。<br/>ところが件のコードは<br/>「module Multiply.Bug.Fix where<br/><br/>multiply :: Int -&gt; Int -&gt; Int<br/>multiply a b = do<br/>  return $ a * b」<br/><br/>この誤りを正せ<br/>と言う問題だったのでさっきのコードになったのですが、具体的な値を入れると怒られてしまいました。</div></div></div><div class="message event" id="message-1606150110.073100"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606150110.073100">2020-11-24&nbsp;01:48:30 +0900</a></div></div><div class="message__body description">「module Multiply.Bug.Fix where<br/>multiply :: Int -&gt; Int -&gt; Int<br/>multiply a b = a * b」<br/><br/>で通りました。ありがとうございました。</div></div></div><div class="message event" id="message-1606174310.073600"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606174310.073600">2020-11-24&nbsp;08:31:50 +0900</a></div></div><div class="message__body description"><blockquote>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.</blockquote>についてはよくわかりません。インストール自体は済んでいるでしょうし、stackのバグではないでしょうか。</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/12.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>