<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / questions #103</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / questions #103</h1>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/102.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1674372468.666109">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1674372468.666109">2023-01-22 16:27:48 +0900</a></div>
          </div>
          <div class="description"><code>ghc-bignum</code> ってデフォルトが <code>native</code> になってますけど， これを <code>gmp</code> にしようと思ったら <code>ghcup</code> でGHCをインストールする時点でなんとかしないといけないですか…？</div>
          <a class="link-to-replies" href="103/1674372468.666109.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1674523876.552029">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1674523876.552029">2023-01-24 10:31:16 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1674613262.313509">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1674613262.313509">2023-01-25 11:21:02 +0900</a></div>
          </div>
          <div class="description">GHC 9.4 で stdc++ に依存するようになってしまったようですが、その理由はなんでしょうか？<br/>centos だと、configure が stdc++ を見つけられずに、インストールできません。。。</div>
          <a class="link-to-replies" href="103/1674613262.313509.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1674682624.529619">
        <div class="content">
          <div class="summary">
            <div class="user">kk</div>
            <div class="date"><a class="date" href="#message-1674682624.529619">2023-01-26 06:37:04 +0900</a></div>
          </div>
          <div class="description">@kk has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1674770921.336499">
        <div class="content">
          <div class="summary">
            <div class="user">gan20</div>
            <div class="date"><a class="date" href="#message-1674770921.336499">2023-01-27 07:08:41 +0900</a></div>
          </div>
          <div class="description">@gan20 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1674891407.269969">
        <div class="content">
          <div class="summary">
            <div class="user">HN</div>
            <div class="date"><a class="date" href="#message-1674891407.269969">2023-01-28 16:36:47 +0900</a></div>
          </div>
          <div class="description">@HN has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675173538.017639">
        <div class="content">
          <div class="summary">
            <div class="user">まど</div>
            <div class="date"><a class="date" href="#message-1675173538.017639">2023-01-31 22:58:58 +0900</a></div>
          </div>
          <div class="description">@まど has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675174781.070379">
        <div class="content">
          <div class="summary">
            <div class="user">ai-ou</div>
            <div class="date"><a class="date" href="#message-1675174781.070379">2023-01-31 23:19:41 +0900</a></div>
          </div>
          <div class="description">@ai-ou has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675217802.518109">
        <div class="content">
          <div class="summary">
            <div class="user">yoshitsugu</div>
            <div class="date"><a class="date" href="#message-1675217802.518109">2023-02-01 11:16:42 +0900</a></div>
          </div>
          <div class="description">@yoshitsugu has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1675566381.795629">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1675566381.795629">2023-02-05 12:06:21 +0900</a></div>
          </div>
          <div class="description"><a href='https://haskell-jp.slack.com/archives/CL3AXB1AL/p1675402815431589'>https://haskell-jp.slack.com/archives/CL3AXB1AL/p1675402815431589</a> （at <a href='#CL3AXB1AL'>atcoder-lang-update</a>)<br/><blockquote>がんばりました。直接installしていない物も含む、全transitive dependencyのライセンスのリスト:　<https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1835616968&amp;range=E5></blockquote>この件で，あるパッケージ群の全transitive dependenciesからlicenseを取ってくる作業をしたのですが，私の知識の範囲でできる限り車輪の再開発を避けて:<br/>1. cabal-installにdependencyを解いてもらい，<br/>2. それをもとにHackage API を叩いて <code>.cabal</code> ファイルをもらってくる，<br/>3.  <code>Cabal-syntax</code> パッケージを使ってその <code>.cabal</code> ファイルをパースしてライセンス情報を取る<br/>みたいな手段を取りました．この1.に関して質問させてください．<br/><br/>ここでやりたいことは，「ビルドやインストールはしなくていいけど，現環境から見た，既ビルドのものも含めた全transitive dependenciesのリストが欲しい」ということになります．このために今回は結構乱暴な手段を取りました．Docker環境があったので，まっさらなGHC+Cabalをghcupでインストールしたのち，対象のパッケージ群を全部 <code>cabal install --lib</code> して <code>ghc-pkg　list</code> でインストールされている全パッケージのリストを取ってきたのです．しかし，これでは余計なパッケージまで見ている気がしますし，もうちょっとなんとかならんのか，という気がします．<br/><br/>色々いじっていると，適当に一個だけcabal packageを持つcabal projectを作り，Cabal packageの <code>.cabal</code> ファイルは目的とするパッケージ群をdependenciesに持つ library だけを持つようにし，project の <code>cabal.project</code> にはそれらのライブラリについて設定すべきフラグを持たせるようにすると，  <code>cabal freeze</code> で <code>cabal.project.freeze</code> がなんかそれっぽいファイルになるのですが，これで合ってるのでしょうか…？ <code>cabal freeze</code> が良い方法なのか，あるいは別の方法があればお教えいただければありがたいです．</div>
          <a class="link-to-replies" href="103/1675566381.795629.html">... Replies ...</a>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/102.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
  </div>
</body>
</html>
