<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / questions #99</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / questions #99</h1>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/98.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1635485581.001700">
        <div class="content">
          <div class="summary">
            <div class="user">idiotpanzer</div>
            <div class="date"><a class="date" href="#message-1635485581.001700">2021-10-29 14:33:01 +0900</a></div>
          </div>
          <div class="description">@idiotpanzer has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1635546600.002000">
        <div class="content">
          <div class="summary">
            <div class="user">mahsa.datsu</div>
            <div class="date"><a class="date" href="#message-1635546600.002000">2021-10-30 07:30:00 +0900</a></div>
          </div>
          <div class="description">@mahsa.datsu has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1635547410.006900">
        <div class="content">
          <div class="summary">
            <div class="user">mahsa.datsu</div>
            <div class="date"><a class="date" href="#message-1635547410.006900">2021-10-30 07:43:30 +0900</a></div>
          </div>
          <div class="description">はじめまして、Haskell初心者で、さらにSlackを使うのも初めてでして、投稿方法など間違っていましたらすみません。<br/>とても簡単な質問かもしれないのですが、<br/>「行列の第 i, j 成分のみ関数 f を適用する」<br/>という関数<br/>matrixsubst :: ( a -&gt; a ) -&gt; [[a]] -&gt; [Int] -&gt; [[a]]<br/>matrixsubst f m [i, j] =<br/>を作りたいのですが、どうしたらよいでしょうか。<br/><br/>具体例としましては、<br/>f = (\x -&gt; x^2),<br/>m=<br/>[[1,2,3]<br/>,[4,5,6]<br/>,[7,8,9]]<br/>i= 2, j=3<br/>とすると、出力として<br/>[[1,2,3]<br/>,[4,5,36]<br/>,[7,8,9]]<br/>を得たい、ということです。</div>
          <a class="link-to-replies" href="99/1635547410.006900.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1635560352.013800">
        <div class="content">
          <div class="summary">
            <div class="user">idiotpanzer</div>
            <div class="date"><a class="date" href="#message-1635560352.013800">2021-10-30 11:19:12 +0900</a></div>
          </div>
          <div class="description">既出かもしれませんが<br/>Haskellでパターンマッチを実行するとき想定外のパターンはエラー（コンパイルエラーか実行時エラー）にしたりすることはできるのでしょうか？<br/>よくパターンマッチを使うと以下のような警告が出るのですが、そもそもありえないパターンが入ってたりするのです。<br/><pre>Warning: Pattern match(es) are non-exhaustive</pre></div>
          <a class="link-to-replies" href="99/1635560352.013800.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1635718877.017900">
        <div class="content">
          <div class="summary">
            <div class="user">kaito.augmented7th</div>
            <div class="date"><a class="date" href="#message-1635718877.017900">2021-11-01 07:21:17 +0900</a></div>
          </div>
          <div class="description">@kaito.augmented7th has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1635915074.018300">
        <div class="content">
          <div class="summary">
            <div class="user">misaki</div>
            <div class="date"><a class="date" href="#message-1635915074.018300">2021-11-03 13:51:14 +0900</a></div>
          </div>
          <div class="description">あまり経験がなかったので気になったのですが、newtypeで宣言できる型をdataで宣言するユースケースって何があるでしょうか？</div>
          <a class="link-to-replies" href="99/1635915074.018300.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1636073332.020400">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1636073332.020400">2021-11-05 09:48:52 +0900</a></div>
          </div>
          <div class="description">GHC 9.2 でライブラリをコンパイルすると、Word8 (#付きかも)で問題が出ることが多いんですが、これは何が変更されたためですか？</div>
          <a class="link-to-replies" href="99/1636073332.020400.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1636208665.022800">
        <div class="content">
          <div class="summary">
            <div class="user">write2mark1</div>
            <div class="date"><a class="date" href="#message-1636208665.022800">2021-11-06 23:24:25 +0900</a></div>
          </div>
          <div class="description">@write2mark1 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1636257337.023000">
        <div class="content">
          <div class="summary">
            <div class="user">nekurai</div>
            <div class="date"><a class="date" href="#message-1636257337.023000">2021-11-07 12:55:37 +0900</a></div>
          </div>
          <div class="description">@nekurai has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1636443228.023600">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1636443228.023600">2021-11-09 16:33:48 +0900</a></div>
          </div>
          <div class="description">GHC 9.0 の GHC API を使うと<br/><br/><pre>Left :: a %1 -&gt; Either a b</pre><br/>のように %1 が出てくるんですが、これ何でしたっけ？</div>
          <a class="link-to-replies" href="99/1636443228.023600.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1636493243.024800">
        <div class="content">
          <div class="summary">
            <div class="user">yuzu.kuri.027449</div>
            <div class="date"><a class="date" href="#message-1636493243.024800">2021-11-10 06:27:23 +0900</a></div>
          </div>
          <div class="description">@yuzu.kuri.027449 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1636592171.025900">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1636592171.025900">2021-11-11 09:56:11 +0900</a></div>
          </div>
          <div class="description">GHC 9.0.1 ですが、Linuxではうまく動いています。<br/>しかし、macOSだと warp や quic の cabal test が失敗するようになりました。<br/>将来 GHC 9.0.2 となるブランチの先頭で試してみたいのですが、Intel macOS 用の GHC nightly build ってどこかに落ちていませんか？<br/>gitlab を探してみたのですが、見つかりませんでした。</div>
          <a class="link-to-replies" href="99/1636592171.025900.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1636653798.030500">
        <div class="content">
          <div class="summary">
            <div class="user">benzene.chlorobenzene</div>
            <div class="date"><a class="date" href="#message-1636653798.030500">2021-11-12 03:03:18 +0900</a></div>
          </div>
          <div class="description">stackのLTS18.16で、muslを静的リンクしたaesonに依存するバイナリを作ろうとして躓いています。<br/>再現手順：<br/>1. <a href='https://qiita.com/lambda_funtaro/items/5ac47f83616f8c07d4db'>https://qiita.com/lambda_funtaro/items/5ac47f83616f8c07d4db</a> の通りに設定する（stack.yaml中のdockerのrepoはutdemir/ghc-musl:v22-ghc8107にする）<br/>2. package.yamlのdependenciesにaesonを加える<br/>3. <code>stack build --docker</code>する<br/>4. ビルドに失敗する↓<br/><pre>Error: While constructing the build
plan, the following exceptions were
encountered:

In the dependencies
for hashable-1.3.0.0:
    integer-gmp must
                match &gt;=0.4 &amp;&amp; &lt;1.1, but
                the stack configuration
                has no specified
                version  (latest
                matching version
                is 1.0.3.0)
needed due to test-0.1.0.0
               -&gt; hashable-1.3.0.0

In the dependencies
for integer-logarithms-1.0.3.1:
    integer-gmp must match &lt;1.1, but the
                stack configuration has
                no specified version
                (latest matching version
                is 1.0.3.0)
needed due to test-0.1.0.0
               -&gt; integer-logarithms-1.0.3.1

In the dependencies
for scientific-0.3.7.0:
    integer-gmp needed, but the stack
                configuration has no
                specified version
                (latest matching version
                is 1.0.3.0)
needed due to test-0.1.0.0
               -&gt; scientific-0.3.7.0

Some different approaches to resolving
this:

  * Recommended action: try adding the
    following to your extra-deps
    in (略)/stack.yaml:

- integer-gmp-1.0.3.0@sha256:514e81647473ce380cf1814821664c0dcedc2801ad8dbf41b19a10f916e1cc75,2138

Plan construction failed.</pre></div>
          <a class="link-to-replies" href="99/1636653798.030500.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1636764294.036400">
        <div class="content">
          <div class="summary">
            <div class="user">benzene.chlorobenzene</div>
            <div class="date"><a class="date" href="#message-1636764294.036400">2021-11-13 09:44:54 +0900</a></div>
          </div>
          <div class="description">stackのpackage.yamlのexecutables欄に指定することで異なるオプションを持つ複数のバイナリを生成することができますが、そのうちのいくつかをデフォルトでは生成されないようにすることってできますか</div>
          <a class="link-to-replies" href="99/1636764294.036400.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1636884480.038100">
        <div class="content">
          <div class="summary">
            <div class="user">yousukeman3</div>
            <div class="date"><a class="date" href="#message-1636884480.038100">2021-11-14 19:08:00 +0900</a></div>
          </div>
          <div class="description">@yousukeman3 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1637734725.045200">
        <div class="content">
          <div class="summary">
            <div class="user">muratomo.0205</div>
            <div class="date"><a class="date" href="#message-1637734725.045200">2021-11-24 15:18:45 +0900</a></div>
          </div>
          <div class="description">質問失礼します．<br/>f(g(x)) はf.g $ x と表されますが，関数を連ねてしてデータを変換するという思考プロセスであれば，g.fのほうが自然かと思います．シンボルを読むのは左から右なのに，関数適用の順序を追って行くのは右から左に読むのは不自然です．UXINコマンドのパイプの思考に侵され過ぎているだけでしょうか?<br/>ただ，この仕様を変更しただけでは，今度は前置記法から来る違和感が発生するとは思います．<br/><br/>既出の議論であれば申し訳ございません．</div>
          <a class="link-to-replies" href="99/1637734725.045200.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1637749615.051900">
        <div class="content">
          <div class="summary">
            <div class="user">mail741</div>
            <div class="date"><a class="date" href="#message-1637749615.051900">2021-11-24 19:26:55 +0900</a></div>
          </div>
          <div class="description">@mail741 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1638084178.053300">
        <div class="content">
          <div class="summary">
            <div class="user">ose20dive</div>
            <div class="date"><a class="date" href="#message-1638084178.053300">2021-11-28 16:22:58 +0900</a></div>
          </div>
          <div class="description">@ose20dive has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1638331843.054000">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1638331843.054000">2021-12-01 13:10:43 +0900</a></div>
          </div>
          <div class="description">pattern synonyms は便利なんですが、以下の例では Show インスタンスが冗長に感じます。自動生成する方法はありませんか？<br/><br/><pre>newtype Error = Error Int
pattern InternalError = Error 1
instance Show Error where
  show (Error 1) = "InternalError"</pre></div>
          <a class="link-to-replies" href="99/1638331843.054000.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1638354464.055200">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1638354464.055200">2021-12-01 19:27:44 +0900</a></div>
          </div>
          <div class="description">これと等価なことをHaskellでやる方法ってありますか？<br/><a href='https://qiita.com/yosuke_furukawa/items/ec30f619166cb8090a09'>https://qiita.com/yosuke_furukawa/items/ec30f619166cb8090a09</a></div>
          <a class="link-to-replies" href="99/1638354464.055200.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1638601411.057200">
        <div class="content">
          <div class="summary">
            <div class="user">neverbefore351</div>
            <div class="date"><a class="date" href="#message-1638601411.057200">2021-12-04 16:03:31 +0900</a></div>
          </div>
          <div class="description">@neverbefore351 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1638711222.057400">
        <div class="content">
          <div class="summary">
            <div class="user">akiraishiguro25</div>
            <div class="date"><a class="date" href="#message-1638711222.057400">2021-12-05 22:33:42 +0900</a></div>
          </div>
          <div class="description">@akiraishiguro25 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1638792128.057600">
        <div class="content">
          <div class="summary">
            <div class="user">xtanabe_1</div>
            <div class="date"><a class="date" href="#message-1638792128.057600">2021-12-06 21:02:08 +0900</a></div>
          </div>
          <div class="description">@xtanabe_1 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1639806628.058700">
        <div class="content">
          <div class="summary">
            <div class="user">yukimaterrace</div>
            <div class="date"><a class="date" href="#message-1639806628.058700">2021-12-18 14:50:28 +0900</a></div>
          </div>
          <div class="description">@yukimaterrace has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1639977076.058900">
        <div class="content">
          <div class="summary">
            <div class="user">bhgg.priv</div>
            <div class="date"><a class="date" href="#message-1639977076.058900">2021-12-20 14:11:16 +0900</a></div>
          </div>
          <div class="description">@bhgg.priv has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640130779.059100">
        <div class="content">
          <div class="summary">
            <div class="user">mitani.takamasa</div>
            <div class="date"><a class="date" href="#message-1640130779.059100">2021-12-22 08:52:59 +0900</a></div>
          </div>
          <div class="description">@mitani.takamasa has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640255700.059200">
        <div class="content">
          <div class="summary">
            <div class="user">ncaq</div>
            <div class="date"><a class="date" href="#message-1640255700.059200">2021-12-23 19:35:00 +0900</a></div>
          </div>
          <div class="description">Sum Typeに対するLensのフィールドを自動生成する方法について質問です。<br/>(多分日本語を含むのでバイナリ扱いされている)スニペットに詳細を書いてあるように、<br/><br/><pre>deriveFieldsForSumType ''HasBase ''ToyExpr</pre><br/>のように書いたら、<br/><br/><pre>instance HasBase ToyExpr Text where
  base = lens getter setter
    where getter (ToyExprToyInt x) = view base x
          getter (ToyExprToyStr x) = view base x

          setter (ToyExprToyInt x) y = toToyExpr $ set base y x
          setter (ToyExprToyStr x) y = toToyExpr $ set base y x</pre><br/>のようなコードが自動生成されると嬉しいなと思っています。<br/><br/>軽く探した所そういうライブラリは見当たらなかったので、<br/>自分で書こうとも思っていますが、<br/>Template Haskellはそんなに得意では無いので、<br/>既存のライブラリがあったり、<br/>そもそも他の方法を使えばボイラープレート書かなくても良いなどという指摘があれば欲しいと思っています。</div>
          <a class="link-to-replies" href="99/1640255700.059200.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1640473345.063600">
        <div class="content">
          <div class="summary">
            <div class="user">masaya.igarashi</div>
            <div class="date"><a class="date" href="#message-1640473345.063600">2021-12-26 08:02:25 +0900</a></div>
          </div>
          <div class="description">@masaya.igarashi has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640526502.063800">
        <div class="content">
          <div class="summary">
            <div class="user">ppdx999</div>
            <div class="date"><a class="date" href="#message-1640526502.063800">2021-12-26 22:48:22 +0900</a></div>
          </div>
          <div class="description">@ppdx999 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640592968.064000">
        <div class="content">
          <div class="summary">
            <div class="user">mochizuki-n</div>
            <div class="date"><a class="date" href="#message-1640592968.064000">2021-12-27 17:16:08 +0900</a></div>
          </div>
          <div class="description">@mochizuki-n has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640678102.064200">
        <div class="content">
          <div class="summary">
            <div class="user">daisuke.3889</div>
            <div class="date"><a class="date" href="#message-1640678102.064200">2021-12-28 16:55:02 +0900</a></div>
          </div>
          <div class="description">@daisuke.3889 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640688275.064400">
        <div class="content">
          <div class="summary">
            <div class="user">metroplexity</div>
            <div class="date"><a class="date" href="#message-1640688275.064400">2021-12-28 19:44:35 +0900</a></div>
          </div>
          <div class="description">@metroplexity has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640702922.064600">
        <div class="content">
          <div class="summary">
            <div class="user">jp0003menegi</div>
            <div class="date"><a class="date" href="#message-1640702922.064600">2021-12-28 23:48:42 +0900</a></div>
          </div>
          <div class="description">@jp0003menegi has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1640767554.064800">
        <div class="content">
          <div class="summary">
            <div class="user">jniaoju869</div>
            <div class="date"><a class="date" href="#message-1640767554.064800">2021-12-29 17:45:54 +0900</a></div>
          </div>
          <div class="description">@jniaoju869 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1641085373.065900">
        <div class="content">
          <div class="summary">
            <div class="user">takashi.ninjouji</div>
            <div class="date"><a class="date" href="#message-1641085373.065900">2022-01-02 10:02:53 +0900</a></div>
          </div>
          <div class="description">@takashi.ninjouji has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1641096858.071300">
        <div class="content">
          <div class="summary">
            <div class="user">cj.bc-sd</div>
            <div class="date"><a class="date" href="#message-1641096858.071300">2022-01-02 13:14:18 +0900</a></div>
          </div>
          <div class="description">HspecのExpectations(`shouldBe` とか)について質問です<br/>数値をテストする際に、浮動少数計算によって起きる僅かな誤差を取り除いてくれるExpectationってありますか...?<br/>今3次元ベクトルを回転行列で変換する関数を書いていて、そのテストをしたいのですが三角関数周りの誤差でテストが書けずにいます...<br/>例えば <code>cos (pi/2) </code>shouldBe` 0` は成功してほしいのですが失敗するなどします。<br/><br/>現在は、ある程度の誤差を無視する以下のような関数を作成してそれで判定をしているのですが、何かしら一般的な方法があったりしますでしょうか...?<br/><pre>almostEqual :: Float -&gt; Float -&gt; Bool
almostEqual a b = a+diff &gt;= b &amp;&amp; b &lt;= a+diff 
  where
    diff = 0.1 -- 無視してよい誤差の範囲を決めるよしなな数字、今は適当</pre><br/></div>
          <a class="link-to-replies" href="99/1641096858.071300.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1641308127.072700">
        <div class="content">
          <div class="summary">
            <div class="user">ito.yo16uh90616</div>
            <div class="date"><a class="date" href="#message-1641308127.072700">2022-01-04 23:55:27 +0900</a></div>
          </div>
          <div class="description">@ito.yo16uh90616 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1641713631.001900">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1641713631.001900">2022-01-09 16:33:51 +0900</a></div>
          </div>
          <div class="description">こんな感じの関数を書きたいのですが、型エラーの直し方が分かりません！<br/>（詳細なエラーをスレッドに貼ります）<br/><pre>liftToReader
  :: forall env m a. (MonadReader env m, MonadIO m)
  =&gt; (env -&gt; IO a) -&gt; m a
liftToReader f = reader $ \env -&gt;
  (liftIO :: IO a -&gt; m a) $ f env</pre></div>
          <a class="link-to-replies" href="99/1641713631.001900.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1641837822.005100">
        <div class="content">
          <div class="summary">
            <div class="user">benzene.chlorobenzene</div>
            <div class="date"><a class="date" href="#message-1641837822.005100">2022-01-11 03:03:42 +0900</a></div>
          </div>
          <div class="description">IOの正体はRealWorldに対する読み書きを表す(State# RealWorld -&gt; (# State# RealWorld, a #))だと聞いたのですが、RealWorldからの読み出しのみすることを表す(State# RealWorld -&gt; a)に対応する型はありますか？</div>
          <a class="link-to-replies" href="99/1641837822.005100.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1641949461.052000">
        <div class="content">
          <div class="summary">
            <div class="user">atdx2600</div>
            <div class="date"><a class="date" href="#message-1641949461.052000">2022-01-12 10:04:21 +0900</a></div>
          </div>
          <div class="description">@atdx2600 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1642116955.052200">
        <div class="content">
          <div class="summary">
            <div class="user">keito.oz.official</div>
            <div class="date"><a class="date" href="#message-1642116955.052200">2022-01-14 08:35:55 +0900</a></div>
          </div>
          <div class="description">@keito.oz.official has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1642117412.052400">
        <div class="content">
          <div class="summary">
            <div class="user">int5964</div>
            <div class="date"><a class="date" href="#message-1642117412.052400">2022-01-14 08:43:32 +0900</a></div>
          </div>
          <div class="description">@int5964 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1642135996.052600">
        <div class="content">
          <div class="summary">
            <div class="user">U02TL2WEM7H</div>
            <div class="date"><a class="date" href="#message-1642135996.052600">2022-01-14 13:53:16 +0900</a></div>
          </div>
          <div class="description">@U02TL2WEM7H has joined the channel</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/98.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
  </div>
</body>
</html>
