[
    {
        "ts": "1721482821.240169",
        "text": "関数モナドについて調べてみたのですが、理解できなかったので質問させてください。\n\n```instance Monad ((->) r) where\n    return = const\n    h >>= f = \\w -> f (h w) w```\nこれを使用したときに以下のようになると思います。\n```ghci> f = (+1) >>= \\a -> (+2) >>= \\b -> return (a+b)\nf :: Num b => b -> b\nghci> f 1\n5\nit :: Num b => b```\n上記の場合 `h w` は `(+1) 1` に置き換えられると考えています。\n同様に、`f (h w) w` を単純に置き換えると `(+2) ((+1) 1) 1` になってしまいますが\nおかしいのは理解できています。\n\nこれはどのように考えたらよいのでしょうか ?",
        "type": "message",
        "user": "U04MBBNV5QB"
    },
    {
        "ts": "1721522280.706079",
        "text": "どう展開したら正しくなるかまだ私自身分かってないですが、 `f` の定義のうち後半の `&gt;&gt;= \\b -&gt; return (a+b)` の部分を展開していないので `f` はそのように置き換えられないと思います。",
        "type": "message",
        "user": "U4LGTMTMK"
    },
    {
        "ts": "1721522561.544749",
        "text": "ああー、そうか。 `f` って識別子が二つあるから私が質問の意図を誤解してるかも。答えになってなかったらごめんなさい。",
        "type": "message",
        "user": "U4LGTMTMK"
    },
    {
        "ts": "1721524803.823159",
        "text": "<@U4LGTMTMK>\nありがとうございます。\n\nはい。Reader モナドであれば (h w) を引数に `f` から `(+2)` を取り出してそれが引数に適用されると素直に考えられるのですが、この場合はうまく適用して考えられませんでした。",
        "type": "message",
        "user": "U04MBBNV5QB"
    },
    {
        "ts": "1721526875.325199",
        "text": "（GHCiでの定義の）`f`には2つのバインド (`&gt;&gt;=`) があります。\nまず左のバインドで定義を使って置き換えると、`h`は `(+ 1)` に、（バインドの定義の）`f`は仮引数`a`を取るラムダ式です。\nいま`1`に（GHCiでの定義の）`f`を適用しているため、たしかに`h w`は`(+ 1) 1`に置き換わります。\n\n「同様に」のところを考えます。\nここまでで`f 1`は\n```   (\\a -&gt; (+ 2) &gt;&gt;= \\b -&gt; return (a + b)) ((+ 1) 1) 1\n--  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^```\nで、波線部分が（バインドの定義の）`f`だったところです。\nこれはセクション `(+ 2)` にはならないため、2つ目の置き換えがまずそうです。\n\n計算過程： <https://pastebin.com/vrDiUVkM>",
        "type": "message",
        "user": "U02DJEVKQ2Z"
    },
    {
        "ts": "1721533517.742799",
        "text": "<@U02DJEVKQ2Z>\n計算過程も作成していただき、理解しやすいです。\n\n2 つ目につながるところまで考慮しなければならないのですね。\n頂いた pastebin の図をもとに、理解できるように再度トライしてみます。\n\n丁寧な解説をありがとうございました。",
        "type": "message",
        "user": "U04MBBNV5QB"
    }
]