<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / atcoder-lang-updates #7</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / atcoder-lang-updates #7</h1>
    <div class="ui pagination menu">
      <a href="../../html/CL3AXB1AL/6.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1680152962.225539">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680152962.225539">2023-03-30 14:09:22 +0900</a></div>
          </div>
          <div class="description">追加提案，というか皆さまの意見を聞きたいです:<br/> <code>strict</code>  (<https://hackage.haskell.org/package/strict>): 基本的なデータ型 ( <code>Either</code> ,  <code>Maybe</code> , and pair from <code>base</code>,  <code>These</code> from <code>these</code> )のfield-strict version と baseに入ってる lazy IO の strict version を実装します． 元々transitive dependency に入ってて， <a href='https://haskell-jp.slack.com/archives/C014PGG641Z/p1678521681800639'>https://haskell-jp.slack.com/archives/C014PGG641Z/p1678521681800639</a> = <a href='https://haskell.jp/slack-log/html/C014PGG641Z/4.html#message-1678521681.800639'>https://haskell.jp/slack-log/html/C014PGG641Z/4.html#message-1678521681.800639</a> あたり見てもモチベーションはありそうな気がします．しかし，リンク先の会話の主題そのものはタプルなのですが，このパッケージの <code>Data.Strict.Tuple</code> はペア <code>Pair a b</code> しかサポートしてなくて，19項までのタプル( <code>T1</code> , <code>T2</code> , … , <code>T19</code> )をサポートしてる <code>strict-tuple</code>  (<https://hackage.haskell.org/package/strict-tuple>) はモジュール名が <code>Data.Tuple.Strict</code> でややこしい，というのがアレですね．</div>
        </div>
      </div>
      <div class="event" id="message-1680155886.899719">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1680155886.899719">2023-03-30 14:58:06 +0900</a></div>
          </div>
          <div class="description">話を複雑にするようで申し訳ないんですが、 <a href='http://h2.jaguarpaw.co.uk/posts/nested-strict-data/'>http://h2.jaguarpaw.co.uk/posts/nested-strict-data/</a> とかどうですか？<br/>多分 <a href='https://hackage.haskell.org/package/strict-wrapper-0.0.0.0'>https://hackage.haskell.org/package/strict-wrapper-0.0.0.0</a> がその実装のようです。</div>
        </div>
      </div>
      <div class="event" id="message-1680155928.276409">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1680155928.276409">2023-03-30 14:58:48 +0900</a></div>
          </div>
          <div class="description">引用頂いたスレッドの発言の時も本当はこれを挙げたかったんですけど、うまく探せなかったもので...</div>
        </div>
      </div>
      <div class="event" id="message-1680156325.696669">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156325.696669">2023-03-30 15:05:25 +0900</a></div>
          </div>
          <div class="description">あー，頭のいい実装だ．4項までのタプルしか実装がないのは残念ではありますが，結構便利そう．</div>
        </div>
      </div>
      <div class="event" id="message-1680156381.606969">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1680156381.606969">2023-03-30 15:06:21 +0900</a></div>
          </div>
          <div class="description">あまり利用もメンテも熱心にされてなさそうなのが惜しいんですけどね。すごくいいアイディアなのに。</div>
        </div>
      </div>
      <div class="event" id="message-1680156426.323509">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156426.323509">2023-03-30 15:07:06 +0900</a></div>
          </div>
          <div class="description">貫禄の Dependencies: <code>base &lt; 5</code></div>
        </div>
      </div>
      <div class="event" id="message-1680156692.120609">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156692.120609">2023-03-30 15:11:32 +0900</a></div>
          </div>
          <div class="description">こういうパッケージって「古く」はならなそうに見えるので入れるのにそんなにリスクはなさそうですが，無意味に入れると収拾がつかなくなりそうという理由だけで躊躇するところはあるんですよね…</div>
        </div>
      </div>
      <div class="event" id="message-1680156820.743719">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680156820.743719">2023-03-30 15:13:40 +0900</a></div>
          </div>
          <div class="description">でも Haskell の競プロ提出コードなんて bang がついてない変数を思い浮かべるのが難しいくらいですし，あったら結構嬉しそうなんだよな…</div>
        </div>
      </div>
      <div class="event" id="message-1680231036.259809">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680231036.259809">2023-03-31 11:50:36 +0900</a></div>
          </div>
          <div class="description"><code>strict-wrappers</code> については， unsafe な関数が注釈なしに含まれているので導入を見合わせようかなと思います．<https://haskell.jp/slack-log/html/C5666B6BB/103.html#message-1680184874.825459> = <a href='https://haskell-jp.slack.com/archives/C5666B6BB/p1680184874825459'>https://haskell-jp.slack.com/archives/C5666B6BB/p1680184874825459</a> でのログをご確認くだされば幸いです．</div>
        </div>
      </div>
      <div class="event" id="message-1680233986.982779">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680233986.982779">2023-03-31 12:39:46 +0900</a></div>
          </div>
          <div class="description"><code>strict</code> の <code>Data.Strict.Tuple</code> は <code>Pair a b</code> しかないですが <code>x :!: y :!: z</code> のようにできるのでそこまで不便ではないかもしれません。<br/>オンラインジャッジ的な対応としては <code>containers</code> にある <code>Utils.Containers.Internal.StrictPair</code> を使うという手もありますが <code>Show</code> にすらなっていなくて不便ですね</div>
        </div>
      </div>
      <div class="event" id="message-1680237192.269909">
        <div class="content">
          <div class="summary">
            <div class="user">ほげやま</div>
            <div class="date"><a class="date" href="#message-1680237192.269909">2023-03-31 13:33:12 +0900</a></div>
          </div>
          <div class="description">@ほげやま has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1680266406.952249">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680266406.952249">2023-03-31 21:40:06 +0900</a></div>
          </div>
          <div class="description">あー、とすると <code>strict</code> はだいぶ良さそうですか。メモリ上のレイアウトまで気にするなら <code>strict-tuple</code> を更に追加で入れるのも一応選択肢にはならないことは…ないのか？</div>
        </div>
      </div>
      <div class="event" id="message-1680272951.343829">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680272951.343829">2023-03-31 23:29:11 +0900</a></div>
          </div>
          <div class="description">あ，忘れてた．最適化をまともにperf取らずに神に祈るのが好きな私みたいな軟弱者には，`strict-containers`  (<https://hackage.haskell.org/package/strict-containers-0.2|https://hackage.haskell.org/package/strict-containers-0.2>) のデータ型のフィールドまでstrict flagがついた containers (+unordered-containers) 実装とか見せられるとちょっと気になってしまいます。<br/><br/><pre>data X = X !Int !Double
data Y = Y Int Double</pre><br/>を考えたときに、 <code>case x_value of X !a !b -&gt; ...</code> は <code>a</code>, <code>b</code> が評価されているかを判定するコードが不要だが、<br/><code>case y_value of Y !a !b -&gt; ...</code> において <code>y_value</code> のフィールドがあらゆる評価パスで評価済みだとしても、実行時に評価済みかどうかを判定するコードが消せない可能性がある、みたいなことを耳にするので…</div>
        </div>
      </div>
      <div class="event" id="message-1680690476.770539">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680690476.770539">2023-04-05 19:27:56 +0900</a></div>
          </div>
          <div class="description">Language Test Contestが2nd freeze (3/28)版に更新されました！<br/><br/>期待通り，次のコードをコードテストに投げると <code>cabal.project.freeze</code> ファイルを取ってこれました:<br/><br/><pre>import <http://System.IO|System.IO>

main :: IO ()
main = putStr =&lt;&lt; readFile "/judge/submission/cabal.project.freeze"</pre><br/>結果は <a href='https://gist.github.com/gksato/b7d0b18e9ef8be5762fef8717737e27b#file-4-cabal-project-freeze'>https://gist.github.com/gksato/b7d0b18e9ef8be5762fef8717737e27b#file-4-cabal-project-freeze</a> です．<br/><br/>あと，全exposed modulesのインポート (<https://gist.github.com/gksato/b7d0b18e9ef8be5762fef8717737e27b#file-3-imports-hs>) を投げても実行が通ることも確認できました！<br/><br/>今の所，次のfreezeの時には，<br/>• <code>extra</code> : 1.7.12 -&gt; 1.7.13<br/>• <code>strict</code> を追加<br/>• インストールコマンドとコンパイルコマンドにおいて，workdirの仕様が不明だったために必要だった余計なコマンド群を除去(参照: <a href='https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1835616968&amp;range=H67:I68'>https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1835616968&amp;range=H67:I68</a>)<br/>を確定で実施するつもりでおり，<br/>• <code>strict-tuple</code> の追加<br/>• <code>strict-containers</code> の追加<br/>については保留中です．</div>
        </div>
      </div>
      <div class="event" id="message-1680713459.208939">
        <div class="content">
          <div class="summary">
            <div class="user">cojna</div>
            <div class="date"><a class="date" href="#message-1680713459.208939">2023-04-06 01:50:59 +0900</a></div>
          </div>
          <div class="description">GHCについてくるライブラリ群で現環境では使えるが新環境では使えない状態のものがあるので対応しておきたいです<br/><pre>import Data.Binary () -- binary
import Data.Time () -- time
import System.Directory () -- directory
import System.FilePath () -- filepath
import System.Posix () -- unix
import System.Process () -- process
import Text.PrettyPrint () -- pretty

main=pure()</pre><br/></div>
          <a class="link-to-replies" href="7/1680713459.208939.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1680736340.027829">
        <div class="content">
          <div class="summary">
            <div class="user">gksato</div>
            <div class="date"><a class="date" href="#message-1680736340.027829">2023-04-06 08:12:20 +0900</a></div>
          </div>
          <div class="description">あーそれ，（競プロに関係あるかわかんなくて）入れるか迷ってたんですよね．入れる側に一票入ったので入れることにしましょう！</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/CL3AXB1AL/6.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
  </div>
</body>
</html>
