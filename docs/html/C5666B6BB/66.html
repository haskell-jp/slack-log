<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / questions #66</title><link rel="stylesheet" href="/slack-log/messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / questions #66</h1><div class="pager"><a href="/slack-log/html/C5666B6BB/65.html" class="pager__previous">Previous</a><a href="/slack-log/" class="pager__top">Top</a></div><div class="message_list"><div class="message" id="message-1564031792.030700"><div class="message__timestamp">2019-07-25<br/>14:16:32 +0900</div><div class="message__header">notogawa</div><div class="message__body">型の上で計算するだけで終わりにしていいのならそのように大概のことはできるんですが，今やろうとしているのは証明であり，値レベルで云々する(≒singletonsとかでゴニョゴニョする)必要があります．たとえば，<br/><pre>
sNatToNat' :: Sing n -&gt; Sing (ConvertNat n)
sNat'ToNat :: Sing (ConvertNat n) -&gt; Sing n
</pre><br/>みたいな部品が必要になると思いますが，コレを定義してやろうとすると正攻法では詰むと思います．</div></div><div class="message" id="message-1564183015.031300"><div class="message__timestamp">2019-07-27<br/>08:16:55 +0900</div><div class="message__header">shunkichi.sato</div><div class="message__body">@shunkichi.sato has joined the channel</div></div><div class="message" id="message-1564196017.031600"><div class="message__timestamp">2019-07-27<br/>11:53:37 +0900</div><div class="message__header">woodsondelhia88</div><div class="message__body">@woodsondelhia88 has joined the channel</div></div><div class="message" id="message-1564202852.031900"><div class="message__timestamp">2019-07-27<br/>13:47:32 +0900</div><div class="message__header">ogahiro0720</div><div class="message__body">@ogahiro0720 has joined the channel</div></div><div class="message" id="message-1564202948.032200"><div class="message__timestamp">2019-07-27<br/>13:49:08 +0900</div><div class="message__header">yama_aoi</div><div class="message__body">@yama_aoi has joined the channel</div></div><div class="message" id="message-1564202962.032500"><div class="message__timestamp">2019-07-27<br/>13:49:22 +0900</div><div class="message__header">cj.bc-sd</div><div class="message__body">@cj.bc-sd has joined the channel</div></div><div class="message" id="message-1564203079.032800"><div class="message__timestamp">2019-07-27<br/>13:51:19 +0900</div><div class="message__header">wuthering1118</div><div class="message__body">@wuthering1118 has joined the channel</div></div><div class="message" id="message-1564207277.033100"><div class="message__timestamp">2019-07-27<br/>15:01:17 +0900</div><div class="message__header">ULGDZNXS7</div><div class="message__body">@ULGDZNXS7 has joined the channel</div></div><div class="message" id="message-1564208415.033400"><div class="message__timestamp">2019-07-27<br/>15:20:15 +0900</div><div class="message__header">ULGE3QW5R</div><div class="message__body">@ULGE3QW5R has joined the channel</div></div><div class="message" id="message-1564213476.035800"><div class="message__timestamp">2019-07-27<br/>16:44:36 +0900</div><div class="message__header">lotz</div><div class="message__body">質問です :raising_hand:<br/>cassavaを使ってCSV をパースした結果をextensibleのRecordにしようとしてるのですが<br/><pre>
readCSV :: WrapForall Csv.FromField Vector xs =&gt; FilePath -&gt; IO (RecordOf Vector xs)
readCSV filepath = do
    csvBs &lt;- BL.readFile filepath
    case Csv.decode Csv.HasHeader csvBs :: Either String (Vector (Record xs)) of
        Left reason -&gt; error reason
        Right vs -&gt; undefined
</pre><br/>以下のような感じでカインドが合わないと怒られてしまいます…<br/><pre>
....hs:36:82: error:
    • Expected kind '[membership-0:Type.Membership.Internal.Assoc
                        k0 *]',
        but 'xs' has kind '[*]'
    • In the second argument of 'RecordOf', namely 'xs'
      In the first argument of 'IO', namely '(RecordOf Vector xs)'
      In the type signature:
        readCSV :: WrapForall Csv.FromField Vector xs =&gt;
                   FilePath -&gt; IO (RecordOf Vector xs)
   |
36 | readCSV :: WrapForall Csv.FromField Vector xs =&gt; FilePath -&gt; IO (RecordOf Vector xs)
   |   
</pre><br/>どなたか対処方法を教えていただけませんでしょうか :bow:</div></div><div class="message" id="message-1564213875.036200"><div class="message__timestamp">2019-07-27<br/>16:51:15 +0900</div><div class="message__header">lotz</div><div class="message__body">@igrep<br/><pre>
{-# LANGUAGE PolyKinds #-}
</pre><br/>試したけどできず…</div></div><div class="message" id="message-1564213935.036400"><div class="message__timestamp">2019-07-27<br/>16:52:15 +0900</div><div class="message__header">fumieval</div><div class="message__body"><code>WrapForall Csv.FromField Vector</code>がxsの種を <code>[*]</code> に固定する原因となっています。 <code>Forall (KeyValue KnownSymbol (Instance1 Csv.FromField Vector)) xs</code>としてはどうでしょう</div></div></div><div class="pager"><a href="/slack-log/html/C5666B6BB/65.html" class="pager__previous">Previous</a><a href="/slack-log/" class="pager__top">Top</a></div></body></html>