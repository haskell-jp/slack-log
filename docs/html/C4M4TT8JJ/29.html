<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / random #29</title><link rel="stylesheet" href="/messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / random #29</h1><div class="pager"><a href="/html/C4M4TT8JJ/28.html" class="pager__previous">Previous</a><a href="/" class="pager__top">Top</a><a href="/html/C4M4TT8JJ/30.html" class="pager__next">Next</a></div><div class="message_list"><div class="message" id="message-1541580006.083800"><div class="message__timestamp">2018-11-07<br/>17:40:06 +0900</div><div class="message__header">nobsun</div><div class="message__body">evalShow :: Int -&gt; Expr -&gt; String<br/>というのを実装してみました．値の近似列を指定した段数まで，または，確定するまで表示します．</div></div><div class="message" id="message-1541581558.084100"><div class="message__timestamp">2018-11-07<br/>18:05:58 +0900</div><div class="message__header">as_capabl</div><div class="message__body">@mizunashi-mana それは1/0が無限ループになるようにDivの定義を変えて辻褄合わせるしかないですね…</div></div><div class="message" id="message-1541581587.084500"><div class="message__timestamp">2018-11-07<br/>18:06:27 +0900</div><div class="message__header">as_capabl</div><div class="message__body"><a href='https://twitter.com/mandel59/status/736973612444311553'>https://twitter.com/mandel59/status/736973612444311553</a></div></div><div class="message" id="message-1541581625.084900"><div class="message__timestamp">2018-11-07<br/>18:07:05 +0900</div><div class="message__header">as_capabl</div><div class="message__body"><a href='https://twitter.com/mandel59/status/656001097899773952'>https://twitter.com/mandel59/status/656001097899773952</a></div></div><div class="message" id="message-1541581791.085200"><div class="message__timestamp">2018-11-07<br/>18:09:51 +0900</div><div class="message__header">as_capabl</div><div class="message__body">個人的にはdenotation、つまり式が抽象的に持つ値をvalueと呼ぶ立場は実はけっこう好きなんですが、ただ一般的なプログラマの感覚とずれる部分は間違いなくあるっぽいんですよね…</div></div><div class="message" id="message-1541581800.085400"><div class="message__timestamp">2018-11-07<br/>18:10:00 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">@as_capabl 停止するボトムにコンストラクタを割り当てることでも可能じゃないですかね?</div></div><div class="message" id="message-1541581830.085600"><div class="message__timestamp">2018-11-07<br/>18:10:30 +0900</div><div class="message__header">nobsun</div><div class="message__body">変更したLazy版は 1/0が無限ループに落るようになってます．:)</div></div><div class="message" id="message-1541581866.085800"><div class="message__timestamp">2018-11-07<br/>18:11:06 +0900</div><div class="message__header">as_capabl</div><div class="message__body">たとえば今回の場合、Iter Value'をvalueと呼んでしまうとcall-by-valueというタームが意味不明になってしまう</div></div><div class="message" id="message-1541582208.086000"><div class="message__timestamp">2018-11-07<br/>18:16:48 +0900</div><div class="message__header">as_capabl</div><div class="message__body">Porの定義は、何をfalseとするかの問題なので、あまり細かく考えてないです</div></div><div class="message" id="message-1541582475.086600"><div class="message__timestamp">2018-11-07<br/>18:21:15 +0900</div><div class="message__header">nobsun</div><div class="message__body">call-by-hogehoge はあんまり使いたくないというのが正直なところ，<br/>一般的な「imperative」プログラマの感覚とはずれるけど．．．<br/>(私はもはやimperativeな感覚を失なっているようで，declarativeな表現の方がしっくりきます)</div></div><div class="message" id="message-1541582941.086900"><div class="message__timestamp">2018-11-07<br/>18:29:01 +0900</div><div class="message__header">as_capabl</div><div class="message__body">新しいPorの定義だと、 <code>Por (Con 1) (Con 2)</code> と <code>Por (Let (...) (Con 1)) (Con 2)</code> が違う値になってしまうのが気持ち悪いかな…</div></div><div class="message" id="message-1541583252.087300"><div class="message__timestamp">2018-11-07<br/>18:34:12 +0900</div><div class="message__header">nobsun</div><div class="message__body">この場合は Por の意味は先に計算が終った方という意味なので，ありかなと思います．</div></div><div class="message" id="message-1541583407.087500"><div class="message__timestamp">2018-11-07<br/>18:36:47 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">まあ，最適化とか考えるときに問題にはなると思いますが，あくまでToyなのでそこは突っ込みませんでした</div></div><div class="message" id="message-1541583422.087700"><div class="message__timestamp">2018-11-07<br/>18:37:02 +0900</div><div class="message__header">nobsun</div><div class="message__body">もちろん，左のオペランドにすこしバイアスがありますが，</div></div><div class="message" id="message-1541583598.087900"><div class="message__timestamp">2018-11-07<br/>18:39:58 +0900</div><div class="message__header">nobsun</div><div class="message__body">Por は非決定性をもちこむことになるので，決定性があることが前提の最適化とは最悪の相性でしょうねぇ．</div></div><div class="message" id="message-1541583862.088100"><div class="message__timestamp">2018-11-07<br/>18:44:22 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">(かなり本題から外れる気がしますが)多分一番の問題はまともなequational reasoningが書けないことにあると思いますね(本来のporの定義であれば書けます)（なお， @as_capabl さんの方も書けなそう．あと，porがstrictじゃない(⊥ por ⊥ /= ⊥)のも気になる感じですね）．なので，今の定義だと幾つか嬉しい性質が壊れる気がします</div></div><div class="message" id="message-1541584870.088300"><div class="message__timestamp">2018-11-07<br/>19:01:10 +0900</div><div class="message__header">nobsun</div><div class="message__body">eval (Por bot bot)が停止しないのと，evalShow 20 (Por bot bot) =&gt;"⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,⊥,..."  なので多分 Por ⊥ ⊥ = ⊥になると思います．</div></div><div class="message" id="message-1541586437.088500"><div class="message__timestamp">2018-11-07<br/>19:27:17 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">あ，すいません勘違いでした． 想定してたのは Por (Div (Con 1) (Con 0)) (Div (Con 1) (Con 0)) みたいなやつなんですが，普通にこれは exception 吐くんですね．普通にstrictでした</div></div><div class="message" id="message-1541586543.088800"><div class="message__timestamp">2018-11-07<br/>19:29:03 +0900</div><div class="message__header">nobsun</div><div class="message__body">あれっ．いまのは，例外をはかないと思います．</div></div><div class="message" id="message-1541586598.089000"><div class="message__timestamp">2018-11-07<br/>19:29:58 +0900</div><div class="message__header">nobsun</div><div class="message__body"><a href='https://gist.github.com/nobsun/5b310dd4a397af624690b6ca4b0af2c8'>https://gist.github.com/nobsun/5b310dd4a397af624690b6ca4b0af2c8</a></div></div><div class="message" id="message-1541586762.089700"><div class="message__timestamp">2018-11-07<br/>19:32:42 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">あ， @as_capabl さんの方ので言っています．多分， @nobsun の方も問題ないと思いますね (ミスって， <a href='#C4M4TT8JJ'>random</a> にも投稿してしまったっっ)</div></div><div class="message" id="message-1541587119.090100"><div class="message__timestamp">2018-11-07<br/>19:38:39 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">一応補足ですが， @as_capabl さんの方で問題になりそうと思ったのは，<br/><pre>
&gt;&gt;&gt; eval $ Div (Con 1) (Con 0) `Por` Con 1
1
&gt;&gt;&gt; eval $ Div (Con 1) (Con 0) `Por` Div (Con 1) (Con 1)
*** Exception: divide by zero
</pre><br/>ですね</div></div><div class="message" id="message-1541594832.090400"><div class="message__timestamp">2018-11-07<br/>21:47:12 +0900</div><div class="message__header">blue271828</div><div class="message__body">@blue271828 has joined the channel</div></div><div class="message" id="message-1541633060.093400"><div class="message__timestamp">2018-11-08<br/>08:24:20 +0900</div><div class="message__header">as_capabl</div><div class="message__body">それも1/0が無限ループするようにすれば整合性がつきますが、それはそれとしてporの意味論とかはもう少し勉強してきます</div></div><div class="message" id="message-1541646268.093600"><div class="message__timestamp">2018-11-08<br/>12:04:28 +0900</div><div class="message__header">hiratara</div><div class="message__body">「高階な」って言葉が気になるのは私だけですかねえ・・・。 <code>MonadPlus m</code> であれば <code>m a</code> はモノイド、ならシンプルかつ正しい主張でいいんですけど。</div></div><div class="message" id="message-1541654179.094100"><div class="message__timestamp">2018-11-08<br/>14:16:19 +0900</div><div class="message__header">hexirp</div><div class="message__body">Monoid1みたいな？</div></div><div class="message" id="message-1541675509.094800"><div class="message__timestamp">2018-11-08<br/>20:11:49 +0900</div><div class="message__header">to</div><div class="message__body">@to has joined the channel</div></div><div class="message" id="message-1541735055.095000"><div class="message__timestamp">2018-11-09<br/>12:44:15 +0900</div><div class="message__header">nobsun</div><div class="message__body">私が勝手に意味を変えたPorは参照透明性を破壊します．</div></div><div class="message" id="message-1541735149.095200"><div class="message__timestamp">2018-11-09<br/>12:45:49 +0900</div><div class="message__header">nobsun</div><div class="message__body">というわけでまともなものではないです．勝手に意味を変えてすみません．:disappointed:</div></div><div class="message" id="message-1541754033.095600"><div class="message__timestamp">2018-11-09<br/>18:00:33 +0900</div><div class="message__header">husking_pimento_novel</div><div class="message__body">@husking_pimento_novel has joined the channel</div></div><div class="message" id="message-1541815982.096000"><div class="message__timestamp">2018-11-10<br/>11:13:02 +0900</div><div class="message__header">pkmcrb63</div><div class="message__body">@pkmcrb63 has joined the channel</div></div><div class="message" id="message-1541816933.096300"><div class="message__timestamp">2018-11-10<br/>11:28:53 +0900</div><div class="message__header">ykaneoka7</div><div class="message__body">@ykaneoka7 has joined the channel</div></div><div class="message" id="message-1541820564.096600"><div class="message__timestamp">2018-11-10<br/>12:29:24 +0900</div><div class="message__header">superhahnah</div><div class="message__body">@superhahnah has joined the channel</div></div><div class="message" id="message-1541821335.096900"><div class="message__timestamp">2018-11-10<br/>12:42:15 +0900</div><div class="message__header">tomotom16</div><div class="message__body">@tomotom16 has joined the channel</div></div><div class="message" id="message-1541827751.097200"><div class="message__timestamp">2018-11-10<br/>14:29:11 +0900</div><div class="message__header">m.nagashio.n618m</div><div class="message__body">@m.nagashio.n618m has joined the channel</div></div><div class="message" id="message-1541835753.097500"><div class="message__timestamp">2018-11-10<br/>16:42:33 +0900</div><div class="message__header">decimaltsukumo</div><div class="message__body">@decimaltsukumo has joined the channel</div></div><div class="message" id="message-1541836140.097800"><div class="message__timestamp">2018-11-10<br/>16:49:00 +0900</div><div class="message__header">dimension.sf</div><div class="message__body">@dimension.sf has joined the channel</div></div><div class="message" id="message-1541841473.098100"><div class="message__timestamp">2018-11-10<br/>18:17:53 +0900</div><div class="message__header">hanotch88</div><div class="message__body">@hanotch88 has joined the channel</div></div><div class="message" id="message-1541933304.098400"><div class="message__timestamp">2018-11-11<br/>19:48:24 +0900</div><div class="message__header">mihchang</div><div class="message__body">@mihchang has joined the channel</div></div><div class="message" id="message-1541988416.098600"><div class="message__timestamp">2018-11-12<br/>11:06:56 +0900</div><div class="message__header">fumieval</div><div class="message__body">賛成多数、反対意見はゼロだったので、当該チャンネルはアーカイブしました</div></div><div class="message" id="message-1542104066.099800"><div class="message__timestamp">2018-11-13<br/>19:14:26 +0900</div><div class="message__header">igrep</div><div class="message__body">:sorena: <a href='https://twitter.com/YoshikuniJujo/status/1062190741684838400'>https://twitter.com/YoshikuniJujo/status/1062190741684838400</a></div></div><div class="message" id="message-1542162155.100900"><div class="message__timestamp">2018-11-14<br/>11:22:35 +0900</div><div class="message__header">quantumular</div><div class="message__body">@quantumular has joined the channel</div></div><div class="message" id="message-1542200677.102100"><div class="message__timestamp">2018-11-14<br/>22:04:37 +0900</div><div class="message__header">kakkun61</div><div class="message__body">GHC か stack のバージョンが上がったせいなのか、Windows でこの手順で iconv がビルドできなくなっててしんどい<br/>resolver: lts-12.17<br/><a href='https://teratail.com/questions/102462#reply-157722'>https://teratail.com/questions/102462#reply-157722</a></div></div><div class="message" id="message-1542201302.102300"><div class="message__timestamp">2018-11-14<br/>22:15:02 +0900</div><div class="message__header">kakkun61</div><div class="message__body">GHC 8.2 から GHC の iconv 依存がなくなったのかな？</div></div><div class="message" id="message-1542203588.102500"><div class="message__timestamp">2018-11-14<br/>22:53:08 +0900</div><div class="message__header">kakkun61</div><div class="message__body"><pre>
stack exec -- pacman -S libiconv-devel
</pre><br/>して<br/><pre>
stack build --extra-include-dirs="$(stack path --programs)\msys2-20180531\usr\include" --extra-lib-dirs="$(stack path --programs)\msys2-20180531\usr\lib"
</pre><br/>でいけた</div></div><div class="message" id="message-1542204400.102700"><div class="message__timestamp">2018-11-14<br/>23:06:40 +0900</div><div class="message__header">kakkun61</div><div class="message__body">リンク時にエラーになった……<br/>&gt; `libiconv_open' に対する定義されていない参照です</div></div><div class="message" id="message-1542204740.102900"><div class="message__timestamp">2018-11-14<br/>23:12:20 +0900</div><div class="message__header">kakkun61</div><div class="message__body"><pre>
--- a/iconv.cabal
+++ b/iconv.cabal
@@ -26,7 +26,7 @@ library
   includes:        hsiconv.h
   include-dirs:    cbits
   c-sources:       cbits/hsiconv.c
-  if os(darwin) || os(freebsd)
+  if os(darwin) || os(freebsd) || os(windows)
     -- on many systems the iconv api is part of the standard C library
     -- but on some others we have to link to an external libiconv:
     extra-libraries: iconv
</pre><br/>で大丈夫っぽい</div></div><div class="message" id="message-1542204895.103200"><div class="message__timestamp">2018-11-14<br/>23:14:55 +0900</div><div class="message__header">kakkun61</div><div class="message__body">iconv って darcs 管理なんですけど PR とかどうすればいいんですかね？<br/>メールでパッチ？</div></div><div class="message" id="message-1542208892.103500"><div class="message__timestamp">2018-11-15<br/>00:21:32 +0900</div><div class="message__header">as_capabl</div><div class="message__body">ちょっとずれるかもしれませんが、Windowsでposix系ライブラリを使う場合、msysを別途インスコしてstackでskip-msysする手順の方が色々うまくいく印象があります <a href='http://fumieval.hatenablog.com/entry/2017/10/11/230117'>http://fumieval.hatenablog.com/entry/2017/10/11/230117</a></div></div><div class="message" id="message-1542209042.103800"><div class="message__timestamp">2018-11-15<br/>00:24:02 +0900</div><div class="message__header">as_capabl</div><div class="message__body">もう一つ蛇足ですが、窓まで考慮に入れるとiconvよりicuの方が良さそうという意見も <a href='https://twitter.com/as_capabl/status/783601389666643968'>https://twitter.com/as_capabl/status/783601389666643968</a></div></div></div><div class="pager"><a href="/html/C4M4TT8JJ/28.html" class="pager__previous">Previous</a><a href="/" class="pager__top">Top</a><a href="/html/C4M4TT8JJ/30.html" class="pager__next">Next</a></div></body></html>