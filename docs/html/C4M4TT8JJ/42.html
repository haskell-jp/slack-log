<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / random #42</title><link rel="stylesheet" href="/messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / random #42</h1><div class="pager"><a href="/html/C4M4TT8JJ/41.html" class="pager__previous">Previous</a><a href="/" class="pager__top">Top</a><a href="/html/C4M4TT8JJ/43.html" class="pager__next">Next</a></div><div class="message_list"><div class="message" id="message-1552441653.075700"><div class="message__timestamp">2019-03-13<br/>10:47:33 +0900</div><div class="message__header">igrep</div><div class="message__body">構わないですが、どういう立て付けにしましょう？<br/>まだHaskell-jpがなかった頃のお話ですし。<br/>このWikiの古いロゴとして使われていた、とかですかね？</div></div><div class="message" id="message-1552443187.078700"><div class="message__timestamp">2019-03-13<br/>11:13:07 +0900</div><div class="message__header">autotaker</div><div class="message__body">そうですね。ソースコードを改変するわけではないですね。自分の場合TypeApplicationsがあるときにパースエラーになるhlint のバグを踏んでハマりました。</div></div><div class="message" id="message-1552450687.079100"><div class="message__timestamp">2019-03-13<br/>13:18:07 +0900</div><div class="message__header">maoe</div><div class="message__body">質問の回答でなくて申し訳ないですが、このロゴかっこいいですね。</div></div><div class="message" id="message-1552477977.079500"><div class="message__timestamp">2019-03-13<br/>20:52:57 +0900</div><div class="message__header">chinsan514</div><div class="message__body">@chinsan514 has joined the channel</div></div><div class="message" id="message-1552545896.079900"><div class="message__timestamp">2019-03-14<br/>15:44:56 +0900</div><div class="message__header">masterq</div><div class="message__body">スタートHaskell第0回の時のためにトラビスさんが作ってくれた思い出があります。</div></div><div class="message" id="message-1552553990.080200"><div class="message__timestamp">2019-03-14<br/>17:59:50 +0900</div><div class="message__header">99fabianb</div><div class="message__body">@99fabianb has joined the channel</div></div><div class="message" id="message-1552635481.081100"><div class="message__timestamp">2019-03-15<br/>16:38:01 +0900</div><div class="message__header">kakkun61</div><div class="message__body">この2つの型クラスって表現できるものが似てるなーと感じてる。何が決定的に違うんですかね。<br/><pre>
class FD a b | a -&gt; b
class TF a where
  type T a
</pre><br/><a href='https://wandbox.org/permlink/hlCk0uyguUJpfGnM'>https://wandbox.org/permlink/hlCk0uyguUJpfGnM</a></div></div><div class="message" id="message-1552635760.081300"><div class="message__timestamp">2019-03-15<br/>16:42:40 +0900</div><div class="message__header">igrep</div><div class="message__body">たいていの場合（少なくとも型クラスに紐付いたものは）TypeFamiliesはFunctionalDependenciesで代用できるはずなので、その直感は間違ってないかと。</div></div><div class="message" id="message-1552637194.081600"><div class="message__timestamp">2019-03-15<br/>17:06:34 +0900</div><div class="message__header">koyama</div><div class="message__body">もともと(ghc6のころまで?) function dep. しかなかったところに、よりストレートな解法として type family が実装された、という流れなのかな、と理解しています</div></div><div class="message" id="message-1552638687.082000"><div class="message__timestamp">2019-03-15<br/>17:31:27 +0900</div><div class="message__header">as_capabl</div><div class="message__body">似たような事考えて違いを調べた事があったと思うんですが、すっきりしなかった記憶があります。<br/>個人的には、最初Type familiesでやってても、FunDepの方が推論しやすくて結局FunDepになってしまうパターンが多い感じです</div></div><div class="message" id="message-1552638970.082300"><div class="message__timestamp">2019-03-15<br/>17:36:10 +0900</div><div class="message__header">aiya000</div><div class="message__body">Swiftがextensionsあたりでの型引数を導入してない理由として、associated type families（相当のSwiftの機能）で代用できるから、という<br/>……のがあった気がする（気がする）</div></div><div class="message" id="message-1552639697.083100"><div class="message__timestamp">2019-03-15<br/>17:48:17 +0900</div><div class="message__header">as_capabl</div><div class="message__body">あとそういえば、推論については最近入ったInjectiveTypeFamiliesでだいぶ改善されているらしいので、試したい <a href='https://qiita.com/lotz/items/6c038698c8f04f57113a'>https://qiita.com/lotz/items/6c038698c8f04f57113a</a></div></div><div class="message" id="message-1552640044.083600"><div class="message__timestamp">2019-03-15<br/>17:54:04 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">injective type families でできなくて func deps でできる例を幾つか知っていますが，確か型検査は func deps より type families の方が相当速いため，最近は assoc type families の方を使う動きがあると聞きました (func deps は multi param クラスになってしまうのに対し， assoc type family を使ったクラスは single param で済むことも多いので)</div></div><div class="message" id="message-1552640092.083800"><div class="message__timestamp">2019-03-15<br/>17:54:52 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">(なんかそこらへんをまとめた記事を読んだ気がするんですが，思い出せない…)</div></div><div class="message" id="message-1552640576.084400"><div class="message__timestamp">2019-03-15<br/>18:02:56 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">とりあえず <a href='https://wiki.haskell.org/Functional_dependencies_vs._type_families'>https://wiki.haskell.org/Functional_dependencies_vs._type_families</a> が結構まとまってますね．<@U570660KX> さんと同じで，僕も type families をなるべく使おうとしてますが， assoc type families はインスタンスに複雑な制約を付けようとするとうまく解決できない場合があって func deps に流れちゃうことも多いですね</div></div><div class="message" id="message-1552643097.090800"><div class="message__timestamp">2019-03-15<br/>18:44:57 +0900</div><div class="message__header">a_kirisaki</div><div class="message__body">Extensible攻略wikiがエラー吐いとる…… <a href='https://wiki.hask.moe/'>https://wiki.hask.moe/</a></div></div><div class="message" id="message-1552643398.093400"><div class="message__timestamp">2019-03-15<br/>18:49:58 +0900</div><div class="message__header">nobsun</div><div class="message__body">GHCだと，変数識別子に日本語文字が使えたりするので，<br/>「小文字」ではじまる名前を勝手に，「大文字」ではない文字で始まる名前と脳内変換して，<br/>すっかりそのつもりだったのですが，hlintとかではparseエラーになる．<br/><pre>
Iden.hs:5:1: Error: Parse error
Found:
    import Data.Char
    
  &gt; あ :: Char
    あ = 'あ'
  

1 hint
</pre><br/>「なんだよhlint，プンプン」と思ってたんだけど，Haskell 2010を見直すと，<br/><pre>
varid	→	(small {small | large | digit | ' })⟨reservedid⟩
</pre><br/>となっている．small は unicode lowercase letter，large は uppercase letter or titlecase letterとあるので，<br/>hlintは正しい．申し訳けございません．hlint様:sweat:</div></div><div class="message" id="message-1552651168.093600"><div class="message__timestamp">2019-03-15<br/>20:59:28 +0900</div><div class="message__header">igrep</div><div class="message__body">@fumievalさーん！エラーメッセージからして、間違えてlocalhostにHTTPリクエストを送っちゃってるっぽいんですが、なんかミスった？</div></div><div class="message" id="message-1552652142.093900"><div class="message__timestamp">2019-03-15<br/>21:15:42 +0900</div><div class="message__header">fumieval</div><div class="message__body">apusが落ちてました…今起動しました。<br/>同じマシンでリバースプロキシとapusの両方が走っているのでlocalhostにリクエストを送っているのは意図的です</div></div><div class="message" id="message-1552652330.094100"><div class="message__timestamp">2019-03-15<br/>21:18:50 +0900</div><div class="message__header">fumieval</div><div class="message__body">ご迷惑おかけしました！</div></div><div class="message" id="message-1552658857.094500"><div class="message__timestamp">2019-03-15<br/>23:07:37 +0900</div><div class="message__header">ryenana</div><div class="message__body">@ryenana has joined the channel</div></div><div class="message" id="message-1552711087.095800"><div class="message__timestamp">2019-03-16<br/>13:38:07 +0900</div><div class="message__header">takenobu.hs</div><div class="message__body">GHCのGitLabマイグレーションに関して、どなたか、以下の操作を確認テストできる方、いますか？<br/>（Benさんが、ログインできるユーザーには、Wikiページを編集可能にしようと設定中です。）<br/><br/>確認方法は以下の通りです。<br/><br/>以下のページにアクセスします。<br/>（GitLabのアカウントでログインしてください。GitHubのアカウントでの認証も可能です。）<br/><a href='https://gitlab.haskell.org/ghc/ghc/wikis/home'>https://gitlab.haskell.org/ghc/ghc/wikis/home</a><br/><br/>その上で、"Page history"の右側に、"Edit"ボタンが表示されるかを確認して欲しいのです。<br/>（これまでは、ログインしても"Edit"ボタンが表示されなかったのです。）<br/><br/>もし試せた方（１人おられれば充分です）は、すみませんが、GitLabかGitHubのアカウント名込みで教えてください。<br/>必須ではないので、対応できる方がおられましたらお願いします。</div></div><div class="message" id="message-1552711482.096200"><div class="message__timestamp">2019-03-16<br/>13:44:42 +0900</div><div class="message__header">igrep</div><div class="message__body">Editボタン、出ませんね...<br/>アカウント名はいつもどおり igrep です。</div></div><div class="message" id="message-1552711650.096400"><div class="message__timestamp">2019-03-16<br/>13:47:30 +0900</div><div class="message__header">takenobu.hs</div><div class="message__body">素早い対応ありがとうございます！<br/>ついでに、"Page history"のボタンも押して見てもらえますか？<br/>履歴が表示されるか、表示されずに"403"の画面になってしますかを。</div></div><div class="message" id="message-1552711684.096600"><div class="message__timestamp">2019-03-16<br/>13:48:04 +0900</div><div class="message__header">igrep</div><div class="message__body">403ですね。。。 :disappointed:</div></div><div class="message" id="message-1552711774.096800"><div class="message__timestamp">2019-03-16<br/>13:49:34 +0900</div><div class="message__header">takenobu.hs</div><div class="message__body">確認ありがとうございます！<br/>Benさんにissueで伝えます。 igrepさんにもmention流れるようにしておきます:pray:</div></div><div class="message" id="message-1552712738.097200"><div class="message__timestamp">2019-03-16<br/>14:05:38 +0900</div><div class="message__header">momiimt</div><div class="message__body">@momiimt has joined the channel</div></div><div class="message" id="message-1552747810.097500"><div class="message__timestamp">2019-03-16<br/>23:50:10 +0900</div><div class="message__header">yki0311hiro</div><div class="message__body">@yki0311hiro has joined the channel</div></div><div class="message" id="message-1552766561.099100"><div class="message__timestamp">2019-03-17<br/>05:02:41 +0900</div><div class="message__header">yharuhi39</div><div class="message__body">おそらくですが、Developer権限でないと変更できなくて、(少なくとも現状は)無為に増やしたくはないのではないのでしょうか？</div></div><div class="message" id="message-1552778178.099700"><div class="message__timestamp">2019-03-17<br/>08:16:18 +0900</div><div class="message__header">igrep</div><div class="message__body"><blockquote>（Benさんが、ログインできるユーザーには、Wikiページを編集可能にしようと設定中です。）</blockquote><br/>とのことなので増やしたくないと言うことはないのでは...</div></div><div class="message" id="message-1552800384.100000"><div class="message__timestamp">2019-03-17<br/>14:26:24 +0900</div><div class="message__header">tom.lpsd</div><div class="message__body">@tom.lpsd has joined the channel</div></div><div class="message" id="message-1552802234.100300"><div class="message__timestamp">2019-03-17<br/>14:57:14 +0900</div><div class="message__header">misaki</div><div class="message__body">@misaki has joined the channel</div></div><div class="message" id="message-1552804021.100600"><div class="message__timestamp">2019-03-17<br/>15:27:01 +0900</div><div class="message__header">ma.efjay</div><div class="message__body">@ma.efjay has joined the channel</div></div><div class="message" id="message-1552827343.101000"><div class="message__timestamp">2019-03-17<br/>21:55:43 +0900</div><div class="message__header">takenobu.hs</div><div class="message__body">情報不足でした。 Benさんが、wikiの編集権限を緩めようとされています。（ログインしていれば編集可能に。）<br/>月曜日には、GitLabにそのためのパッチをあてるそうです。<br/><a href='https://mail.haskell.org/pipermail/ghc-devs/2019-March/017299.html'>https://mail.haskell.org/pipermail/ghc-devs/2019-March/017299.html</a></div></div><div class="message" id="message-1552880480.102200"><div class="message__timestamp">2019-03-18<br/>12:41:20 +0900</div><div class="message__header">igrep</div><div class="message__body">めっちゃ速いAho-Corasick法（文字列探索アルゴリズム）の実装を作った話（大分無理してる感ある<br/><a href='https://tech.channable.com/posts/2019-03-13-how-we-made-haskell-search-strings-as-fast-as-rust.html'>https://tech.channable.com/posts/2019-03-13-how-we-made-haskell-search-strings-as-fast-as-rust.html</a></div></div><div class="message" id="message-1552881317.102300"><div class="message__timestamp">2019-03-18<br/>12:55:17 +0900</div><div class="message__header">cutsea110</div><div class="message__body">404になったな <blockquote>Page History</blockquote></div></div><div class="message" id="message-1552892042.103500"><div class="message__timestamp">2019-03-18<br/>15:54:02 +0900</div><div class="message__header">a0</div><div class="message__body">@a0 has joined the channel</div></div><div class="message" id="message-1552902977.103800"><div class="message__timestamp">2019-03-18<br/>18:56:17 +0900</div><div class="message__header">yharuhi39</div><div class="message__body">そうこれ、Python以外比較されたコードを一切書いてないのはまずいですよね。そもそもPythonmもこのコードで実験したのか不明ですが。</div></div><div class="message" id="message-1552905956.104200"><div class="message__timestamp">2019-03-18<br/>19:45:56 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">もしよければ， GHC 8.6.3 / GHC 8.6.4 で以下のプロジェクトのビルドが通るか試していただけると嬉しいです<br/><a href='https://github.com/mizunashi-mana/maybreak-derivingvia'>https://github.com/mizunashi-mana/maybreak-derivingvia</a></div></div><div class="message" id="message-1552906431.104500"><div class="message__timestamp">2019-03-18<br/>19:53:51 +0900</div><div class="message__header">syocy</div><div class="message__body">GHC 8.6.3 (MacOS 10.13.6) ではビルドが通りませんでした。<br/><pre>
Build profile: -w ghc-8.6.3 -O1
src/TestSpace/PolyKinds.hs:11:47: error:
    • Expected kind ‘* -&gt; *’, but ‘m’ has kind ‘k -&gt; *’
    • In the first argument of ‘Functor’, namely ‘m’
      In the stand-alone deriving instance for
        ‘Functor m =&gt; Functor (T m)’
   |
11 | deriving via (ReaderT Int m) instance Functor m =&gt; Functor (T m)
   |
</pre></div></div><div class="message" id="message-1552906605.104900"><div class="message__timestamp">2019-03-18<br/>19:56:45 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">@syocy なるほど，ありがとうございます．ついでに， cabal new-freeze を実行してからもう一度試してもらえると嬉しいです</div></div><div class="message" id="message-1552906857.105100"><div class="message__timestamp">2019-03-18<br/>20:00:57 +0900</div><div class="message__header">syocy</div><div class="message__body"><code>cabal new-freeze</code> を実行してからリトライしましたが同じエラーメッセージで失敗しました。<br/>cabal.project.freeze<br/><pre>
constraints: any.base ==4.12.0.0,
             any.ghc-prim ==0.5.3,
             any.integer-gmp ==1.0.2.0,
             any.rts ==1.0,
             any.transformers ==0.5.5.0
</pre></div></div><div class="message" id="message-1552906946.105300"><div class="message__timestamp">2019-03-18<br/>20:02:26 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">@syocy まじですか… ありがとうございます</div></div><div class="message" id="message-1552909163.105500"><div class="message__timestamp">2019-03-18<br/>20:39:23 +0900</div><div class="message__header">syocy</div><div class="message__body">あ、すみません。README読まないでやっていました。READMEの2つ方法で再度試しましたがどのパターンでもエラーになりました。</div></div><div class="message" id="message-1552909862.105700"><div class="message__timestamp">2019-03-18<br/>20:51:02 +0900</div><div class="message__header">syocy</div><div class="message__body">@mizunashi-mana いろいろやっていたら結果が変わりました。完全版です(fishシェル)↓<br/><pre>
&gt; rm cabal.project.freeze ; and ghcup set 8.6.3 ; and rm -rf dist* ; and cabal new-build ; ghcup set 8.6.4 ; and rm -rf dist* ; and cabal new-build
  -&gt; 8.6.3 Error
  -&gt; 8.6.4 OK
&gt; cabal new-freeze ; and ghcup set 8.6.3 ; and rm -rf dist* ; and cabal new-build ; ghcup set 8.6.4 ; and rm -rf dist* ; and cabal new-build
  -&gt; 8.6.3 OK
  -&gt; 8.6.4 OK
</pre></div></div><div class="message" id="message-1552913728.105900"><div class="message__timestamp">2019-03-18<br/>21:55:28 +0900</div><div class="message__header">yharuhi39</div><div class="message__body">論点がずれるようで申し訳ないが、PolyKinds.hs のderivingを無くしてghciでソースを読んだ後にderivingをghciのプロンプトで書くと通りました。(GHC 8.6.3)<br/><br/>嘘言いました mに種注釈付けてました ソース改変すいません。</div></div><div class="message" id="message-1552918893.106200"><div class="message__timestamp">2019-03-18<br/>23:21:33 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">わざわざありがとうございます．freeze する際に， transformers のバージョンによってどっちもエラーになったり，OKになったりする感じがしますね．これは， cabal と GHC ，どっちに報告すればいいんだろう…</div></div><div class="message" id="message-1552919492.108400"><div class="message__timestamp">2019-03-18<br/>23:31:32 +0900</div><div class="message__header">koyama</div><div class="message__body">さいきん quora にあの毛の壁な人が出現してるようですね…　だいぶマトモそうな感じではあるんですけどあいかわらず細かいところであやしげな感じがします<br/><a href='https://jp.quora.com/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%A7%E8%A8%80%E3%81%86-%E5%89%AF%E4%BD%9C%E7%94%A8-%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%A7%E3%81%99%E3%81%8B-%E5%89%AF%E4%BD%9C%E7%94%A8%E3%81%8C/answers/126433034'>https://jp.quora.com/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%A7%E8%A8%80%E3%81%86-%E5%89%AF%E4%BD%9C%E7%94%A8-%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%A7%E3%81%99%E3%81%8B-%E5%89%AF%E4%BD%9C%E7%94%A8%E3%81%8C/answers/126433034</a></div></div><div class="message" id="message-1552919958.111400"><div class="message__timestamp">2019-03-18<br/>23:39:18 +0900</div><div class="message__header">yharuhi39</div><div class="message__body">transformers のバージョンですか。 ちょっと（Control.Monad.Trans.Readerの）ソース見てみたのですが、0.5.5.0から0.5.6.0 の変化でPolyKinds拡張が消えているのですがこれが影響しているってことはないですかね？</div></div><div class="message" id="message-1552920789.111900"><div class="message__timestamp">2019-03-18<br/>23:53:09 +0900</div><div class="message__header">mizunashi-mana</div><div class="message__body">なるほど，それかもですね． GHC 8.6.3 だと resolver が 0.5.5.0 だと判断しますが， GHC 8.6.4 だと resolver が 0.5.6.0 と判断する結果，このような動作になるんですね．freeze する場合はそのような変動が起きないので，バージョンによる違いが起きない感じっぽいですね．<br/><br/>なるほど，解決しました．ありがとうございます</div></div></div><div class="pager"><a href="/html/C4M4TT8JJ/41.html" class="pager__previous">Previous</a><a href="/" class="pager__top">Top</a><a href="/html/C4M4TT8JJ/43.html" class="pager__next">Next</a></div></body></html>