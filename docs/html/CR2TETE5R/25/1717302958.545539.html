<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / beginners #25 at 2024-06-02 13:35:58 +0900</title>
<link rel="stylesheet" href="../../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / beginners #25 at 2024-06-02 13:35:58 +0900</h1>
    <div class="ui pagination menu">
      <a href="../25.html" class="item">Back to beginners #25</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1717302958.545539">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717302958.545539">2024-06-02 13:35:58 +0900</a></div>
          </div>
          <div class="description">早速相談したいことが出たので、質問させて下さい:bow:<br/><code>stack new stack240529</code>というコマンドで新規プロジェクトを作成したのですが、<br/>新規作成したコードをVSCodeで開いたところ、<br/><code>./app/Main.hs</code>の3行目でimportエラーがでてしまっています。<br/>こちらの件、何か解決方法とかあるのでしょうか？<br/><br/>参考までに`stack`と`hls`はghcupというツールを使ってインストールしました。</div>
        </div>
      </div>
      <div class="event" id="message-1717303357.207069">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1717303357.207069">2024-06-02 13:42:37 +0900</a></div>
          </div>
          <div class="description"><code>app/Main.hs</code> はどんな内容で、具体的にどんなエラーメッセージが出ていますか？</div>
        </div>
      </div>
      <div class="event" id="message-1717303456.832859">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717303456.832859">2024-06-02 13:44:16 +0900</a></div>
          </div>
          <div class="description">すみません、画像を添付し忘れていました:man-bowing:<br/><br/><pre>Could not find module 'Lib'
It is not a module in the current program, or in any known package.not found</pre><br/>と出ています。</div>
        </div>
      </div>
      <div class="event" id="message-1717303644.305459">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1717303644.305459">2024-06-02 13:47:24 +0900</a></div>
          </div>
          <div class="description">Lib.hs と、 <code>stack240529.cabal</code> 、あるいは <code>package.yaml</code> というファイルが stack240529 フォルダーにあると思うので、それらの内容も見せてください。<br/> <code>Main.sh</code> についてはもういいですが、なるべくこういう時はスクリーンショットではなく直接ソースコードをコピペして貼り付けて頂けたほうが見やすいです。</div>
        </div>
      </div>
      <div class="event" id="message-1717303851.793919">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717303851.793919">2024-06-02 13:50:51 +0900</a></div>
          </div>
          <div class="description"></div>
        </div>
      </div>
      <div class="event" id="message-1717303888.993559">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717303888.993559">2024-06-02 13:51:28 +0900</a></div>
          </div>
          <div class="description"></div>
        </div>
      </div>
      <div class="event" id="message-1717304007.814699">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717304007.814699">2024-06-02 13:53:27 +0900</a></div>
          </div>
          <div class="description"><code>stack240529.cabal</code>と`package.yaml`を共有致します。<br/>今後質問する際はキャプチャではなくコードを貼り付けるようにします。<br/><br/>宜しくお願いいたします。</div>
        </div>
      </div>
      <div class="event" id="message-1717304117.066609">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1717304117.066609">2024-06-02 13:55:17 +0900</a></div>
          </div>
          <div class="description"><code>stack240529</code> ディレクトリーでターミナルを起動して、 <code>stack build</code> すると何が起こりますか？</div>
        </div>
      </div>
      <div class="event" id="message-1717304581.490519">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717304581.490519">2024-06-02 14:03:01 +0900</a></div>
          </div>
          <div class="description"><code>stack build</code><br/>の出力結果をお乗せします(一部、ソースの絶対パスが表示されている点がお見苦しくはございますが…:sweat:)<br/><pre>stack240529-0.1.0.0: unregistering (local file changes: src/Lib.hs)
stack240529> build (lib + exe)
Preprocessing library for stack240529-0.1.0.0..
Building library for stack240529-0.1.0.0..
[1 of 2] Compiling Lib [Source file changed]
Preprocessing executable 'stack240529-exe' for stack240529-0.1.0.0..
Building executable 'stack240529-exe' for stack240529-0.1.0.0..
[1 of 2] Compiling Main [Lib changed]
[3 of 3] Linking .stack-work/dist/x86_64-osx/ghc-9.6.5/build/stack240529-exe/stack240529-exe [Objects changed]
stack240529> copy/register
Installing library in /Users/k27c8/programming/haskell/trashes/stack240529/.stack-work/install/x86_64-osx/bd60a721f36c15ba72f8d53b5721206fd16e3350ae93c50f5546ebbc154023bd/9.6.5/lib/x86_64-osx-ghc-9.6.5/stack240529-0.1.0.0-9G2GUYl0sGoBeBlWIHWMjM
Installing executable stack240529-exe in /Users/k27c8/programming/haskell/trashes/stack240529/.stack-work/install/x86_64-osx/bd60a721f36c15ba72f8d53b5721206fd16e3350ae93c50f5546ebbc154023bd/9.6.5/bin
Registering library for stack240529-0.1.0.0..</pre><br/>なお`stack run`コマンドを実行したら、正常に動作するので、ビルドは正しく動いているようです:thinking_face:</div>
        </div>
      </div>
      <div class="event" id="message-1717304989.437249">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1717304989.437249">2024-06-02 14:09:49 +0900</a></div>
          </div>
          <div class="description">まだ <code>Main.hs</code> で同様のエラーは出てますか？</div>
        </div>
      </div>
      <div class="event" id="message-1717305074.979489">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717305074.979489">2024-06-02 14:11:14 +0900</a></div>
          </div>
          <div class="description">はい、未だVSCodeでエラーが起きます。<br/><br/>buildは通るのですがVSCode上では赤字が表示されるというのが今回の気になるところ…:thinking_face:</div>
        </div>
      </div>
      <div class="event" id="message-1717305670.779729">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1717305670.779729">2024-06-02 14:21:10 +0900</a></div>
          </div>
          <div class="description">うーん、単純にビルドができてないからだと思いましたが（私自身似たような経験があったので）、違う、と。分かりませんなぁ</div>
        </div>
      </div>
      <div class="event" id="message-1717306238.362059">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717306238.362059">2024-06-02 14:30:38 +0900</a></div>
          </div>
          <div class="description">もしかしたらバージョンの違いもありあすでしょうか:thinking_face:<br/>皆様はどのバージョンを使っていますか？<br/><br/>ちなみに自分は<br/>• ghc ・・・ 9.6.5<br/>• stack ・・・ 2.13.1<br/>• hls ・・・ 2.7.0.0<br/>です。</div>
        </div>
      </div>
      <div class="event" id="message-1717307083.494519">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1717307083.494519">2024-06-02 14:44:43 +0900</a></div>
          </div>
          <div class="description"><code>stack path --compiler-bin</code> と <code>which ghc-9.6.5</code> （あるいはWindowsであれば <code>gcm ghc-9.6.5</code> ）したらどんな結果が返ってきますか？<br/>:warning: こんなタイミングですがこれから外出するので少し返答遅れます。</div>
        </div>
      </div>
      <div class="event" id="message-1717307442.642169">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717307442.642169">2024-06-02 14:50:42 +0900</a></div>
          </div>
          <div class="description">こちらが結果になります<br/><code>stack path --compiler-bin</code> :<br/><pre>${HOME}/.stack/programs/x86_64-osx/ghc-9.6.5/bin</pre><br/><code>which ghc-9.6.5</code> :<br/><pre>${HOME}/.ghcup/bin/ghc-9.6.5</pre></div>
        </div>
      </div>
      <div class="event" id="message-1717312619.119179">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1717312619.119179">2024-06-02 16:16:59 +0900</a></div>
          </div>
          <div class="description">恐らく、ghcupがインストールしたGHC（ <code>PATH</code> に入っている方のGHC）とstackがインストールしたGHC両方があるせいで混乱しちゃってますね（関連: <a href='https://docs.haskellstack.org/en/stable/Stack_and_VS_Code/'>https://docs.haskellstack.org/en/stable/Stack_and_VS_Code/</a> ）。<br/>VS CodeがGHCupのGHCを使おうとして、stackはstackのGHCを使おうとしているせいで結果が食い違っているのではないかと思います。<br/>取りあえずの解決策としては、 <code>stack path --global-config</code> を実行するとstackの設定ファイルへのパスが出てくるので、そのファイルを編集して、<br/><pre>install-ghc: false
system-ghc: true</pre><br/>と付け加えてください。</div>
        </div>
      </div>
      <div class="event" id="message-1717315565.289949">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1717315565.289949">2024-06-02 17:06:05 +0900</a></div>
          </div>
          <div class="description">無事にエラーが解消されました:sob::sob::sob:<br/><br/>正確には`~/.stack/config.yaml`を編集するだけでは直らなかったのですが、<br/>以下の内容<br/><pre>cradle:
  stack:</pre><br/>の`hie.yaml` を追加することにより、解決しました(参考サイト→<https://qiita.com/ueki5/items/531b3012171927f4371f|Qiita>)。<br/><br/>大変ありがとうございました:man-bowing:</div>
        </div>
      </div>
      <div class="event" id="message-1717480879.766589">
        <div class="content">
          <div class="summary">
            <div class="user">nobsun</div>
            <div class="date"><a class="date" href="#message-1717480879.766589">2024-06-04 15:01:19 +0900</a></div>
          </div>
          <div class="description">ghcup を使って環境をととのえるのがやりやすいと思います。ghcup tui で各種のツールのバージョンなどが見えますので、調整すると比較的楽にツールの調整ができます。<br/>ただ、注意点があって、現時点では、stack new で stack.yaml に設定される resolver は、lts-22.24 で GHC 9.6.5 ですが、これがghcup で最初にインストールされる recommended つきの hls-2.7.0.0 ではサポートされません。<br/>ghcup tui を使って hls-2.8.0.0に切り替えるとGHC 9.6.5 がサポートされるようになります。<br/>また、タイミングによっては、hls の最新版あるいはrecommend版が、stackageの最新 lts がサポートするGHC のバージョンをサポートできていないことがありえます。その場合は、hlsを自分で調整してビルドするか、stack new  をつかって作成したプロジェクトのstack.yamlのresolverを調整する必要があります。<br/>(残念ながら、stackage にはまだ、9.10.1 のサポートがありません。9.10.1 をつかいたい場合は、stackではなくcabalを使う必要があります)<br/><br/>hie.yaml は hls を使うときに必要です。implicit-hie パッケージをインストールすると、.cabal ファイルから hie.yaml をよしなに生成してくれる gen-hie というコマンドがインストールされるので、それを使うのがお勧めです。以下のような感じで使っています。また、package.yaml を変更したときは、.cabalファイルを変更するために、stack build をやったあとに gen-hie > hie.yaml をやっておきます。<br/><pre>$ stack new hoge
$ cd hoge
$ gen-hie > hie.yaml</pre></div>
        </div>
      </div>
      <div class="event" id="message-1718008883.017139">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1718008883.017139">2024-06-10 17:41:23 +0900</a></div>
          </div>
          <div class="description">@nobsun さん、ご指摘大変ありがとうございます。<br/>ただ、返信に気づくのが大変遅れてしまい、申し訳ありません:man-bowing:<br/><br/>アドバイスの内容は以下の通りでしょうか？<br/>1. ghcupを使った方がよい<br/>2. hls-2.7.0.0からhls-2.8.0.0に切り替えた方がよい<br/>3. hie.yamlを作成する際はgen-hieというツールを使った方が良い<br/>1.に関しましては、ghcupを使ってstackやhlsを入れていることは、<br/>既にこのスレッドの最初で述べた通りです。<br/>2.に関しましてですが、試しにhlsのバージョンを2.8.0.0に切り替えたのですが、<br/>やはり同様のエラーが起きてしまいます。<br/>なお、<https://haskell-jp.slack.com/archives/CR2TETE5R/p1717315565289949?thread_ts=1717302958.545539&amp;cid=CR2TETE5R|こちら>と同じようににhie.yamlファイルを書き加えたらエラーが消えました。<br/>3.についてですが、gen-hieは`stack install`コマンドでinstall済みではありますが、実際には使っていなかったですね。。今後使うことにします。<br/><br/>以上、宜しくお願いいたします。</div>
        </div>
      </div>
      <div class="event" id="message-1718342186.649529">
        <div class="content">
          <div class="summary">
            <div class="user">nobsun</div>
            <div class="date"><a class="date" href="#message-1718342186.649529">2024-06-14 14:16:26 +0900</a></div>
          </div>
          <div class="description">stack build では問題ないが、VS Code で赤い波線が出るのはHLSがらみだと思われます。<br/>1. どの GHCのバージョンがどのHLSでサポートされているかを確認するには ghcup を使うのが楽。<br/>2. GHC-9.6.5 で使うのであれば、hls-2.8.0.0 でないとHLSのサポートが受けられない<br/>3. HLSのサポートを適切にうけるには hie.yaml を適切に設定する必要がある（適切なhlsのバージョンをインストールしただけでは上手くいかない）。適切な hie.yaml ためには、gen-hie を使うのが楽。<br/>というのが意図でした。判りにくい説明で申し訳ありませんでした。以下の簡単な記事を書きました。御笑覧ください。<br/><a href='https://zenn.dev/nobsun/articles/progenv-with-ghcup-stack-hls'>https://zenn.dev/nobsun/articles/progenv-with-ghcup-stack-hls</a></div>
        </div>
      </div>
      <div class="event" id="message-1718541050.021519">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1718541050.021519">2024-06-16 21:30:50 +0900</a></div>
          </div>
          <div class="description">@てぴか さん、今更で申し訳ないのですが、本件最終的に <code>hie.yaml</code> を作成することで解決した、とありますが、 <code>~/.stack/config.yaml</code> に<br/><pre>install-ghc: false
system-ghc: true</pre><br/>を追記した時点で、エラーメッセージに何か変化があったか覚えていますか？<br/><br/>というのも、私が予想した「ghcupがインストールしたGHCとstackがインストールしたGHCが両方あるせいで発生した」のが本当なのか確認して、記事にしようと考えています。今手元で再現ケースを作ろうと試みているのですが、予想が外れて徒労に終わる前に、念のためてぴかさんの環境でどうだったかを教えていただきたいです。もちろん覚えていればで構いません！</div>
        </div>
      </div>
      <div class="event" id="message-1719229419.472699">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719229419.472699">2024-06-24 20:43:39 +0900</a></div>
          </div>
          <div class="description">@igrep さん、slackをあまり開かいものでして、<br/>返信が遅れてしまい大変申し訳ありません:bow:<br/><br/><code>~/.stack/config.yaml</code> を追加した時点では特に変化はありませんでした。</div>
        </div>
      </div>
      <div class="event" id="message-1719231242.013159">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719231242.013159">2024-06-24 21:14:02 +0900</a></div>
          </div>
          <div class="description"><blockquote> 今手元で再現ケースを作ろうと試みているのですが、予想が外れて徒労に終わる前に、念のためてぴかさんの環境でどうだったかを教えていただきたいです。</blockquote>現在、自分はmacbook airを使っているのですが、<br/>この現象が自分の環境独自のものなのか気になったので、<br/>dockerのalpine上でX Window経由でVS Codeを開いてみました。<br/>そうしたら同様のエラーが起きました<br/>(dockerでの環境構築、苦労しました…:sob: )<br/><br/>もしよろしければ、そのDockerfileを共有いたしましょうか？</div>
        </div>
      </div>
      <div class="event" id="message-1719233481.120089">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1719233481.120089">2024-06-24 21:51:21 +0900</a></div>
          </div>
          <div class="description">おお、すみません、マジか！昨日自分のMacbook Airで調べた範囲では再現しなかったので、もうこの話は終わりにしようと思っていたのですが、そうなると少し気になります。<br/><a href='https://haskell-jp.slack.com/archives/CUPBC8WCE/p1719141192964919'>https://haskell-jp.slack.com/archives/CUPBC8WCE/p1719141192964919</a></div>
        </div>
      </div>
      <div class="event" id="message-1719240842.588829">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719240842.588829">2024-06-24 23:54:02 +0900</a></div>
          </div>
          <div class="description">少し待っててください、探してみます。。。</div>
        </div>
      </div>
      <div class="event" id="message-1719276298.259889">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1719276298.259889">2024-06-25 09:44:58 +0900</a></div>
          </div>
          <div class="description">@てぴか あの、もし随分前に書いたDockerfileで、諸々のバージョンも古いとしたら、別にいいですよ。<br/>:point_up: で引用した私の記録の通り、最新版ではどうやら発生しないであろうことは確認できているので。</div>
        </div>
      </div>
      <div class="event" id="message-1719309413.064219">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719309413.064219">2024-06-25 18:56:53 +0900</a></div>
          </div>
          <div class="description">@igrep<br/>試しにもう一度Dockerで環境構築を行ったところ、やはり再現しました。<br/>以下Dockerfileと手順を記載します。</div>
        </div>
      </div>
      <div class="event" id="message-1719309704.170009">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719309704.170009">2024-06-25 19:01:44 +0900</a></div>
          </div>
          <div class="description">1. VSCodeの本家サイト(→<https://code.visualstudio.com/Download|Link>)からvscode本体をあらかじめダウンロードし、`Dockerfile`と同じ階層に置く<br/>    a. Linux版をダウンロードすること<br/>    b. 今回は**.deb版を使用します<br/>2. `docker build . -t IMAGE_NAME`等のコマンドでDockerfileをビルドする<br/>3. Macを使っている場合、XQuartzなどのツールでXサーバーを立ち上げておき、`xhost + localhost`のコマンドを叩く<br/>4. 2.で作成したimageを`docker run -it --name MY_CONTAINER_NAME IMAGE_NAME bash`等のコマンドでコンテナを立ち上げる<br/>5. ghcupをインストール<br/>    a. インストール方法は本家サイトを参照(→<https://www.haskell.org/ghcup/|Link>)<br/>    b. (余談)Dockerfileにghcupのインストールコマンドも入れたかったが、『HLSを入れますか？』などの質問がinteractiveに来てしまいdockerのbuildが止まってしまうので、こればかりは手動でコマンドしました…<br/>6. ghcupコマンドでstackやhls等のツールを入れる<br/>    a. 一例ですが、自分は以下よう(recommended)にしました<br/>        ▪︎ ghc: 9.4.8<br/>        ▪︎ cabal: 3.10.3.0<br/>        ▪︎ hls: 2.7.0.0<br/>        ▪︎ stack: 2.15.5<br/>        ▪︎ ghcup: 0.1.22.0<br/>7. `~/.bashrc`をエディタ等で編集して`/root/.ghcup/bin`にパスを通す<br/>8. `stack new XXXX`で新しいプロジェクトを作る<br/>9. `code --no-sandbox --user-data-dir=/root/.vscode`でVSCodeを起動<br/>10. 9.で立ち上げたvscode上で <https://marketplace.visualstudio.com/items?itemName=mogeko.haskell-extension-pack> をインストール<br/>11. 「File」→「Preferences」→「Settings」でエディタの設定を開き、「Extensions」→「Haskell」で「Manage HLS」の項目をGHCupに変更<br/>12. vscodeで8. で作ったプロジェクトをvscode上で開く<br/>    a. その際に「○○をインストールしますか？」と出るので、素直に従う<br/>13. `XXXX/app/Main.hs`のimportの部分で赤字が表示される</div>
        </div>
      </div>
      <div class="event" id="message-1719309887.783709">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719309887.783709">2024-06-25 19:04:47 +0900</a></div>
          </div>
          <div class="description"><blockquote> dockerのalpine上でX Window経由でVS Codeを開いてみました。</blockquote>すみません、今見たらdebianでした:pleading_face:</div>
        </div>
      </div>
      <div class="event" id="message-1719310479.195159">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1719310479.195159">2024-06-25 19:14:39 +0900</a></div>
          </div>
          <div class="description">了解です。調べるのは次回のHaskell-jpもくもく会の時になるかと思いますが、やってみます。</div>
        </div>
      </div>
      <div class="event" id="message-1719737386.133859">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1719737386.133859">2024-06-30 17:49:46 +0900</a></div>
          </div>
          <div class="description"><@U075MF7TX8T> すみません、手元のWSL 2上のDocker上の環境で試しましたが、「全く同じ」と呼べるような状況は再現しませんでした。セットアップしていて気になったんですけど、該当のプロジェクトで *`stack build` が成功した上でVS Codeを再起動*した後も問題はなくなりませんでしたか？<br/><br/>というのも、該当のプロジェクトで `stack build` していない状態だと（発生した問題の違いこそあれ）、先週 macOS で実験した場合と今回試した場合いずれにおいても問題が発生したからです。<br/><br/>• macOSで実験した場合: てぴかさんと似た状況で「`XXXX/app/Main.hs`のimportの部分で赤字が表示される（ただしエラーメッセージはてぴかさんが最初にこのスレで報告した「Could not find module 'Lib' It is not a module in the current program, or in any known package.not found」ではなく「Cannot satisfy ...」で始まるものでした（正確なメッセージは忘れてしまいました。悪しからず）<br/>• WSL 2 + Dockerで実験した場合: VS Codeの左下の箇所で「Processing: 1/3」といった内容が表示され続ける。クリックして詳細を確認すると「Source: Haskell」なる処理で固まっているらしきことがわかる</div>
        </div>
      </div>
      <div class="event" id="message-1719737701.654479">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1719737701.654479">2024-06-30 17:55:01 +0900</a></div>
          </div>
          <div class="description">（すみません、前の発言を途中で送ってしまいました！）<br/><br/>いずれにしても、今回てぴかさんが最初に報告した問題とは別物ですし、私が懸念した「ghcupがインストールしたGHCとstackがインストールしたGHCが両方あるせいで発生する問題」とは無関係な、 <code>stack build</code> で解決できるもののではないかと思います。</div>
        </div>
      </div>
      <div class="event" id="message-1719738182.968169">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719738182.968169">2024-06-30 18:03:02 +0900</a></div>
          </div>
          <div class="description">@igrep<br/>すみません、環境構築及び再現の試みなど、大変ありがとうございました。<br/><br/>なるほど…承知いたしました。<br/><br/>少なくとも、自分は「Cannot satisfy ...」というエラーは一度も確認したことがないですね。。<br/>Dockerの上でも同様に`stack build`が成功した後も発生したと思います(少し確証がないので、後日確かめてた後にまた改めて報告致します)。<br/><br/>(仮想環境含め、自分のマシン上だけエラーが発生してしまうのも不思議ですね…:thinking_face:)</div>
        </div>
      </div>
      <div class="event" id="message-1719738490.187669">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1719738490.187669">2024-06-30 18:08:10 +0900</a></div>
          </div>
          <div class="description">:bow: あー、すみません、あと大事なことを忘れてました。Dockerfileをいじっているのでそれも共有しておきます。修正したのは、基本的にGHCupを自動でインストールするためだったりimageのサイズを減らすためだったりなので、基本的にやってることは変わらないはずです。何か気になる点があったら教えてください<br/><pre># To run GUI app on WSLg, you need to `docker run` with the following options:
# docker run -it --rm -v /tmp/.X11-unix:/tmp/.X11-unix -v /mnt/wslg:/mnt/wslg -e DISPLAY -e WAYLAND_DISPLAY -e XDG_RUNTIME_DIR -e PULSE_SERVER haskell-with-vs-code bash
# Ref. <https://stackoverflow.com/questions/73092750/how-to-show-gui-apps-from-docker-desktop-container-on-windows-11>

# And to run VS Code:
# code --no-sandbox --user-data-dir=/root/.vscode

FROM debian:bookworm-slim

RUN &lt;&lt;EOF
  set -eux
  apt-get update
  # GUI
  apt-get install -y ca-certificates libasound2 libatk-bridge2.0-0 libcairo2 curl libgtk-3-dev libgtk-4-dev libnss3 xdg-utils xserver-xorg x11-apps
  apt-get clean
EOF

RUN &lt;&lt;EOF
  set -eux
  mkdir /work
  cd /work

  # VS Code
  curl -L -o code_amd64.deb "<https://code.visualstudio.com/sha/download?build=stable&amp;os=linux-deb-x64>"
  dpkg -i code_amd64.deb

  # GHCup and etc.
  apt-get install -y libgmp-dev libncurses-dev libncurses5
  apt-get clean
  curl --proto '=https' --tlsv1.2 -sSf <https://get-ghcup.haskell.org> &gt; get-ghcup.sh
  chmod +x get-ghcup.sh
  ## To install GHCup etc. automateically:
  export BOOTSTRAP_HASKELL_NONINTERACTIVE=1
  ### Align with the versions てぴか told me
  export BOOTSTRAP_HASKELL_GHC_VERSION=9.4.8
  export BOOTSTRAP_HASKELL_CABAL_VERSION=3.10.3.0
  export BOOTSTRAP_HASKELL_INSTALL_HLS=1
  export BOOTSTRAP_HASKELL_ADJUST_BASHRC=1
  export SHELL=/bin/bash # To update PATH by ghcup
  ./get-ghcup.sh
  rm -r /work
EOF
ENV DONT_PROMPT_WSL_INSTALL=1
WORKDIR /root</pre></div>
        </div>
      </div>
      <div class="event" id="message-1719738611.124539">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1719738611.124539">2024-06-30 18:10:11 +0900</a></div>
          </div>
          <div class="description">読みやすさのためにGistにも置きました <a href='https://gist.github.com/igrep/1ad92875509f5ef84fa73c9c3c1ad3b8'>https://gist.github.com/igrep/1ad92875509f5ef84fa73c9c3c1ad3b8</a></div>
        </div>
      </div>
      <div class="event" id="message-1719738638.432819">
        <div class="content">
          <div class="summary">
            <div class="user">てぴか</div>
            <div class="date"><a class="date" href="#message-1719738638.432819">2024-06-30 18:10:38 +0900</a></div>
          </div>
          <div class="description">ありがとうございます！！！<br/>ghcupは手動でインストールする、という不便さに困っていたのですが、<br/>参考にさせて頂きます:astonished:</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../25.html" class="item">Back to beginners #25</a>
    </div>
  </div>
</body>
</html>
