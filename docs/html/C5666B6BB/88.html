<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / questions #88</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / questions #88</h1><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/87.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1594111362.101500"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1594111362.101500">2020-07-07&nbsp;17:42:42 +0900</a></div></div><div class="message__body description">aDestでMDをMの前に持ってきたらどうでしょうか</div></div></div><div class="message event" id="message-1594111566.102300"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1594111566.102300">2020-07-07&nbsp;17:46:06 +0900</a></div></div><div class="message__body description">ソートしたくないのですね見落としていました。</div></div></div><div class="message event" id="message-1594112462.110600"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date"><a class="date" href="#message-1594112462.110600">2020-07-07&nbsp;18:01:02 +0900</a></div></div><div class="message__body description">あとは[Parser Dest]で定義しておいてまとめてasum . map (&lt;* (char ‘=‘))するとか、あるいはラベルとParser Destの対のリストにしてsortするとかでしょうか。モバイルからなので見にくくてすみません。</div></div></div><div class="message event" id="message-1594113267.110900"><div class="content"><div class="summary"><div class="message__header user">t.mitsuchi3</div><div class="message__timestamp date"><a class="date" href="#message-1594113267.110900">2020-07-07&nbsp;18:14:27 +0900</a></div></div><div class="message__body description">パーズする対象にものすごく見覚えがあります！　「コンピュータシステムの理論と実装」ですね。</div></div></div><div class="message event" id="message-1594115538.111300"><div class="content"><div class="summary"><div class="message__header user">t.mitsuchi3</div><div class="message__timestamp date"><a class="date" href="#message-1594115538.111300">2020-07-07&nbsp;18:52:18 +0900</a></div></div><div class="message__body description">なるほど教科書の誘導に乗らずにつくってらっしゃるんですね。</div></div></div><div class="message event" id="message-1594115977.111500"><div class="content"><div class="summary"><div class="message__header user">t.mitsuchi3</div><div class="message__timestamp date"><a class="date" href="#message-1594115977.111500">2020-07-07&nbsp;18:59:37 +0900</a></div></div><div class="message__body description">ソートするしかなさそうですが、とはいえ実際には教科書120ページの表でAMDから逆順に並べるだけでOKではないでしょうか？</div></div></div><div class="message event" id="message-1594116262.111700"><div class="content"><div class="summary"><div class="message__header user">t.mitsuchi3</div><div class="message__timestamp date"><a class="date" href="#message-1594116262.111700">2020-07-07&nbsp;19:04:22 +0900</a></div></div><div class="message__body description">もしくは、単にA,M,Dからなる3文字以下の文字列としてパーズしてしまって、それを機械語に変換するときになんとかする、とか。</div></div></div><div class="message event" id="message-1594116322.112000"><div class="content"><div class="summary"><div class="message__header user">nobsun</div><div class="message__timestamp date"><a class="date" href="#message-1594116322.112000">2020-07-07&nbsp;19:05:22 +0900</a></div></div><div class="message__body description">Parser a 上の &lt;|&gt; 演算で合成されたパーザは、左オペランドのパーザがパーズに成功すると、右オペランドのパーザによるパーズを行わない（or パーズしても結果を捨てる)ように定義されているのではないでしょうか。だとすると、前者のようなコードにはならないと思います。古い記事ですが、<http://www.ipsj.or.jp/07editj/promenade/4702.pdf><br/>p.178 に少し言及している問題がおこっている思います。</div></div></div><div class="message event" id="message-1594116713.112400"><div class="content"><div class="summary"><div class="message__header user">t.mitsuchi3</div><div class="message__timestamp date"><a class="date" href="#message-1594116713.112400">2020-07-07&nbsp;19:11:53 +0900</a></div></div><div class="message__body description">個人的には「もしくは」と書いた方法でやっちゃいました。なぜならAMD を並び替えた ADM とかもぜんぶ有効にしたほうが、言語として親切だと思ったからです。</div></div></div><div class="message event" id="message-1594118202.112800"><div class="content"><div class="summary"><div class="message__header user">shunkichi.sato</div><div class="message__timestamp date"><a class="date" href="#message-1594118202.112800">2020-07-07&nbsp;19:36:42 +0900</a></div></div><div class="message__body description">@maoe<br/>ありがとうございます <code>asum</code> 試してみます<br/><br/>@t.mitsuchi3<br/>たしかにソートでできてしまうのですが<br/>なんというか <code>&lt;|&gt;</code> でつなげる順序に依存しない方法でいきたいのです<br/>AMDについてはこの並びしか許さない方針でいきます<br/><br/>@nobsun<br/>そうなんです<br/>なので各オペランドが <code>=</code> まで見るようにしないといけない<br/>そうすると冗長な記述になるのでどうしよう...というところです</div></div></div><div class="message event" id="message-1594121429.113700"><div class="content"><div class="summary"><div class="message__header user">shunkichi.sato</div><div class="message__timestamp date"><a class="date" href="#message-1594121429.113700">2020-07-07&nbsp;20:30:29 +0900</a></div></div><div class="message__body description">とりあえず<br/><pre>aDest = 
        M   &lt;$ "M"   &lt;* char '='
    &lt;|&gt; D   &lt;$ "D"   &lt;* char '='
    &lt;|&gt; MD  &lt;$ "MD"  &lt;* char '='</pre><br/>は<br/><pre>aDest = asum . map (&lt;* char '=') $
            [ M   &lt;$ "M"
            , D   &lt;$ "D"
            , MD  &lt;$ "MD"
            ]</pre><br/>と書けました</div></div></div><div class="message event" id="message-1594164690.114500"><div class="content"><div class="summary"><div class="message__header user">shunkichi.sato</div><div class="message__timestamp date"><a class="date" href="#message-1594164690.114500">2020-07-08&nbsp;08:31:30 +0900</a></div></div><div class="message__body description">さらにヘルパー演算子を入れて、だいぶスッキリしました<br/>ありがとうございました</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/87.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>