<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / questions #101</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / questions #101</h1>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/100.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1651396985.571669">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1651396985.571669">2022-05-01 18:23:05 +0900</a></div>
          </div>
          <div class="description">HLSはLSPの仕様にはないVSCode特有の機能は使わない（LSPの範囲内で機能を提供する）という方針なので、あとはクライアント側（VSCode / emacs / vim）がLSPをどうやってどの範囲までサポートしているか、ということが問題になってきますね</div>
        </div>
      </div>
      <div class="event" id="message-1651397083.857859">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1651397083.857859">2022-05-01 18:24:43 +0900</a></div>
          </div>
          <div class="description">VSCodeで eval や import まわりなどの薄字で出てくるアクションは LSP では Code Lens と呼ばれる機能なので、使っているクライアントで code lens をどう使うのかを調べればよさそうです </div>
        </div>
      </div>
      <div class="event" id="message-1651397309.169359">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1651397309.169359">2022-05-01 18:28:29 +0900</a></div>
          </div>
          <div class="description">codelens の踏み込んだ設定方法等は書いてないみたいですが、vim に限らず主要なエディタでの HLSの使い方は、こちらの公式ドキュメントに書かれていたりします<br/><a href='https://haskell-language-server.readthedocs.io/en/latest/configuration.html#vim-or-neovim'>https://haskell-language-server.readthedocs.io/en/latest/configuration.html#vim-or-neovim</a></div>
        </div>
      </div>
      <div class="event" id="message-1651413843.624429">
        <div class="content">
          <div class="summary">
            <div class="user">宮入徹也</div>
            <div class="date"><a class="date" href="#message-1651413843.624429">2022-05-01 23:04:03 +0900</a></div>
          </div>
          <div class="description">@宮入徹也 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1651764691.534079">
        <div class="content">
          <div class="summary">
            <div class="user">niro</div>
            <div class="date"><a class="date" href="#message-1651764691.534079">2022-05-06 00:31:31 +0900</a></div>
          </div>
          <div class="description">@niro has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1651771721.942629">
        <div class="content">
          <div class="summary">
            <div class="user">canalun</div>
            <div class="date"><a class="date" href="#message-1651771721.942629">2022-05-06 02:28:41 +0900</a></div>
          </div>
          <div class="description">@canalun has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1651856843.743369">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1651856843.743369">2022-05-07 02:07:23 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1651929516.288909">
        <div class="content">
          <div class="summary">
            <div class="user">原田勇大</div>
            <div class="date"><a class="date" href="#message-1651929516.288909">2022-05-07 22:18:36 +0900</a></div>
          </div>
          <div class="description">@原田勇大 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1652067574.934309">
        <div class="content">
          <div class="summary">
            <div class="user">soichi</div>
            <div class="date"><a class="date" href="#message-1652067574.934309">2022-05-09 12:39:34 +0900</a></div>
          </div>
          <div class="description">@soichi has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1652233019.822649">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1652233019.822649">2022-05-11 10:36:59 +0900</a></div>
          </div>
          <div class="description">module宣言のexportリストに(Cみたいに)余分なカンマを入れていいのは、いつからですか？ 普通のリストのリテラルには、余分なカンマは入れられませんね。。。</div>
        </div>
      </div>
      <div class="event" id="message-1652233401.259749">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1652233401.259749">2022-05-11 10:43:21 +0900</a></div>
          </div>
          <div class="description">Haskell 98 からですね <a href='https://www.sampou.org/haskell/report-revised-j/modules.html'>https://www.sampou.org/haskell/report-revised-j/modules.html</a></div>
        </div>
      </div>
      <div class="event" id="message-1652233415.103749">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1652233415.103749">2022-05-11 10:43:35 +0900</a></div>
          </div>
          <div class="description">それ以前がどうだったかは知らないです</div>
          <a class="link-to-replies" href="101/1652233415.103749.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1652233461.609789">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1652233461.609789">2022-05-11 10:44:21 +0900</a></div>
          </div>
          <div class="description">Git の diff を最小化するという観点では、 export 末尾にコンマ入れて良いのは理に適ってます</div>
        </div>
      </div>
      <div class="event" id="message-1652233905.691479">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1652233905.691479">2022-05-11 10:51:45 +0900</a></div>
          </div>
          <div class="description">export, import で出来るし、正直リストやレコードについても許してもいいのになと思いますよね。Dhall なんかだと、リストの頭（！）にも書けるようになっていて、デフォルトのフォーマッタでも長くなりすぎると先頭カンマ込みで揃えるようになっていたりします。</div>
        </div>
      </div>
      <div class="event" id="message-1652876687.880439">
        <div class="content">
          <div class="summary">
            <div class="user">宮川哲</div>
            <div class="date"><a class="date" href="#message-1652876687.880439">2022-05-18 21:24:47 +0900</a></div>
          </div>
          <div class="description">@宮川哲 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1653107260.187109">
        <div class="content">
          <div class="summary">
            <div class="user">Kai Ma</div>
            <div class="date"><a class="date" href="#message-1653107260.187109">2022-05-21 13:27:40 +0900</a></div>
          </div>
          <div class="description">@Kai Ma has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1653473368.183629">
        <div class="content">
          <div class="summary">
            <div class="user">kakkun61</div>
            <div class="date"><a class="date" href="#message-1653473368.183629">2022-05-25 19:09:28 +0900</a></div>
          </div>
          <div class="description">VS Code + Haskell 拡張 で HLS がうまく動いてくれてなくて困ってます……<br/>社のコードなので再現コードをすぐには提示できなくて申し訳ないんですが<br/>どの辺があやしい、拡張が悪い、HLS が悪い、ghcup が悪い程度のヒントでもありがたいです<br/>エラーメッセージはこんな<br/><pre>Found "/home/kazuki/Projects/Herp/xxx/hie.yaml" for "/home/kazuki/Projects/Herp/xxx/a"
Run entered for haskell-language-server-wrapper(haskell-language-server-wrapper) Version 1.7.0.0 x86_64 ghc-9.2.2
Current directory: /home/kazuki/Projects/Herp/xxx
Operating system: linux
Arguments: ["--lsp"]
Cradle directory: /home/kazuki/Projects/Herp/xxx
Cradle type: Stack

Tool versions found on the $PATH
cabal:		3.6.2.0
stack:		2.7.5
ghc:		8.10.7


Consulting the cradle to get project GHC version...
Project GHC version: 8.10.7
haskell-language-server exe candidates: ["haskell-language-server-8.10.7","haskell-language-server"]
Launching haskell-language-server exe at:/mnt/wslg/runtime-dir/ghcup-ghc-8.10.7_cabal-3.6.2.0_hls-1.7.0.0_stack-2.7.5/haskell-language-server-8.10.7
[0;31mGHC ABIs don't match![0m
[0;31m[0m
[0;31mExpected: Cabal-3.2.1.0:9aa4b9691119bc22fff33e788e96f702 array-0.5.4.0:84daffa90f3ca103cdf9f63b2e3dc42b base-4.14.3.0:87b3b0c5158079c42ae6b245bc931ed6 binary-0.8.8.0:e62e03d2b43d75f2961c02cb6b402737 bytestring-0.10.12.0:6f2aed7f354af02db1f34ddfd14594ee containers-0.6.5.1:f6a92e5d06a39627f4d849cd8046c0e7 deepseq-1.4.4.0:a521405ea2fb9cce775751ee169e6ef9 directory-1.3.6.0:0491e2b3e32242cb6c06688e9c6be0e4 exceptions-0.10.4:ce3e15c9ecb7c913c26e3d6fdf3be66e filepath-1.4.2.1:eff0de9acad3e94ecfae52309ec1d282 ghc-8.10.7:35e7e70f486b33bfa497ab256892777f ghc-boot-8.10.7:05969f5326bb9e37dc11361437706d9b ghc-boot-th-8.10.7:791b63caa8da80a80012db3b6e58055a ghc-compact-0.1.0.0:8adf73318a141525e030105b243fc1e4 ghc-heap-8.10.7:2804610a013fc492b7a5cd5f4cacc218 ghc-prim-0.6.1:0de0fc5f97fc1327fa41d908bc0fa855 ghci-8.10.7:634a2e7c4fab9b3ee3084b289675b14e haskeline-0.8.2:d7fd4f62a2c7e73f1a18d031688a46db hpc-0.6.1.0:564959df2eff2f2d904aeb5475adb4ec integer-gmp-1.0.3.0:bb2d3eb35c9ec3512ba0dc3a025970db libiserv-8.10.7:a97f6b549f5162fd72bd80f444ad4f07 mtl-2.2.2:3017f49a70971fbc4297d718565e8ee7 parsec-3.1.14.0:53a9bc89179ca1379954b82f23cb0dbc pretty-1.1.3.6:c92ac79323e26400a49f7d4a05f3177b process-1.6.13.2:d8142532fe09775f94825a7122f6cd66 rts-1.0.1: stm-2.5.0.1:38f5f695ace87ac7cc9de1da9a924ec2 template-haskell-2.16.0.0:4941fe1f7363fb0afdb0e1b147e8aca5 terminfo-0.4.1.4:1a507f657c3f50034ccb5a2a94bbb401 text-1.2.4.1:6a373ace8870d52a4e54b195189df9af time-1.9.3:3aaed41686a85275c46cf4501b593b8a transformers-0.5.6.2:b73c9cb722a768b9145a2c3d5591a225 unix-2.7.2.2:2e5d3292d05683cbaa7ef95d1a5f158c xhtml-3000.2.2.1:be8c6974cd731ef678793d3e44c7ca60[0m
[0;31mGot:      Cabal-3.2.1.0:13893203e3eec7f4e06ed8264d53ce36 array-0.5.4.0:84daffa90f3ca103cdf9f63b2e3dc42b base-4.14.3.0:87b3b0c5158079c42ae6b245bc931ed6 binary-0.8.8.0:e62e03d2b43d75f2961c02cb6b402737 bytestring-0.10.12.0:6f2aed7f354af02db1f34ddfd14594ee containers-0.6.5.1:f6a92e5d06a39627f4d849cd8046c0e7 deepseq-1.4.4.0:a521405ea2fb9cce775751ee169e6ef9 directory-1.3.6.0:0491e2b3e32242cb6c06688e9c6be0e4 exceptions-0.10.4:ce3e15c9ecb7c913c26e3d6fdf3be66e filepath-1.4.2.1:eff0de9acad3e94ecfae52309ec1d282 ghc-8.10.7:c712124be98090e22f04e441db18d011 ghc-boot-8.10.7:05969f5326bb9e37dc11361437706d9b ghc-boot-th-8.10.7:791b63caa8da80a80012db3b6e58055a ghc-compact-0.1.0.0:8adf73318a141525e030105b243fc1e4 ghc-heap-8.10.7:2804610a013fc492b7a5cd5f4cacc218 ghc-prim-0.6.1:0de0fc5f97fc1327fa41d908bc0fa855 ghci-8.10.7:634a2e7c4fab9b3ee3084b289675b14e haskeline-0.8.2:d7fd4f62a2c7e73f1a18d031688a46db hpc-0.6.1.0:564959df2eff2f2d904aeb5475adb4ec integer-gmp-1.0.3.0:bb2d3eb35c9ec3512ba0dc3a025970db libiserv-8.10.7:a97f6b549f5162fd72bd80f444ad4f07 mtl-2.2.2:3017f49a70971fbc4297d718565e8ee7 parsec-3.1.14.0:53a9bc89179ca1379954b82f23cb0dbc pretty-1.1.3.6:c92ac79323e26400a49f7d4a05f3177b process-1.6.13.2:d8142532fe09775f94825a7122f6cd66 rts-1.0.1: stm-2.5.0.1:38f5f695ace87ac7cc9de1da9a924ec2 template-haskell-2.16.0.0:4941fe1f7363fb0afdb0e1b147e8aca5 terminfo-0.4.1.4:1a507f657c3f50034ccb5a2a94bbb401 text-1.2.4.1:6a373ace8870d52a4e54b195189df9af time-1.9.3:3aaed41686a85275c46cf4501b593b8a transformers-0.5.6.2:b73c9cb722a768b9145a2c3d5591a225 unix-2.7.2.2:2e5d3292d05683cbaa7ef95d1a5f158c xhtml-3000.2.2.1:be8c6974cd731ef678793d3e44c7ca60[0m
[Error - 11:28:24 AM] Connection to server got closed. Server will not be restarted.</pre><br/>環境は<br/>• Windows 11 から WSL の Ubuntu にリモート接続した VS Code<br/>    ◦ Windows 11 21H2<br/>    ◦ Ubuntu 20.04.4<br/>    ◦ VS Code 1.67.2<br/>• direnv で nix を有効にしてるのが VS Code に反映されてるんだろうか<br/>    ◦ Nix 2.3.15</div>
          <a class="link-to-replies" href="101/1653473368.183629.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1653473454.611969">
        <div class="content">
          <div class="summary">
            <div class="user">Hiromi ISHII / mr_konn</div>
            <div class="date"><a class="date" href="#message-1653473454.611969">2022-05-25 19:10:54 +0900</a></div>
          </div>
          <div class="description"><pre>GHC ABIs don't match![0m</pre><br/>とあるので、バイナリが食い違ってそうですね。8.10.7 で起き得るのかちょっと微妙なところですが、HLS がビルドされている GHC と、WSL内で使われている GHC のバイナリが違うものになっているということだと思います。</div>
        </div>
      </div>
      <div class="event" id="message-1653474766.629849">
        <div class="content">
          <div class="summary">
            <div class="user">toyboot4e</div>
            <div class="date"><a class="date" href="#message-1653474766.629849">2022-05-25 19:32:46 +0900</a></div>
          </div>
          <div class="description">@toyboot4e has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1653615213.878569">
        <div class="content">
          <div class="summary">
            <div class="user">fet</div>
            <div class="date"><a class="date" href="#message-1653615213.878569">2022-05-27 10:33:33 +0900</a></div>
          </div>
          <div class="description">@fet has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1653628771.280259">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1653628771.280259">2022-05-27 14:19:31 +0900</a></div>
          </div>
          <div class="description">github action で CI を回しているんですが、GHC 9.0 や 9.2 って使えてますか？ ubuntu-latest だと apt-get が失敗するようです。</div>
          <a class="link-to-replies" href="101/1653628771.280259.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1653890195.754989">
        <div class="content">
          <div class="summary">
            <div class="user">kazup0n</div>
            <div class="date"><a class="date" href="#message-1653890195.754989">2022-05-30 14:56:35 +0900</a></div>
          </div>
          <div class="description">ある型クラス(Heap)をラップする型を定義して、それ自体も型クラスのインスタンスにしたいのですが、コンパイルエラーになってしまって悩んでいます。解決策や別実装のアプローチがあればおしえていただきたいです（詳細をスレに書きます）</div>
          <a class="link-to-replies" href="101/1653890195.754989.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1654040068.512889">
        <div class="content">
          <div class="summary">
            <div class="user">shinya sakae</div>
            <div class="date"><a class="date" href="#message-1654040068.512889">2022-06-01 08:34:28 +0900</a></div>
          </div>
          <div class="description">@shinya sakae has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1654090171.991489">
        <div class="content">
          <div class="summary">
            <div class="user"></div>
            <div class="date"><a class="date" href="#message-1654090171.991489">2022-06-01 22:29:31 +0900</a></div>
          </div>
          <div class="description">@ has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1654768614.326749">
        <div class="content">
          <div class="summary">
            <div class="user">hirofumikubo</div>
            <div class="date"><a class="date" href="#message-1654768614.326749">2022-06-09 18:56:54 +0900</a></div>
          </div>
          <div class="description">@hirofumikubo has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1654823514.643629">
        <div class="content">
          <div class="summary">
            <div class="user">kazu</div>
            <div class="date"><a class="date" href="#message-1654823514.643629">2022-06-10 10:11:54 +0900</a></div>
          </div>
          <div class="description">foldr と foldl で結果が異なるような場合ってありますか？</div>
          <a class="link-to-replies" href="101/1654823514.643629.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1654858454.488059">
        <div class="content">
          <div class="summary">
            <div class="user">U03JPVBR6NT</div>
            <div class="date"><a class="date" href="#message-1654858454.488059">2022-06-10 19:54:14 +0900</a></div>
          </div>
          <div class="description">@U03JPVBR6NT has joined the channel</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/C5666B6BB/100.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
  </div>
</body>
</html>
