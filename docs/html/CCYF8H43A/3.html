<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>haskell-jp / nix #3</title>
<link rel="stylesheet" href="../../main.css" type="text/css" media="screen">
</head>
<body>
  <div class="ui container">
    <h1>haskell-jp / nix #3</h1>
    <div class="ui pagination menu">
      <a href="../../html/CCYF8H43A/2.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
    <div class="ui feed">
      <div class="event" id="message-1624289049.004600">
        <div class="content">
          <div class="summary">
            <div class="user">riotintacos</div>
            <div class="date"><a class="date" href="#message-1624289049.004600">2021-06-22 00:24:09 +0900</a></div>
          </div>
          <div class="description">@riotintacos has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1624991448.004900">
        <div class="content">
          <div class="summary">
            <div class="user">kerf_cat</div>
            <div class="date"><a class="date" href="#message-1624991448.004900">2021-06-30 03:30:48 +0900</a></div>
          </div>
          <div class="description">@kerf_cat has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1628067901.000200">
        <div class="content">
          <div class="summary">
            <div class="user">aprilfoolsd1y</div>
            <div class="date"><a class="date" href="#message-1628067901.000200">2021-08-04 18:05:01 +0900</a></div>
          </div>
          <div class="description">@aprilfoolsd1y has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1629432276.001900">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1629432276.001900">2021-08-20 13:04:36 +0900</a></div>
          </div>
          <div class="description"><https://zimbatm.com/NixFlakes/><br/>nix flakesをつかうとキャッシュを置いているところ（substituters）もプロジェクトのファイル(flake.nix)に<br/>おけるのですね。便利ですね。<br/>キャッシュに限らずnixConfigに、いままでユーザー独自の設定（*nix*.confにおいていたもの）にいれていたものも<br/>flake.nixにいれられそうですね。</div>
        </div>
      </div>
      <div class="event" id="message-1629432550.002900">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1629432550.002900">2021-08-20 13:09:10 +0900</a></div>
          </div>
          <div class="description">一番使う用途として多いのは<br/><a href='https://github.com/input-output-hk/haskell.nix'>haskell.nix</a>をつかうときのキャッシュ（<https://hydra.iohk.io>）を追加することですね。<br/><a href='https://github.com/teto/quantum/blob/master/flake.nix#L5-L12'>https://github.com/teto/quantum/blob/master/flake.nix#L5-L12</a></div>
        </div>
      </div>
      <div class="event" id="message-1629432695.004000">
        <div class="content">
          <div class="summary">
            <div class="user">cohei</div>
            <div class="date"><a class="date" href="#message-1629432695.004000">2021-08-20 13:11:35 +0900</a></div>
          </div>
          <div class="description">haskell.nix をちょっと試すときにそれに気づいておお! となりました。flake 最高ですね!</div>
        </div>
      </div>
      <div class="event" id="message-1631438733.000300">
        <div class="content">
          <div class="summary">
            <div class="user">dophis3u05irechitrip</div>
            <div class="date"><a class="date" href="#message-1631438733.000300">2021-09-12 18:25:33 +0900</a></div>
          </div>
          <div class="description">@dophis3u05irechitrip has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1631683136.000500">
        <div class="content">
          <div class="summary">
            <div class="user">moonset20</div>
            <div class="date"><a class="date" href="#message-1631683136.000500">2021-09-15 14:18:56 +0900</a></div>
          </div>
          <div class="description">@moonset20 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1633146532.003400">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1633146532.003400">2021-10-02 12:48:52 +0900</a></div>
          </div>
          <div class="description">こんなcontribution guideを敷いているリポジトリーにPull requestを送ろうとしたんですが、Nixをインストールして <code>nix-shell</code> したところ、多くのパッケージを何時間もかけてコンパイルしようとして結局失敗してしまいました（申し訳なくも失敗の正確な原因はつかめてません）。こういうとき、そもそもこれだけのためにわざわざコンパイルするのが苦痛なんでなんとか省略する方法はないのでしょうか？Cachixというのを使えばいいんですかね？<br/><a href='https://github.com/NorfairKing/sydtest/blob/master/CONTRIBUTING.md'>https://github.com/NorfairKing/sydtest/blob/master/CONTRIBUTING.md</a></div>
          <a class="link-to-replies" href="3/1633146532.003400.html">... Replies ...</a>
        </div>
      </div>
      <div class="event" id="message-1633247938.008300">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1633247938.008300">2021-10-03 16:58:58 +0900</a></div>
          </div>
          <div class="description">本件続報です。cachixをインストールしようとして気づいたのですが、どうも当初からこちらの問題にハマっていたのではないかと思います。<br/><a href='https://discourse.nixos.org/t/nix-build-trying-to-build-basic-tools-for-all-packages-from-scratch/11097/2'>https://discourse.nixos.org/t/nix-build-trying-to-build-basic-tools-for-all-packages-from-scratch/11097/2</a><br/>で、解決策曰くconfiguration.nixの <code>nix.trustedUsers</code> という項目をいじれ、とのことなのですが、 <code>find / -name configuration.nix</code> してみても該当のファイルが見当たりませんでした。どこに置いてあるのでしょうか？</div>
        </div>
      </div>
      <div class="event" id="message-1633260425.009600">
        <div class="content">
          <div class="summary">
            <div class="user">igrep</div>
            <div class="date"><a class="date" href="#message-1633260425.009600">2021-10-03 20:27:05 +0900</a></div>
          </div>
          <div class="description">ようやくnix-shellを起動して必要なものをインストールできたのでCONTRIBUTING.md の指示どおりnix-shellで <code>stack test --pedantic</code> したところ、こんなエラーが<br/><pre> &lt;command line&gt;: /nix/store/ikl21vjfq900ccbqg1xasp83kadw6q8y-glibc-2.32-46/lib/libc.so.6: symbol _dl_fatal_printf version GLIBC_PRIVATE not defined in file ld-linux-x86-64.so.2 with link time reference</pre><br/>検索して見つかった <a href='https://stackoverflow.com/questions/49245547/version-glibc-private-not-defined-in-file-ld-linux-x86-64-so-2'>https://stackoverflow.com/questions/49245547/version-glibc-private-not-defined-in-file-ld-linux-x86-64-so-2</a> を読んだところ、元々DebianにインストールされていたglibcとNixが入れたglibcとで競合しているために発生しているようです。<br/>どなたか直し方に心当たりありませんか？</div>
        </div>
      </div>
      <div class="event" id="message-1635403335.000200">
        <div class="content">
          <div class="summary">
            <div class="user">gan13027830</div>
            <div class="date"><a class="date" href="#message-1635403335.000200">2021-10-28 15:42:15 +0900</a></div>
          </div>
          <div class="description">@gan13027830 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1635420702.000400">
        <div class="content">
          <div class="summary">
            <div class="user">addokoda</div>
            <div class="date"><a class="date" href="#message-1635420702.000400">2021-10-28 20:31:42 +0900</a></div>
          </div>
          <div class="description">@addokoda has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1635917508.000800">
        <div class="content">
          <div class="summary">
            <div class="user">k.marumaru524</div>
            <div class="date"><a class="date" href="#message-1635917508.000800">2021-11-03 14:31:48 +0900</a></div>
          </div>
          <div class="description">アドベントカレンダーを作ってみました<br/>よければご参加ください<br/><a href='https://qiita.com/advent-calendar/2021/nix'>https://qiita.com/advent-calendar/2021/nix</a></div>
        </div>
      </div>
      <div class="event" id="message-1636036255.001300">
        <div class="content">
          <div class="summary">
            <div class="user">me.nobv.io_slack</div>
            <div class="date"><a class="date" href="#message-1636036255.001300">2021-11-04 23:30:55 +0900</a></div>
          </div>
          <div class="description">@me.nobv.io_slack has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1638588037.001900">
        <div class="content">
          <div class="summary">
            <div class="user">k.marumaru524</div>
            <div class="date"><a class="date" href="#message-1638588037.001900">2021-12-04 12:20:37 +0900</a></div>
          </div>
          <div class="description">書きました<br/>誤りがあれば指摘していただけると嬉しいです<br/><a href='https://scrapbox.io/mrsekut-p/Nixを使うと何が嬉しいのか'>https://scrapbox.io/mrsekut-p/Nixを使うと何が嬉しいのか</a></div>
        </div>
      </div>
      <div class="event" id="message-1640018036.003200">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1640018036.003200">2021-12-21 01:33:56 +0900</a></div>
          </div>
          <div class="description">haskellとまったく関係ないですが書きました。<br/>よろしくお願いします。<br/><a href='https://qiita.com/junjihashimoto@github/items/67c951fbf90ef3592eaa'>https://qiita.com/junjihashimoto@github/items/67c951fbf90ef3592eaa</a></div>
        </div>
      </div>
      <div class="event" id="message-1641789755.000200">
        <div class="content">
          <div class="summary">
            <div class="user">ose20dive</div>
            <div class="date"><a class="date" href="#message-1641789755.000200">2022-01-10 13:42:35 +0900</a></div>
          </div>
          <div class="description">@ose20dive has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1643124766.636099">
        <div class="content">
          <div class="summary">
            <div class="user">gurin140</div>
            <div class="date"><a class="date" href="#message-1643124766.636099">2022-01-26 00:32:46 +0900</a></div>
          </div>
          <div class="description">@gurin140 has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1646761059.014999">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1646761059.014999">2022-03-09 02:37:39 +0900</a></div>
          </div>
          <div class="description">rules_nixpkgsは単にnix-buildを実行しているだけですかね。<br/>これ自体は分散ビルドには対応してなさそう？<br/><a href='https://github.com/tweag/rules_nixpkgs/blob/b39b20edc4637032bc65f6a93af888463027767c/nixpkgs/nixpkgs.bzl#L140-L227'>https://github.com/tweag/rules_nixpkgs/blob/b39b20edc4637032bc65f6a93af888463027767c/nixpkgs/nixpkgs.bzl#L140-L227</a></div>
        </div>
      </div>
      <div class="event" id="message-1646761647.692479">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1646761647.692479">2022-03-09 02:47:27 +0900</a></div>
          </div>
          <div class="description">bazel力がまったくないですが、`bazel query` で依存関係をしらべればどこが分散して実行されるかわかりますね。（たぶん）</div>
        </div>
      </div>
      <div class="event" id="message-1646761799.264169">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1646761799.264169">2022-03-09 02:49:59 +0900</a></div>
          </div>
          <div class="description">flakesには対応してないですね。<br/><a href='https://github.com/tweag/rules_nixpkgs/issues/127'>https://github.com/tweag/rules_nixpkgs/issues/127</a></div>
        </div>
      </div>
      <div class="event" id="message-1646793104.057509">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1646793104.057509">2022-03-09 11:31:44 +0900</a></div>
          </div>
          <div class="description">rules_nixpkgsはrules_haskellでつかうライブラリを事前にセットアップするためだけにつかう用途のようですね。<br/>nixpkgsのderivationはBUILDの中に記述できないみたいです。</div>
        </div>
      </div>
      <div class="event" id="message-1647539570.628689">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1647539570.628689">2022-03-18 02:52:50 +0900</a></div>
          </div>
          <div class="description"><a href='https://discourse.nixos.org/t/nix-2-7-0-released/18072'>https://discourse.nixos.org/t/nix-2-7-0-released/18072</a><br/><blockquote>•  Nix will now make some helpful suggestions when you mistype something on the command line. For instance, if you type <code>nix build nixpkgs#thunderbrd</code>, it will suggest <code>thunderbird</code>.</blockquote>地味に嬉しいですね。</div>
        </div>
      </div>
      <div class="event" id="message-1648205127.715999">
        <div class="content">
          <div class="summary">
            <div class="user">james.haydon</div>
            <div class="date"><a class="date" href="#message-1648205127.715999">2022-03-25 19:45:27 +0900</a></div>
          </div>
          <div class="description">@james.haydon has joined the channel</div>
        </div>
      </div>
      <div class="event" id="message-1649643502.948909">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1649643502.948909">2022-04-11 11:18:22 +0900</a></div>
          </div>
          <div class="description">hydra.iohk.ioがおそすぎるが、（indexのダウンロードとか、100kb/secくらいしかでてないような。）<br/><blockquote> [7/31 built, 1/11/62 copied (815.7/886.1 MiB), 77.2/154.7 MiB DL] fetching 01-index.tar.gz-at-2022-04-11T000000Z from <a href='https://hydra.iohk.io'>https://hydra.iohk.io</a></blockquote>自前でproxyをたててcloudflareをいれれば速くなりますかね。<br/><a href='https://github.com/input-output-hk/haskell.nix/issues/1406'>https://github.com/input-output-hk/haskell.nix/issues/1406</a></div>
        </div>
      </div>
      <div class="event" id="message-1649643634.821189">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1649643634.821189">2022-04-11 11:20:34 +0900</a></div>
          </div>
          <div class="description"></div>
        </div>
      </div>
      <div class="event" id="message-1649643693.018959">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1649643693.018959">2022-04-11 11:21:33 +0900</a></div>
          </div>
          <div class="description">nixでghc9.2をまともに使うにはhaskell.nixしかないのが辛い。</div>
        </div>
      </div>
      <div class="event" id="message-1649862177.897249">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1649862177.897249">2022-04-14 00:02:57 +0900</a></div>
          </div>
          <div class="description">ghc-9.2でhnixをつかうにはgithubにあるものをつかう必要があるが、<br/>cabal.projectがgit submodulesをうまく認識しない。</div>
        </div>
      </div>
      <div class="event" id="message-1649862253.705909">
        <div class="content">
          <div class="summary">
            <div class="user">junji.hashimoto</div>
            <div class="date"><a class="date" href="#message-1649862253.705909">2022-04-14 00:04:13 +0900</a></div>
          </div>
          <div class="description">自分のレポジトリにforkして、submoduleの部分を消せばいいのでしょうが。</div>
        </div>
      </div>
    </div>
    <div class="ui pagination menu">
      <a href="../../html/CCYF8H43A/2.html" class="item">Previous</a>
      <a href="../../" class="item">Top</a>
    </div>
  </div>
</body>
</html>
