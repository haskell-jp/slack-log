<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / general #11</title><link rel="stylesheet" href="../../messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / general #11</h1><div class="pager"><a href="../../html/C4LFB6DE0/10.html" class="pager__previous">Previous</a><a href="../../" class="pager__top">Top</a><a href="../../html/C4LFB6DE0/12.html" class="pager__next">Next</a></div><div class="message_list"><div class="message" id="message-1541316919.001800"><div class="message__timestamp">2018-11-04<br/>16:35:19 +0900</div><div class="message__header">koyojb</div><div class="message__body">@koyojb has joined the channel</div></div><div class="message" id="message-1541379618.002000"><div class="message__timestamp">2018-11-05<br/>10:00:18 +0900</div><div class="message__header">slackbot</div><div class="message__body">Reminder: <a href='https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233'>https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233</a></div></div><div class="message" id="message-1541418838.002400"><div class="message__timestamp">2018-11-05<br/>20:53:58 +0900</div><div class="message__header">yuya.gt</div><div class="message__body">@yuya.gt has joined the channel</div></div><div class="message" id="message-1541594832.002800"><div class="message__timestamp">2018-11-07<br/>21:47:12 +0900</div><div class="message__header">blue271828</div><div class="message__body">@blue271828 has joined the channel</div></div><div class="message" id="message-1541594977.003900"><div class="message__timestamp">2018-11-07<br/>21:49:37 +0900</div><div class="message__header">blue271828</div><div class="message__body">Haskell に興味を持って最近勉強をはじめました．<br/>よろしくお願いします:grinning:</div></div><div class="message" id="message-1541675509.005900"><div class="message__timestamp">2018-11-08<br/>20:11:49 +0900</div><div class="message__header">to</div><div class="message__body">@to has joined the channel</div></div><div class="message" id="message-1541754033.006300"><div class="message__timestamp">2018-11-09<br/>18:00:33 +0900</div><div class="message__header">husking_pimento_novel</div><div class="message__body">@husking_pimento_novel has joined the channel</div></div><div class="message" id="message-1541815982.006600"><div class="message__timestamp">2018-11-10<br/>11:13:02 +0900</div><div class="message__header">pkmcrb63</div><div class="message__body">@pkmcrb63 has joined the channel</div></div><div class="message" id="message-1541816933.007100"><div class="message__timestamp">2018-11-10<br/>11:28:53 +0900</div><div class="message__header">ykaneoka7</div><div class="message__body">@ykaneoka7 has joined the channel</div></div><div class="message" id="message-1541820564.007400"><div class="message__timestamp">2018-11-10<br/>12:29:24 +0900</div><div class="message__header">superhahnah</div><div class="message__body">@superhahnah has joined the channel</div></div><div class="message" id="message-1541821335.007700"><div class="message__timestamp">2018-11-10<br/>12:42:15 +0900</div><div class="message__header">tomotom16</div><div class="message__body">@tomotom16 has joined the channel</div></div><div class="message" id="message-1541827751.008000"><div class="message__timestamp">2018-11-10<br/>14:29:11 +0900</div><div class="message__header">m.nagashio.n618m</div><div class="message__body">@m.nagashio.n618m has joined the channel</div></div><div class="message" id="message-1541835753.008300"><div class="message__timestamp">2018-11-10<br/>16:42:33 +0900</div><div class="message__header">decimaltsukumo</div><div class="message__body">@decimaltsukumo has joined the channel</div></div><div class="message" id="message-1541836140.008600"><div class="message__timestamp">2018-11-10<br/>16:49:00 +0900</div><div class="message__header">dimension.sf</div><div class="message__body">@dimension.sf has joined the channel</div></div><div class="message" id="message-1541841472.008900"><div class="message__timestamp">2018-11-10<br/>18:17:52 +0900</div><div class="message__header">hanotch88</div><div class="message__body">@hanotch88 has joined the channel</div></div><div class="message" id="message-1541933304.010300"><div class="message__timestamp">2018-11-11<br/>19:48:24 +0900</div><div class="message__header">mihchang</div><div class="message__body">@mihchang has joined the channel</div></div><div class="message" id="message-1541984424.010500"><div class="message__timestamp">2018-11-12<br/>10:00:24 +0900</div><div class="message__header">slackbot</div><div class="message__body">Reminder: <a href='https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233'>https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233</a></div></div><div class="message" id="message-1542162155.011100"><div class="message__timestamp">2018-11-14<br/>11:22:35 +0900</div><div class="message__header">quantumular</div><div class="message__body">@quantumular has joined the channel</div></div><div class="message" id="message-1542320147.011400"><div class="message__timestamp">2018-11-16<br/>07:15:47 +0900</div><div class="message__header">yamanntyu22</div><div class="message__body">@yamanntyu22 has joined the channel</div></div><div class="message" id="message-1542327343.013600"><div class="message__timestamp">2018-11-16<br/>09:15:43 +0900</div><div class="message__header">yamanntyu22</div><div class="message__body">はじめまして、卒業研究で突然Hasekell-Yampaのプログラムを組むことになってわからないことだらけなのでここに入らせていただきました。バカみたいな質問をたくさんするかもしれませんがよろしくお願いします</div></div><div class="message" id="message-1542327812.017500"><div class="message__timestamp">2018-11-16<br/>09:23:32 +0900</div><div class="message__header">yamanntyu22</div><div class="message__body">そしていきなり質問なのですが今現在stackを用いてHaskell-Yampaの先輩のプログラムを実行しようとしているのですが前の先輩がUNIX環境で行っていたこともあり引き継ぎ資料が機能していません。どこがうまくいかないかというとFRP.Yampaなどのimportの処理がよくわからないのです。そもそもstackでHaskell-Yampaを用いたゲームの作成などができるかなど教えてほしいです</div></div><div class="message" id="message-1542328004.017600"><div class="message__timestamp">2018-11-16<br/>09:26:44 +0900</div><div class="message__header">yamanntyu22</div><div class="message__body">プログラムはこれが置いてあるだけでした</div></div><div class="message" id="message-1542331655.018000"><div class="message__timestamp">2018-11-16<br/>10:27:35 +0900</div><div class="message__header">lotz</div><div class="message__body"><a href='#C5666B6BB'>questions</a> というチャネルがあるので質問系はそちらで！</div></div><div class="message" id="message-1542332750.018200"><div class="message__timestamp">2018-11-16<br/>10:45:50 +0900</div><div class="message__header">lotz</div><div class="message__body">lts-12.18だと<br/><br/>package.yaml（一部）<br/><pre>
executables:
    ...
    dependencies:
    - GLUT
    - Yampa
</pre><br/><br/>stack.yaml<br/><pre>
extra-deps:
- Yampa-0.11
</pre><br/><br/>で動きましたー</div></div><div class="message" id="message-1542332802.018400"><div class="message__timestamp">2018-11-16<br/>10:46:42 +0900</div><div class="message__header">lotz</div><div class="message__body"><code>FRP.Yampa.Vector3</code><br/>が最新のYampa-0.13だと消えてるみたいで 0.11 にしないと動かなかったですね</div></div><div class="message" id="message-1542336715.018800"><div class="message__timestamp">2018-11-16<br/>11:51:55 +0900</div><div class="message__header">matsubara0507</div><div class="message__body">Yampa うちの研究室でもやってたなぁw</div></div><div class="message" id="message-1542339279.019000"><div class="message__timestamp">2018-11-16<br/>12:34:39 +0900</div><div class="message__header">igrep</div><div class="message__body"><blockquote><a href='#C5666B6BB'>questions</a> というチャネルがあるので質問系はそちらで！</blockquote><br/>一応（迷ってきた人が慌てて質問しちゃってもいいように）ここでも質問可、ということにはしています。<br/>（が、このルール紛らわしいのでやっぱり止めた方がいいのかな。。。<br/>「質問系はこちらで！」みたいな突っ込みを避けるためにこうしてるんですが、「『質問系はこちらで！』なんて突っ込みしなくていいよ」という突っ込みを毎回しているような。。。）</div></div><div class="message" id="message-1542339327.019300"><div class="message__timestamp">2018-11-16<br/>12:35:27 +0900</div><div class="message__header">lotz</div><div class="message__body">あ、そうだったんですね :sweat_drops: 失礼しました</div></div><div class="message" id="message-1542341440.019700"><div class="message__timestamp">2018-11-16<br/>13:10:40 +0900</div><div class="message__header">info693</div><div class="message__body">@info693 has joined the channel</div></div><div class="message" id="message-1542589221.020700"><div class="message__timestamp">2018-11-19<br/>10:00:21 +0900</div><div class="message__header">slackbot</div><div class="message__body">Reminder: <a href='https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233'>https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233</a></div></div><div class="message" id="message-1542682272.021000"><div class="message__timestamp">2018-11-20<br/>11:51:12 +0900</div><div class="message__header">h.hashiba.rkt</div><div class="message__body">@h.hashiba.rkt has joined the channel</div></div><div class="message" id="message-1542785814.021500"><div class="message__timestamp">2018-11-21<br/>16:36:54 +0900</div><div class="message__header">jeedo</div><div class="message__body">@jeedo has joined the channel</div></div><div class="message" id="message-1542915122.021800"><div class="message__timestamp">2018-11-23<br/>04:32:02 +0900</div><div class="message__header">masuwo3</div><div class="message__body">@masuwo3 has joined the channel</div></div><div class="message" id="message-1543136069.022400"><div class="message__timestamp">2018-11-25<br/>17:54:29 +0900</div><div class="message__header">work.nonwork</div><div class="message__body">@work.nonwork has joined the channel</div></div><div class="message" id="message-1543144412.022700"><div class="message__timestamp">2018-11-25<br/>20:13:32 +0900</div><div class="message__header">koishimst</div><div class="message__body">@koishimst has joined the channel</div></div><div class="message" id="message-1543158472.023000"><div class="message__timestamp">2018-11-26<br/>00:07:52 +0900</div><div class="message__header">cliff.asura</div><div class="message__body">@cliff.asura has joined the channel</div></div><div class="message" id="message-1543194023.023200"><div class="message__timestamp">2018-11-26<br/>10:00:23 +0900</div><div class="message__header">slackbot</div><div class="message__body">Reminder: <a href='https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233'>https://haskell-jp.slack.com/archives/C4LFB6DE0/p1517792426000233</a></div></div><div class="message" id="message-1543301711.023600"><div class="message__timestamp">2018-11-27<br/>15:55:11 +0900</div><div class="message__header">akagi15</div><div class="message__body">@akagi15 has joined the channel</div></div><div class="message" id="message-1543301901.024800"><div class="message__timestamp">2018-11-27<br/>15:58:21 +0900</div><div class="message__header">akagi15</div><div class="message__body">仕事(といっても研究ベースですが)にHaskellを使っておりますが,環境が最高すぎて車輪の再発明ばかりしております.</div></div><div class="message" id="message-1543301931.025500"><div class="message__timestamp">2018-11-27<br/>15:58:51 +0900</div><div class="message__header">akagi15</div><div class="message__body">わからないことが多々でてきたので,参加させていただきました.よろしくお願いいたします</div></div><div class="message" id="message-1543309448.027200"><div class="message__timestamp">2018-11-27<br/>18:04:08 +0900</div><div class="message__header">akagi15</div><div class="message__body">早速で恐縮なんですが,現在スタンドアローンのWin7環境でHaskellPlatform(GHC 8.4.3)を使って作業をしています.csvデータを取り込みたく,以下のパーサーをReal World Haskell 等見ながら作成してみました.数100mのファイルなら問題なく動くのですが,4Gくらいになるとメモリヒープを起こします.マシンのメモリは128積んであるので,読めないことはないと思うのですが,理由がわかりません.ご知見ありましたら,ご教示いただければ幸いです.</div></div><div class="message" id="message-1543310360.027700"><div class="message__timestamp">2018-11-27<br/>18:19:20 +0900</div><div class="message__header">kakkun61</div><div class="message__body">GHC で吐いたプログラムのヒープサイズはデフォルトで無制限か<br/><a href='https://downloads.haskell.org/~ghc/8.4.3/docs/html/users_guide/runtime_control.html#rts-flag--M%20%E2%9F%A8size%E2%9F%A9'>https://downloads.haskell.org/~ghc/8.4.3/docs/html/users_guide/runtime_control.html#rts-flag--M%20%E2%9F%A8size%E2%9F%A9</a></div></div><div class="message" id="message-1543310557.027900"><div class="message__timestamp">2018-11-27<br/>18:22:37 +0900</div><div class="message__header">igrep</div><div class="message__body"><blockquote>4Gくらいになるとメモリヒープを起こします</blockquote><br/>メモリ不足でOSによってkillされるってことですか？</div></div><div class="message" id="message-1543310662.029900"><div class="message__timestamp">2018-11-27<br/>18:24:22 +0900</div><div class="message__header">akagi15</div><div class="message__body">128gbまで使い切ってキルされるか自分で強制終了しています。色々とstrictにしてみたりはしたんですが変わらず、悩んでいます。</div></div><div class="message" id="message-1543310777.030100"><div class="message__timestamp">2018-11-27<br/>18:26:17 +0900</div><div class="message__header">igrep</div><div class="message__body">ヒーププロファイリングをしてみる、とかですかねぇ。<br/>ちなみに、CSVパーサーと言えばcassavaが有名ですが、それでやるのはダメなんですかね。</div></div><div class="message" id="message-1543310925.033500"><div class="message__timestamp">2018-11-27<br/>18:28:45 +0900</div><div class="message__header">akagi15</div><div class="message__body">プロファイリングをしてみて動くサイズのファイルでは問題なさそうなのですが、一定サイズを超えるとプロファイルはくまえに死んでしまって困っています。既存のものを入れられると助かるんですがオフラインで依存環境が解決できずに車輪の再発明をしている次第です。</div></div><div class="message" id="message-1543311083.033900"><div class="message__timestamp">2018-11-27<br/>18:31:23 +0900</div><div class="message__header">igrep</div><div class="message__body">なので、プロファイリングして問題のないサイズの入力でたくさんアロケートしている関数を探すのです。<br/><br/>... それはさておき、ざっと読んだ感じ、単純に Data.TextをData.Text.LazyにしてStrictにするのを止めるだけで大きく変わりそうな気がします。</div></div><div class="message" id="message-1543311210.035500"><div class="message__timestamp">2018-11-27<br/>18:33:30 +0900</div><div class="message__header">as_capabl</div><div class="message__body">メモリリークは結構、呼ぶ側のコードの影響もあるかもしれません。</div></div><div class="message" id="message-1543311309.038000"><div class="message__timestamp">2018-11-27<br/>18:35:09 +0900</div><div class="message__header">akagi15</div><div class="message__body">問題のないサイズで元々Lazyなものを使って試していたんですが、Strictの方がスコアが良かったので、こちらにしていました。Lazy vesionから順にbang pattern を付けて見たんですが、最終的にこれが一番結果が良かったです。cellの部分でdeepseqも試しましたがそちらは悪化したのでやめました。</div></div><div class="message" id="message-1543311361.039200"><div class="message__timestamp">2018-11-27<br/>18:36:01 +0900</div><div class="message__header">as_capabl</div><div class="message__body"><code>readCSVTWin path &gt;&gt;= mapM_ (mapM_ Text.putStrLn))</code> みたいに即座に消費するコードを書いてみてリークしないようなら、呼ぶ側の原因かも</div></div></div><div class="pager"><a href="../../html/C4LFB6DE0/10.html" class="pager__previous">Previous</a><a href="../../" class="pager__top">Top</a><a href="../../html/C4LFB6DE0/12.html" class="pager__next">Next</a></div></body></html>