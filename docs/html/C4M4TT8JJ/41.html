<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / random #41</title><link rel="stylesheet" href="/messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / random #41</h1><div class="pager"><a href="/html/C4M4TT8JJ/40.html" class="pager__previous">Previous</a><a href="/" class="pager__top">Top</a><a href="/html/C4M4TT8JJ/42.html" class="pager__next">Next</a></div><div class="message_list"><div class="message" id="message-1551865290.041900"><div class="message__timestamp">2019-03-06<br/>18:41:30 +0900</div><div class="message__header">buddha0818</div><div class="message__body">@buddha0818 has joined the channel</div></div><div class="message" id="message-1551875626.043400"><div class="message__timestamp">2019-03-06<br/>21:33:46 +0900</div><div class="message__header">takashi.mtsd</div><div class="message__body">@takashi.mtsd has joined the channel</div></div><div class="message" id="message-1551930558.044500"><div class="message__timestamp">2019-03-07<br/>12:49:18 +0900</div><div class="message__header">sugano</div><div class="message__body">噂のMonadです． </div></div><div class="message" id="message-1551949470.045900"><div class="message__timestamp">2019-03-07<br/>18:04:30 +0900</div><div class="message__header">dyoshikawa1993</div><div class="message__body">@dyoshikawa1993 has joined the channel</div></div><div class="message" id="message-1552019243.046900"><div class="message__timestamp">2019-03-08<br/>13:27:23 +0900</div><div class="message__header">wado</div><div class="message__body">8.6.4 が表示されるようになったみたいです。<br/><a href='https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/index.html'>https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/index.html</a></div></div><div class="message" id="message-1552041409.047600"><div class="message__timestamp">2019-03-08<br/>19:36:49 +0900</div><div class="message__header">wado</div><div class="message__body">ここまでの内容をまとめました。<br/><a href='https://gist.github.com/waddlaw/b6a14d4dbc94d282a175abe7f9596ae7'>https://gist.github.com/waddlaw/b6a14d4dbc94d282a175abe7f9596ae7</a><br/><br/>ubuntu に環境を整える場合についての質問です。<br/>apt を使って haskell-platform をインストールする方法が使えないとなると、僕は以下の3種類ぐらい方法が思い浮かぶのですが他にありますか？<br/><br/>方法1: ppa で ghc と cabal-install を入れる<br/>方法2: ghcup で ghc と cabal-install を入れる<br/>方法3: stack を使う<br/><br/>また、どの方法が一番良いかという点についても、ご意見ありましたらお願いします。(個人的には方法1が良いんじゃないのかなと思っています)</div></div><div class="message" id="message-1552045175.048000"><div class="message__timestamp">2019-03-08<br/>20:39:35 +0900</div><div class="message__header">igrep</div><div class="message__body">ライブラリーのバージョンを簡単に固定できそう、という意味で個人的にはstackを支持します。<br/>まあ、cabal.configでバージョンを明示すればいいんでしょうけど</div></div><div class="message" id="message-1552047189.048400"><div class="message__timestamp">2019-03-08<br/>21:13:09 +0900</div><div class="message__header">igrep</div><div class="message__body">Current Stable Releaseも直ってますね！</div></div><div class="message" id="message-1552090319.051100"><div class="message__timestamp">2019-03-09<br/>09:11:59 +0900</div><div class="message__header">fumieval</div><div class="message__body">シリアライズライブラリwinery 1.0、解説記事（日英）とともに近日公開予定です。お楽しみに</div></div><div class="message" id="message-1552096259.054700"><div class="message__timestamp">2019-03-09<br/>10:50:59 +0900</div><div class="message__header">kakkun61</div><div class="message__body">Twitter で Haskell 初心者がハマったと教えてもらったコード<br/>確かにしばらく悩んだ<br/><pre>
main = do { let x = 1 ; print x }
</pre><br/><a href='https://wandbox.org/permlink/fizUVfdvTZYRUwJ5'>https://wandbox.org/permlink/fizUVfdvTZYRUwJ5</a></div></div><div class="message" id="message-1552097411.054900"><div class="message__timestamp">2019-03-09<br/>11:10:11 +0900</div><div class="message__header">autotaker</div><div class="message__body"><code>let x = 1; y = 2</code>がvalidなんですね。使ったことないですけど</div></div><div class="message" id="message-1552099099.055200"><div class="message__timestamp">2019-03-09<br/>11:38:19 +0900</div><div class="message__header">kakkun61</div><div class="message__body">そう。言われてみると let の後インデントでまとめられるのでそうなるんですよね。</div></div><div class="message" id="message-1552099941.057000"><div class="message__timestamp">2019-03-09<br/>11:52:21 +0900</div><div class="message__header">hexirp</div><div class="message__body">ああー、分かりにくいですね。コードの形を保ったまま正しくするならば <code>main = do { let { x = 1 } ; print x }</code> かな？</div></div><div class="message" id="message-1552105140.057400"><div class="message__timestamp">2019-03-09<br/>13:19:00 +0900</div><div class="message__header">trueshot86</div><div class="message__body">@trueshot86 has joined the channel</div></div><div class="message" id="message-1552105322.057700"><div class="message__timestamp">2019-03-09<br/>13:22:02 +0900</div><div class="message__header">elkel53930</div><div class="message__body">@elkel53930 has joined the channel</div></div><div class="message" id="message-1552105357.058000"><div class="message__timestamp">2019-03-09<br/>13:22:37 +0900</div><div class="message__header">shinji.hatayama709</div><div class="message__body">@shinji.hatayama709 has joined the channel</div></div><div class="message" id="message-1552105775.058300"><div class="message__timestamp">2019-03-09<br/>13:29:35 +0900</div><div class="message__header">fuuzetsu</div><div class="message__body">@fuuzetsu has joined the channel</div></div><div class="message" id="message-1552106757.058600"><div class="message__timestamp">2019-03-09<br/>13:45:57 +0900</div><div class="message__header">oswald_boc</div><div class="message__body">@oswald_boc has joined the channel</div></div><div class="message" id="message-1552109614.058800"><div class="message__timestamp">2019-03-09<br/>14:33:34 +0900</div><div class="message__header">wado</div><div class="message__body"><code>stack</code> を使う場合のコマンドってどんな感じを想定してますか？(curl で stack をインストールしてからの流れです)<br/>グローバル環境で使うことがほとんど無いのであんまり具体的なコマンドが想像できなくて・・・:turtle:</div></div><div class="message" id="message-1552110904.059000"><div class="message__timestamp">2019-03-09<br/>14:55:04 +0900</div><div class="message__header">nobsun</div><div class="message__body">これはparse errorにするのが正しいのですかねぇ？</div></div><div class="message" id="message-1552111590.059200"><div class="message__timestamp">2019-03-09<br/>15:06:30 +0900</div><div class="message__header">nobsun</div><div class="message__body">full-bracedじゃないからややこしいのかなぁ<br/><pre>
validSyntax = do
  { let x = 1
  ; print x
  }
</pre><br/>はvalidなのに．．．</div></div><div class="message" id="message-1552113528.059700"><div class="message__timestamp">2019-03-09<br/>15:38:48 +0900</div><div class="message__header">viktor.kronvall</div><div class="message__body">@viktor.kronvall has joined the channel</div></div><div class="message" id="message-1552113596.060000"><div class="message__timestamp">2019-03-09<br/>15:39:56 +0900</div><div class="message__header">onwarmermusic</div><div class="message__body">@onwarmermusic has joined the channel</div></div><div class="message" id="message-1552113669.060200"><div class="message__timestamp">2019-03-09<br/>15:41:09 +0900</div><div class="message__header">nobsun</div><div class="message__body">そか．<br/><pre>
validSyntax = do
  { let x = 1; y = 2
  ; print $ x + y
  }  
</pre><br/>はOKだけど，<br/><pre>
invalidSyntax = do
  { let x = 1
  ;     y = 2
  ; print $ x + y
  }
</pre><br/>はNG<br/><pre>
validSyntax = do
  { let x = 1
        y = 2
  ; print $ x + y
  }
</pre><br/>はOKってことね．</div></div><div class="message" id="message-1552120546.060500"><div class="message__timestamp">2019-03-09<br/>17:35:46 +0900</div><div class="message__header">cohei</div><div class="message__body"><code>stack setup --resolver lts-13.10</code> をして、コンパイルは今までの <code>ghc -o ./a.out -O2 ./Main.hs</code> でできそうに思います。</div></div><div class="message" id="message-1552121277.060700"><div class="message__timestamp">2019-03-09<br/>17:47:57 +0900</div><div class="message__header">cohei</div><div class="message__body">あ、すみません、 ghc は <code>stack ghc</code> で呼ばないといけないですね…</div></div><div class="message" id="message-1552121295.060900"><div class="message__timestamp">2019-03-09<br/>17:48:15 +0900</div><div class="message__header">igrep</div><div class="message__body"><code>PATH</code> に <code>stack setup</code> して入れたGHCへのパスを追加する必要がありますね。<br/>ちょっと調べてみましたが、 <code>$(stack path --programs)\ghc-&lt;version&gt;\bin\</code> を追加すればよいかと。<br/>あるいは、 <code>stack exec ghc --</code> とするのが一番確実でよいかと。</div></div><div class="message" id="message-1552121404.061400"><div class="message__timestamp">2019-03-09<br/>17:50:04 +0900</div><div class="message__header">igrep</div><div class="message__body">紛らわしいですね。。。その書き方はするな、が正解なんでしょうけども。。。</div></div><div class="message" id="message-1552121676.061600"><div class="message__timestamp">2019-03-09<br/>17:54:36 +0900</div><div class="message__header">cohei</div><div class="message__body"><code>stack ghc</code> と <code>stack exec ghc</code> って同じなんでしょうか? <a href='https://docs.haskellstack.org/en/stable/GUIDE/#ghcrunghc'>https://docs.haskellstack.org/en/stable/GUIDE/#ghcrunghc</a> を見るとたぶん同じっぽい…?</div></div><div class="message" id="message-1552121742.061800"><div class="message__timestamp">2019-03-09<br/>17:55:42 +0900</div><div class="message__header">cohei</div><div class="message__body">変に <code>stack</code> が噛まないぶん、 <code>stack exec ghc</code> のほうがいいんですかね…</div></div><div class="message" id="message-1552121874.062100"><div class="message__timestamp">2019-03-09<br/>17:57:54 +0900</div><div class="message__header">igrep</div><div class="message__body">ああ、この間 <a href='https://haskell-jp.slack.com/archives/C4M4TT8JJ/p1550662373045300'>https://haskell-jp.slack.com/archives/C4M4TT8JJ/p1550662373045300</a> あたりで話題になった件ですね...<br/><code>stack ghc</code> に <b>限れば</b> <code>stack exec ghc</code> と何も変わらない（はず）なので、どちらでもいいと思います。<br/>私は他と一貫させるために癖で <code>stack exec ghc</code> を使っていただけです。</div></div><div class="message" id="message-1552121881.062500"><div class="message__timestamp">2019-03-09<br/>17:58:01 +0900</div><div class="message__header">ramin.honary</div><div class="message__body">@ramin.honary has joined the channel</div></div><div class="message" id="message-1552122712.062700"><div class="message__timestamp">2019-03-09<br/>18:11:52 +0900</div><div class="message__header">wado</div><div class="message__body"><blockquote>｀PATH｀ に ｀stack setup｀ して入れたGHCへのパスを追加する必要がありますね。<br/>ちょっと調べてみましたが、 ｀$(stack path --programs)\ghc-&lt;version&gt;\bin\｀ を追加すればよいかと。<br/>あるいは、 ｀stack exec ghc --｀ とするのが一番確実でよいかと。</blockquote><br/>ありがとうございます。Dockerfile 作って試してみます。<br/><br/>グローバル環境で <code>--package vector</code> のようにパッケージをインストールおよび指定する際は普通に <code>stack install vector</code> してから <code>stack exec ghc --package vector</code> とかで動くんですかね。(一応この手順で上手くいくかどうか確認してみます)</div></div><div class="message" id="message-1552122778.063000"><div class="message__timestamp">2019-03-09<br/>18:12:58 +0900</div><div class="message__header">igrep</div><div class="message__body"><code>--package</code> オプションは要らないはずです。多分エラーになります。</div></div><div class="message" id="message-1552200202.063900"><div class="message__timestamp">2019-03-10<br/>15:43:22 +0900</div><div class="message__header">okimoto</div><div class="message__body">@okimoto has joined the channel</div></div><div class="message" id="message-1552204525.064200"><div class="message__timestamp">2019-03-10<br/>16:55:25 +0900</div><div class="message__header">jesper</div><div class="message__body">@jesper has joined the channel</div></div><div class="message" id="message-1552374371.066900"><div class="message__timestamp">2019-03-12<br/>16:06:11 +0900</div><div class="message__header">ncaq</div><div class="message__body">http-clientが｢newManagerを使え,使い終えたらGCで自動回収される,closeやwithはDeprecatedだから使うな｣って主張してるんですけど,<br/>こういう設計ってメモリに余裕があってもポート番号が死ぬとかが容易に発生しそうなのでwith系のAPIを使っていきたいと思うんですが間違った考え方なんですかね…?<br/>そもそもhttp-client的には1つのManagerを使いまわせって感じで書いてるんですがマルチスレッドプログラムだとどのへんまで使い回せば良いのかよくわからなくなってきます.<br/><a href='https://www.stackage.org/haddock/lts-13.12/http-client-0.5.14/Network-HTTP-Client.html#v:newManager'>https://www.stackage.org/haddock/lts-13.12/http-client-0.5.14/Network-HTTP-Client.html#v:newManager</a></div></div><div class="message" id="message-1552374511.067300"><div class="message__timestamp">2019-03-12<br/>16:08:31 +0900</div><div class="message__header">igrep</div><div class="message__body">私の記憶が正しければ、 <code>Manager</code> は別にコネクションとか解放必須なリソースを保持しているわけではなかったような気がします。<br/>プロキシ設定とかその辺のmanagerだったような...</div></div><div class="message" id="message-1552374634.067500"><div class="message__timestamp">2019-03-12<br/>16:10:34 +0900</div><div class="message__header">ncaq</div><div class="message__body">確かによくソースを見てみたら<br/><pre>
closeManager _ = return ()
</pre><br/>でした…この場合close何の意味もないですね…</div></div><div class="message" id="message-1552374770.067700"><div class="message__timestamp">2019-03-12<br/>16:12:50 +0900</div><div class="message__header">igrep</div><div class="message__body"><a href='https://github.com/snoyberg/http-client/blob/b8e08b80475b5ed2c2a234bc170ced1324085b14/http-client/Network/HTTP/Client/Core.hs'>https://github.com/snoyberg/http-client/blob/b8e08b80475b5ed2c2a234bc170ced1324085b14/http-client/Network/HTTP/Client/Core.hs</a> を読むと、実際にいつconnectionを取得しているか察せられるかと。</div></div><div class="message" id="message-1552375100.068200"><div class="message__timestamp">2019-03-12<br/>16:18:20 +0900</div><div class="message__header">igrep</div><div class="message__body">ああ、と思ったけどすみません、実際にはconnection poolは保持してますね...<br/>おそらくポート不足などにはならないようにしたり排他処理したりはこのconnection poolがよしなにやってくれているのではないかと...<br/><a href='https://github.com/snoyberg/http-client/blob/c1c6ffa9e7bf3556f8577b12fc2ccb3e92b080a4/http-client/Network/HTTP/Client/Manager.hs#L123'>https://github.com/snoyberg/http-client/blob/c1c6ffa9e7bf3556f8577b12fc2ccb3e92b080a4/http-client/Network/HTTP/Client/Manager.hs#L123</a></div></div><div class="message" id="message-1552375581.068800"><div class="message__timestamp">2019-03-12<br/>16:26:21 +0900</div><div class="message__header">matsubara0507</div><div class="message__body">こんなのあるんだ<br/><a href='https://gitlab.haskell.org/ghc/ghc/wikis/language-pragma-history'>https://gitlab.haskell.org/ghc/ghc/wikis/language-pragma-history</a></div></div><div class="message" id="message-1552380914.070000"><div class="message__timestamp">2019-03-12<br/>17:55:14 +0900</div><div class="message__header">ncaq</div><div class="message__body">中規模Yesodプロジェクトの古いLTSからLTS 13(Yesod 1.6)への移行やっと終わった<br/>esqueletoが死んだら引き取って自分で新しいGHC向けに治さないと死ぬと思ってヒヤヒヤものだった</div></div><div class="message" id="message-1552381763.070300"><div class="message__timestamp">2019-03-12<br/>18:09:23 +0900</div><div class="message__header">kakkun61</div><div class="message__body">これ、自分も気になった記憶がある</div></div><div class="message" id="message-1552381861.070600"><div class="message__timestamp">2019-03-12<br/>18:11:01 +0900</div><div class="message__header">ncaq</div><div class="message__body">JavaとかならThreadPoolExecutorみたいなのがあってもオブジェクトなので不自然ではないですが,<br/>HaskellでIOを使うと言っても単独の関数がプーリングしてるとなんか気味が悪いと思ってしまいますね…</div></div><div class="message" id="message-1552390790.071100"><div class="message__timestamp">2019-03-12<br/>20:39:50 +0900</div><div class="message__header">vqgofndplhjr</div><div class="message__body">@vqgofndplhjr has joined the channel</div></div><div class="message" id="message-1552395736.072000"><div class="message__timestamp">2019-03-12<br/>22:02:16 +0900</div><div class="message__header">autotaker</div><div class="message__body">HIEでhlintかけるとき勝手に`TypeApplications`拡張が有効になるようです。<br/><a href='https://github.com/haskell/haskell-ide-engine/pull/298'>https://github.com/haskell/haskell-ide-engine/pull/298</a></div></div><div class="message" id="message-1552430410.072600"><div class="message__timestamp">2019-03-13<br/>07:40:10 +0900</div><div class="message__header">igrep</div><div class="message__body">何じゃこりゃ、と思ったけど、別にこれ <code>{-# LANGUAGE TypeApplications #-}</code> を強制的に挿入するわけじゃないですよね... :relieved:</div></div><div class="message" id="message-1552431439.073900"><div class="message__timestamp">2019-03-13<br/>07:57:19 +0900</div><div class="message__header">igrep</div><div class="message__body"><a href='http://www.radicle.xyz/'>http://www.radicle.xyz/</a> GitHubのような、ソースコードを共有するコラボレーションツールだけど、すべてP2Pで動くらしい。 :serval:<br/>Haskell製で、まだ開発中。</div></div><div class="message" id="message-1552441275.075300"><div class="message__timestamp">2019-03-13<br/>10:41:15 +0900</div><div class="message__header">masterq</div><div class="message__body">@igrep そういえばなんですが、 <a href='https://wiki.haskell.jp/Haskell-jp%20Logo%20History'>https://wiki.haskell.jp/Haskell-jp%20Logo%20History</a> で紹介されているロゴの歴史にトラビスさん作成の書道ロゴも含めませんか？ / "第0回 スタートHaskell : ATND" <a href='https://atnd.org/events/17468'>https://atnd.org/events/17468</a></div></div></div><div class="pager"><a href="/html/C4M4TT8JJ/40.html" class="pager__previous">Previous</a><a href="/" class="pager__top">Top</a><a href="/html/C4M4TT8JJ/42.html" class="pager__next">Next</a></div></body></html>