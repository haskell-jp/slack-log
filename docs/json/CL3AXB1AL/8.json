[
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1680965304.727929",
        "text": "すみません， `containers` を最新版に更新すると installed `ghc-heap-9.4.4` とconflict して Hackage上から落としてくるのですが，Hackage上には `ghc-heap-9.4.1` や `ghc-heap-9.6.1` など `x.y.1` しかないため `containers` をアップデートしながら `ghc-heap-9.4.4`  をインストールすることは不可能とわかりました．「使えない」状態でインストールされるかどうか，も上手に検証できないため， `ghc-heap` は排除します．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1680966973.022129",
        "text": "license report は 取り敢えず `cabal v2-freeze` だけやった Mac 上の環境で `cabal-plan license-report` を走らせて書いてきました．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1681042850.137679",
        "text": "なんとかfreeze 前に手元環境で Exposed modules の imports を全部チェックできました！　生成したチェック用のソースは: <https://gist.github.com/gksato/0993d739f2ac6e81100f41815a27a978#file-3-imports-hs>"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682392268.747599",
        "text": "コードテストばっかり投げてて実際の提出をサボっていて，数日前にやっと\n<https://atcoder.jp/contests/language-test-202301/submissions/40808418>\nを投げたのですが，そしたら\n\n*コンパイルエラー*\n```Warning: The package list for '<http://hackage.haskell.org|hackage.haskell.org>' is 16 days old.\nRun 'cabal update' to get the latest list of available packages.\nWarning: The package list for '<http://hackage.haskell.org|hackage.haskell.org>' is 16 days old.\nRun 'cabal update' to get the latest list of available packages.\nWarning: The directory\n/home/runner/.cabal/store/ghc-9.4.4/incoming/new-2/home/runner/.cabal/store/ghc-9.4.4/submission-0.1.0.0-e-main-65f18b2df59be1b1a37cc9cf6a1a6fef2ceea8c33303cd81c9373b649724db38/bin\nis not in the system search path.```\nという警告が出てしまいました．\n\nその上，最後の， `Warning: The directory` 云々の警告は未だ原因調査できておらず，どうやったら除去できるかもよくわかりません（あとで <#C5666B6BB|questions> にも投げようかと思います）．\n\nしかし，今回こちらで問題にしたいのは `Warning: The package list for` 云々の方です．これは見慣れた警告で，なんとかなりそうです．言語/ライブラリ追加は終了しているものの，コマンド変更は未だ受け付けられていますので，コンパイル・インストールコマンドを修正して解決してしまって良さそうです．この警告が出される条件を `cabal-install` のコードを追って確かめれば，ad-hoc には，コンパイルコマンド\n\n```$ source ~/.ghcup/env &amp;&amp; cd /judge/submission &amp;&amp; cabal v2-install --installdir=.. --install-method=copy --offline```\nを実行する直前に，package repository cacheのtarのmodification dateを更新しておけばいいとわかります：\n\n```$ touch ~/.cabal/packages/hackage.haskell.org/01-index.tar```\nしかし，この方法はあまりに ad-hoc で implementation-dependent なので，この方法を実行していいかわからず，相談がしたかったのでこちらに書き込ませていただきました．\n\nなお，このような方法に頼らなくても，  `cabal --ignore-expiry v2-install` でコンパイルするか， `cabal.project` に `ignore-expiry: True` を足すかすれば良いかと思ったのですが， `ignore-expiry` は  `cabal v2-update` の時に Hackage の署名の期限を検証しないことを表すもので，この問題には無関係のようですね（勘違いして cabal の github に issue を投げてしまったので，恥ずかしい思いをしました）．"
    },
    {
        "type": "message",
        "user": "U4LGTMTMK",
        "ts": "1682392531.153299",
        "text": "よくわからないんですけど、 `Warning: The package list for '<http://hackage.haskell.org|hackage.haskell.org>' is 16 days old.` については cabal update をどこかで実行すればよいように見えるんですが、ダメなんですかね？\nあと、\n```Warning: The directory\n/home/runner/.cabal/store/ghc-9.4.4/incoming/new-2/home/runner/.cabal/store/ghc-9.4.4/submission-0.1.0.0-e-main-65f18b2df59be1b1a37cc9cf6a1a6fef2ceea8c33303cd81c9373b649724db38/bin\nis not in the system search path.```\nこちらは件のパスが `PATH` に入っていない、というものなので、可能なら無視したほうがいいと思います。"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682393224.286059",
        "text": "`cabal v2-update` はコンパイル時に実行しようとするとインターネット接続を仮定してしまうので，だめです．後半は無視した方が良いのはわかっているのですが，そのパス的にどうにもバグくさいのでどうしたら良いかがよくわからないという状況です．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682470671.109409",
        "text": "ありそうなのは， `cabal v2-build` が これらのWarning を出さないように見えるので，\n\n```cabal v2-build &amp;&amp; cabal v2-install --verbose=0 --installdir=.. --install-method=copy --offline```\nでやっちゃう，というのは手としてあるかもしれません．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682470953.091509",
        "text": "ただ，手元環境とサーバ環境で表示される警告が違うので，あんまり確信を持って修正できないのが正直なところなんですよね…．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682473545.001119",
        "text": "あるいは，さっきのコマンドだと２回コンパイルしてしまうみたいなので，\n\n```cabal v2-build &amp;&amp; cabal v2-exec -- bash -c 'cp $(which main) ../main'```\nでもいいかもしれないですね．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682510145.007589",
        "text": "意見募集: とくに反対がなければ，コンパイルコマンドを\n\n```cd /judge/submission\nsource ~/.ghcup/env\ncabal v2-build --offline &amp;&amp; cabal v2-exec -- bash -c 'cp $(which main) ../'```\nに変更しようと思いますが，どうでしょう？"
    },
    {
        "type": "message",
        "user": "UL5PAB0F9",
        "ts": "1682513764.246829",
        "text": "`cabal v2-install --verbose=0` ではだめでしたか？"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682595802.688999",
        "text": "なるほど．ご指摘を受けて修正するなら，\n\n```cd /judge/submission\nsource ~/.ghcup/env\ncabal v2-build --offline &amp;&amp; cp $(cabal list-bin main) ../```\nでしょうか．"
    },
    {
        "type": "message",
        "user": "UL5PAB0F9",
        "ts": "1682600348.733489",
        "text": "cabal v2-installの挙動はちょっと調べてもよくわからないところがあるので，v2-installは使わずv2-buildしてバイナリ抜き出す方針が良さそうですね"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682600591.717579",
        "text": "では，改善もされたことですし，明日まで待って特に反対がなければ\n\n```cd /judge/submission\nsource ~/.ghcup/env\ncabal v2-build --offline &amp;&amp; cp $(cabal list-bin main) ../```\nに提案シートを書き換えた上で feedback に追加freezeの要望を出します．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1682806606.394059",
        "text": "報告を忘れていましたが，昨日未明（おとといの深夜）に記入してきました．\n• <https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=408033513&amp;range=L38|提案ページの編集>\n• <https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1835616968&amp;range=I102|フィードバックページの編集>"
    },
    {
        "type": "message",
        "user": "UL5PAB0F9",
        "ts": "1685765893.274489",
        "text": "Language Test Contestが4/11版に更新されたようです\n<https://atcoder.jp/contests/language-test-202301>"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1686447567.947069",
        "text": "遅くなりましたが，<https://gist.github.com/gksato/0993d739f2ac6e81100f41815a27a978#file-3-imports-hs> のインポートテストコードがCompile を通ることを確認しました．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1686448242.037629",
        "text": "環境構築用の `cabal.project.freeze` ファイルをコードテスト：\n\n```main :: IO ()\nmain = putStr =&lt;&lt; readFile \"/judge/submission/cabal.project.freeze\"```\nで取得しました！\n\n<https://gist.github.com/gksato/0993d739f2ac6e81100f41815a27a978#file-4-cabal-project-freeze>"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1686921303.827259",
        "text": "事態の収拾がつかなくなりそうでAtCoder社員さまの労力が心配ですが，こんな確認事項がSpreadsheetに追加されました:\n\n<https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1056940558&amp;range=C13>\n&gt; 時間が開いてしまったため言語およびライブラリのアップデートを許可することにします\n&gt; ただし以下のような変更は依然として却下です\n&gt; - これまでに申請済みのライセンスが変わる\n&gt; - 新規言語、新規ライブラリの追加\n&gt; 参考: <https://docs.google.com/spreadsheets/d/1HXyOXt5bKwhKWXruzUvfMFHQtBxfZQ0047W7VVObnXI/edit#gid=1835616968&amp;range=K111>\nこれに乗じて GHC 9.4.5 をつっこめますね！ <https://gitlab.haskell.org/ghc/ghc/-/issues/22998|GHC Issue #22998> とか不安だったので地味にホッとしています…．異論がなければ，仮想環境ビルドを 9.4.5 に bump して試した上で 書き換えを行います．"
    },
    {
        "type": "message",
        "user": "UL1HFJATE",
        "ts": "1686921436.399909",
        "text": "なお，同時に次回の Freeze が 6/19 で確定しました！"
    }
]