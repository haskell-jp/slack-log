<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / atcoder-lang-updates #5</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / atcoder-lang-updates #5</h1><div class="pager ui pagination menu"><a href="../../html/CL3AXB1AL/4.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1585797383.032400"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1585797383.032400">2020-04-02&nbsp;12:16:23 +0900</a></div></div><div class="message__body description">ここまでの内容を issue にしました。補足等あればコメント等で教えてください。<br/><a href='https://github.com/haskell-jp/atcoder-haskell-resources/issues/9'>https://github.com/haskell-jp/atcoder-haskell-resources/issues/9</a></div></div></div><div class="message event" id="message-1585797707.033900"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1585797707.033900">2020-04-02&nbsp;12:21:47 +0900</a></div></div><div class="message__body description"><code>massiv</code> 自体は入っていて、version 0.4.2.0 -&gt; 0.5.1.0 とmajor updateだったのでmoduleが削除されています。</div></div></div><div class="message event" id="message-1585797723.034100"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1585797723.034100">2020-04-02&nbsp;12:22:03 +0900</a></div></div><div class="message__body description">ああ、そういうことですか。ありがとうございます。</div></div></div><div class="message event" id="message-1585799380.034900"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date"><a class="date" href="#message-1585799380.034900">2020-04-02&nbsp;12:49:40 +0900</a></div></div><div class="message__body description"><code>regex-tdfa</code> を追加して欲しい旨をコメントしました:<br/><a href='https://github.com/haskell-jp/atcoder-haskell-resources/issues/9#issuecomment-607603852'>https://github.com/haskell-jp/atcoder-haskell-resources/issues/9#issuecomment-607603852</a></div></div></div><div class="message event" id="message-1585799894.036200"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1585799894.036200">2020-04-02&nbsp;12:58:14 +0900</a></div></div><div class="message__body description">それはだいぶ厳しいかもしれません…。deployが来週なので。<br/><a href='https://github.com/haskell-jp/atcoder-haskell-resources/issues/9#issuecomment-607607128'>https://github.com/haskell-jp/atcoder-haskell-resources/issues/9#issuecomment-607607128</a></div></div></div><div class="message event" id="message-1585800282.036600"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1585800282.036600">2020-04-02&nbsp;13:04:42 +0900</a></div></div><div class="message__body description">追加されるかわかりませんが、一応ドキュメントには反映させておきますね！</div></div></div><div class="message event" id="message-1585810580.037500"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1585810580.037500">2020-04-02&nbsp;15:56:20 +0900</a></div></div><div class="message__body description">「コンパイラオプション/実行時オプション/ライブラリ」の一覧が出てますね。<br/><a href='https://atcoder.jp/contests/language-test-202001'>https://atcoder.jp/contests/language-test-202001</a><br/><br/>言語アップデートシートの最終版はこれです。<br/><a href='https://docs.google.com/spreadsheets/d/1PmsqufkF3wjKN6g1L0STS80yP4a6u-VdGiEv5uOHe0M/edit#gid=1059691052'>https://docs.google.com/spreadsheets/d/1PmsqufkF3wjKN6g1L0STS80yP4a6u-VdGiEv5uOHe0M/edit#gid=1059691052</a></div></div></div><div class="message event" id="message-1585811036.037800"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1585811036.037800">2020-04-02&nbsp;16:03:56 +0900</a></div></div><div class="message__body description">追加されるかわかりませんが、regex-tdfa の件をシートの右側のコメントに追加しておきました。</div></div></div><div class="message event" id="message-1585888579.039300"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1585888579.039300">2020-04-03&nbsp;13:36:19 +0900</a></div></div><div class="message__body description">Judge System Update Test Contest 202004<br/><https://atcoder.jp/contests/judge-update-202004><br/><br/>&gt; コンテスト時間: 2020-04-05(日) 21:00 ~ 2020-04-05(日) 22:00 (60分)<br/>&gt; このコンテストは、ジャッジシステムのアップデートに伴うテストコンテストです。<br/>&gt; 参加対象: All Rated対象: - ペナルティ: なし<br/>時間ある方はよろしくお願いします。</div></div></div><div class="message event" id="message-1586096784.040700"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586096784.040700">2020-04-05&nbsp;23:26:24 +0900</a></div></div><div class="message__body description">シンタックスハイライトが壊れていますね。`'` がだめなのかな。<br/><a href='https://atcoder.jp/contests/judge-update-202004/submissions/11589259'>https://atcoder.jp/contests/judge-update-202004/submissions/11589259</a></div></div></div><div class="message event" id="message-1586099435.042100"><div class="content"><div class="summary"><div class="message__header user">minorinoki_haskjp</div><div class="message__timestamp date"><a class="date" href="#message-1586099435.042100">2020-04-06&nbsp;00:10:35 +0900</a></div></div><div class="message__body description">AtCoderの提出済みコードのシンタックスハイライトが壊れているのは以前からです。ちなみにHaskellに限らずC++等のメジャー言語でもよく見ると不正確な色付けがされているはずです。詳しくはこのスレッドを参照→ <a href='https://twitter.com/mod_poppo/status/1112804424865337345'>https://twitter.com/mod_poppo/status/1112804424865337345</a></div></div></div><div class="message event" id="message-1586136441.044000"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586136441.044000">2020-04-06&nbsp;10:27:21 +0900</a></div></div><div class="message__body description">なるほど、対応待ちなんですね。情報ありがとうございます。</div></div></div><div class="message event" id="message-1586184802.047000"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586184802.047000">2020-04-06&nbsp;23:53:22 +0900</a></div></div><div class="message__body description">次はminor versioningは完全にcabalに任せたほうがいいかもですね・・・。</div></div></div><div class="message event" id="message-1586185028.047600"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586185028.047600">2020-04-06&nbsp;23:57:08 +0900</a></div></div><div class="message__body description"><code>cabal</code> に任せるって具体的にはどういう感じでしょう？</div></div></div><div class="message event" id="message-1586235705.049200"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586235705.049200">2020-04-07&nbsp;14:01:45 +0900</a></div></div><div class="message__body description"><code>cabal install --lib vector bytestring</code> とするか、</div></div></div><div class="message event" id="message-1586235759.050400"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586235759.050400">2020-04-07&nbsp;14:02:39 +0900</a></div></div><div class="message__body description"><code>cabal install --lib vector-0.12 bytestring-0.10</code> とするか、みたいなことを指しています。</div></div></div><div class="message event" id="message-1586235789.051300"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586235789.051300">2020-04-07&nbsp;14:03:09 +0900</a></div></div><div class="message__body description">後者にする場合GHCのバージョンを固定できる方法でしたほうがいいかも、とも。</div></div></div><div class="message event" id="message-1586236505.051500"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586236505.051500">2020-04-07&nbsp;14:15:05 +0900</a></div></div><div class="message__body description">バージョンを明記しない1つめの方法だと<br/><br/>• <code>index-state</code> を指定しないと、どのバージョンがインストールされるかわからない。<br/>• <code>index-state</code> を指定したとしても、インストールするパッケージが増えるにつれ、制約が満たせなくなる可能性が高くなり、その場合は手動でパッケージのバージョンを指定する必要がある。<br/>という問題がありませんか？</div></div></div><div class="message event" id="message-1586236660.051700"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586236660.051700">2020-04-07&nbsp;14:17:40 +0900</a></div></div><div class="message__body description">2つ目の方式は今回のインストール方法と同じですね。<br/><a href='https://github.com/haskell-jp/atcoder-haskell-resources/blob/master/spec.md#%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86'>https://github.com/haskell-jp/atcoder-haskell-resources/blob/master/spec.md#%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E6%89%8B%E9%A0%86</a><br/><br/><pre>$ cabal install --lib --package-env /opt/.cabal/global.env \
    QuickCheck-2.13.2 \
    array-0.5.4.0 \
    attoparsec-0.13.2.4 \
...</pre></div></div></div><div class="message event" id="message-1586236706.052100"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586236706.052100">2020-04-07&nbsp;14:18:26 +0900</a></div></div><div class="message__body description"><blockquote>GHCのバージョンを固定できる方法</blockquote><code>cabal install -w ghc-8.8.3</code> のように <code>-w</code> オプションを指定するということですか？</div></div></div><div class="message event" id="message-1586236814.052300"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586236814.052300">2020-04-07&nbsp;14:20:14 +0900</a></div></div><div class="message__body description">あ、ちょっと違いましたね。<br/><code>vector-0.12.1.2</code> と完全にバージョンを指定するのではなく、`vector-0.12` で止めておくってことですか。</div></div></div><div class="message event" id="message-1586237748.052600"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586237748.052600">2020-04-07&nbsp;14:35:48 +0900</a></div></div><div class="message__body description">基本的には大丈夫だと思いますが、個人的には全部指定しておいた方が安全だと思っています。<br/><br/>例えば、具体的な例でいうと <code>vector</code> パッケージ <code>0.12.1.0</code> と <code>0.12.1.1</code> はミスで breaking change になってしまい、<br/>この影響で <code>rio</code> など <code>mkType</code> を利用しているパッケージがビルドできなくなったりしました。(`vector ^&gt;=0.12` という感じでバージョン指定している場合です)<br/>すぐに  <code>0.12.1.2</code> が出たので、そこまで気にする話ではないかもしれませんが、環境構築手順としてはできるだけ冪等性を保つようにした方が良いと思います。(そのため、今回の ghcup の件は次回の手順では明示的にバージョンを指定する方針に変更した方が良さそうですね)<br/><br/>0.12.1.1 breaking change w.r.t. 0.12.0.3 #287<br/><a href='https://github.com/haskell/vector/issues/287'>https://github.com/haskell/vector/issues/287</a></div></div></div><div class="message event" id="message-1586239239.059600"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586239239.059600">2020-04-07&nbsp;15:00:39 +0900</a></div></div><div class="message__body description">うーん・・・。ただ、こんだけアップデートの完了に時間がかかると、bugfixが出ても全く更新されないって言うのはやっぱり痛いと思ったんですよね。何度もインストール自体をやり直すやり方をとっているようだったから、むしろアップデートが完了した時点でインストールしたライブラリのバージョンをAtCoder側に公開してほしいって気分になってしまって・・・。</div></div></div><div class="message event" id="message-1586239327.060500"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586239327.060500">2020-04-07&nbsp;15:02:07 +0900</a></div></div><div class="message__body description">はい、同じ気持ちです。時間かかるのは良いのですが、情報が一方通行すぎてつらいですね・・・。</div></div></div><div class="message event" id="message-1586239599.064000"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586239599.064000">2020-04-07&nbsp;15:06:39 +0900</a></div></div><div class="message__body description">Stackageから最新LTSに収載のパッケージのバージョンだけ下ろしてきて、cabalでインストールしてもらって、バージョンを公開してもらう、とか、可能か不可能かわからないけど、妄想してしまいます。 </div></div></div><div class="message event" id="message-1586239828.064200"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586239828.064200">2020-04-07&nbsp;15:10:28 +0900</a></div></div><div class="message__body description"><code>lts-15</code> など、スナップショットの最新のバージョン制約は取得できるのですが、stackage の <code>lts</code> を利用する時点で最新のパッケージではなくなるので、残念ながら期待する結果にはならない気がします。<br/><a href='https://www.stackage.org/lts-15/cabal.config'>https://www.stackage.org/lts-15/cabal.config</a></div></div></div><div class="message event" id="message-1586240149.067000"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586240149.067000">2020-04-07&nbsp;15:15:49 +0900</a></div></div><div class="message__body description">バージョンを明示しても、freezeしてからもかなり長い間待たされるわけなので、最新ではないんですよね…さすがにnightly使うのは怖いか…あー…</div></div></div><div class="message event" id="message-1586240604.067200"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586240604.067200">2020-04-07&nbsp;15:23:24 +0900</a></div></div><div class="message__body description">あと、stackage にあがっていないパッケージについては extra-deps で追加する必要があるので、それはバージョン固定になりますね。</div></div></div><div class="message event" id="message-1586241095.068100"><div class="content"><div class="summary"><div class="message__header user">gettaplacetogo</div><div class="message__timestamp date"><a class="date" href="#message-1586241095.068100">2020-04-07&nbsp;15:31:35 +0900</a></div></div><div class="message__body description">確かに。でも今回、そんなパッケージ追加してましたっけ？</div></div></div><div class="message event" id="message-1586243478.068300"><div class="content"><div class="summary"><div class="message__header user">wado</div><div class="message__timestamp date"><a class="date" href="#message-1586243478.068300">2020-04-07&nbsp;16:11:18 +0900</a></div></div><div class="message__body description">今回の話だと <code>repa</code> とか該当しますね。<br/><a href='https://www.stackage.org/package/repa'>https://www.stackage.org/package/repa</a></div></div></div></div><div class="pager ui pagination menu"><a href="../../html/CL3AXB1AL/4.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>