<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / random #30</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / random #30</h1><div class="pager ui pagination menu"><a href="../../html/C4M4TT8JJ/29.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a><a href="../../html/C4M4TT8JJ/31.html" class="pager__next item">Next</a></div><div class="message_list ui feed"><div class="message event" id="message-1542213101.104100"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date">2018-11-15&nbsp;01:31:41 +0900</div></div><div class="message__body description"><code>skip-msys</code> は試したことなかったですね。<br/>なるほど。<br/>とはいえ、やること同じになりそう。<br/>今回は hsexif を使おうとしたら iconv に依存していたのでした</div></div></div><div class="message event" id="message-1542213508.104300"><div class="content"><div class="summary"><div class="message__header user">kakkun61</div><div class="message__timestamp date">2018-11-15&nbsp;01:38:28 +0900</div></div><div class="message__body description">今更気づいたんですが、iconv 不依存でビルドするフラグが用意されていた<br/><a href='https://www.stackage.org/haddock/lts-12.18/hsexif-0.6.1.6/Graphics-HsExif.html'>https://www.stackage.org/haddock/lts-12.18/hsexif-0.6.1.6/Graphics-HsExif.html</a></div></div></div><div class="message event" id="message-1542320147.104900"><div class="content"><div class="summary"><div class="message__header user">yamanntyu22</div><div class="message__timestamp date">2018-11-16&nbsp;07:15:47 +0900</div></div><div class="message__body description">@yamanntyu22 has joined the channel</div></div></div><div class="message event" id="message-1542322668.105500"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2018-11-16&nbsp;07:57:48 +0900</div></div><div class="message__body description">"This book aims to be the comprehensive manual for type-level programming" <a href='https://leanpub.com/thinking-with-types/'>https://leanpub.com/thinking-with-types/</a></div></div></div><div class="message event" id="message-1542341440.105900"><div class="content"><div class="summary"><div class="message__header user">info693</div><div class="message__timestamp date">2018-11-16&nbsp;13:10:40 +0900</div></div><div class="message__body description">@info693 has joined the channel</div></div></div><div class="message event" id="message-1542428355.107900"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date">2018-11-17&nbsp;13:19:15 +0900</div></div><div class="message__body description">Dhall 移植作業、だいたいわかったので雑に作った<br/><a href='https://github.com/matsubara0507/yaml-to-dhall'>https://github.com/matsubara0507/yaml-to-dhall</a></div></div></div><div class="message event" id="message-1542596772.110100"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date">2018-11-19&nbsp;12:06:12 +0900</div></div><div class="message__body description">DhallのC/C++バインディングって存在してないんですね。 <code>hsc2hs</code> でCとHaskellの型をそれぞれ生成して、C/C++からFFIすれば読めそうなイメージ</div></div></div><div class="message event" id="message-1542596795.110600"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date">2018-11-19&nbsp;12:06:35 +0900</div></div><div class="message__body description">Dhall布教のために、ちょっと検証してみましょうか</div></div></div><div class="message event" id="message-1542598436.113100"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date">2018-11-19&nbsp;12:33:56 +0900</div></div><div class="message__body description">…と思ったのですが、Haskellの <code>data</code> で定義した型をCから読めるようにするのは <code>hsc2hs</code> では出来なさそうでした</div></div></div><div class="message event" id="message-1542603305.113800"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date">2018-11-19&nbsp;13:55:05 +0900</div></div><div class="message__body description">Dhall のコメントアウトって冒頭しか残らないのか、フォーマッターとかで</div></div></div><div class="message event" id="message-1542603505.114000"><div class="content"><div class="summary"><div class="message__header user">syocy</div><div class="message__timestamp date">2018-11-19&nbsp;13:58:25 +0900</div></div><div class="message__body description">dhall format の仕様でそうなっていますね</div></div></div><div class="message event" id="message-1542603613.115100"><div class="content"><div class="summary"><div class="message__header user">syocy</div><div class="message__timestamp date">2018-11-19&nbsp;14:00:13 +0900</div></div><div class="message__body description">AST構築の関係でそうなっているっぽい？ <a href='https://github.com/dhall-lang/dhall-haskell/issues/145'>https://github.com/dhall-lang/dhall-haskell/issues/145</a></div></div></div><div class="message event" id="message-1542603962.116300"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date">2018-11-19&nbsp;14:06:02 +0900</div></div><div class="message__body description">なるほどコメントアウトを保持して整えるのって大変なのか</div></div></div><div class="message event" id="message-1542606084.116900"><div class="content"><div class="summary"><div class="message__header user">hiroto.shioi</div><div class="message__timestamp date">2018-11-19&nbsp;14:41:24 +0900</div></div><div class="message__body description"><a href='https://taylor.fausak.me/2018/11/18/2018-state-of-haskell-survey-results/#'>https://taylor.fausak.me/2018/11/18/2018-state-of-haskell-survey-results/#</a><br/>グラフとその下にある表のパーセンテージが全然噛み合ってないように見える（多分未回答の人の分もカウントしてるから？）から最初戸惑った。</div></div></div><div class="message event" id="message-1542682272.117300"><div class="content"><div class="summary"><div class="message__header user">h.hashiba.rkt</div><div class="message__timestamp date">2018-11-20&nbsp;11:51:12 +0900</div></div><div class="message__body description">@h.hashiba.rkt has joined the channel</div></div></div><div class="message event" id="message-1542694337.118100"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2018-11-20&nbsp;15:12:17 +0900</div></div><div class="message__body description">各回のHaskell Dayのページを作っていただきました！<br/><a href='https://wiki.haskell.jp/Workshop/HaskellDay/2018'>https://wiki.haskell.jp/Workshop/HaskellDay/2018</a><br/><a href='https://wiki.haskell.jp/Workshop/HaskellDay/2016'>https://wiki.haskell.jp/Workshop/HaskellDay/2016</a><br/><a href='https://wiki.haskell.jp/Workshop/HaskellDay/2012'>https://wiki.haskell.jp/Workshop/HaskellDay/2012</a></div></div></div><div class="message event" id="message-1542770014.119700"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date">2018-11-21&nbsp;12:13:34 +0900</div></div><div class="message__body description">Hasパターン使うと、env を共有できるのか（していいのかはわからないけど）</div></div></div><div class="message event" id="message-1542785814.120000"><div class="content"><div class="summary"><div class="message__header user">jeedo</div><div class="message__timestamp date">2018-11-21&nbsp;16:36:54 +0900</div></div><div class="message__body description">@jeedo has joined the channel</div></div></div><div class="message event" id="message-1542797416.124500"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date">2018-11-21&nbsp;19:50:16 +0900</div></div><div class="message__body description">Haskell-jpではプロジェクトのビルドといえばstackが定番ですが、最近cabal-installはNix-style local buildという、依存関係をプロジェクト単位で管理する仕組みが充実してきています。そこで、ディスク使用量削減も兼ねて私のstack関係のデータを全消しし、代わりにcabal new-buildでビルドしてみる、名付けて「脱stack計画」の実行を宣言します。このスレッドで経過を報告するのでお楽しみに</div></div></div><div class="message event" id="message-1542807324.127200"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date">2018-11-21&nbsp;22:35:24 +0900</div></div><div class="message__body description">ダツスタ</div></div></div><div class="message event" id="message-1542808571.128500"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date">2018-11-21&nbsp;22:56:11 +0900</div></div><div class="message__body description">僕もしばらくcabal new-buildをメインに使っています。ライブラリを作る人は複数バージョンのGHCが試しやすいのでおすすめします。/opt/ghcにいろんなバージョンのGHCをインストールしてPATHを通しておき、-w ghc-8.6.2とオプションを渡すだけでバージョンを切り替えられて便利です。</div></div></div><div class="message event" id="message-1542808902.131900"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date">2018-11-21&nbsp;23:01:42 +0900</div></div><div class="message__body description">個人的な印象では不可解なビルドエラーに悩まされることがcabalの方が少ない、複数バージョンのGHCを切り替えやすい、backpackやパッケージ内複数ライブラリの対応など最新の機能がcabalから実装されること、プロファイルや最適化オプションの変更時などstackでは適切にリビルドしてくれないことが多かったことなどからnew-buildがメインになりました</div></div></div><div class="message event" id="message-1542813365.133100"><div class="content"><div class="summary"><div class="message__header user">a_kirisaki</div><div class="message__timestamp date">2018-11-22&nbsp;00:16:05 +0900</div></div><div class="message__body description">実はstackしか使わず、cabal hellを伝え聞くだけの身としてcabalをなまで扱うのは恐れがあったりします</div></div></div><div class="message event" id="message-1542834333.136700"><div class="content"><div class="summary"><div class="message__header user">yharuhi39</div><div class="message__timestamp date">2018-11-22&nbsp;06:05:33 +0900</div></div><div class="message__body description">そうそう意外と、cabalも昔ほど地獄じゃなくなったんですよね。 ただ、stackを使う利点だなと思ってる事は、stack.yaml が与えられらプロジェクトでは安定したビルドが得られる (allow-newer が指定されてる場合を除く)事だと思ってるんですよね。 まぁ、正確にはcabalだけでも同じ事は出来ますが、build-dependsを全部正確に書いてるプロジェクトをそこまで見た事ないですね。</div></div></div><div class="message event" id="message-1542837525.137600"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date">2018-11-22&nbsp;06:58:45 +0900</div></div><div class="message__body description">cabalの場合はビルドが成功した時点でcabal new-freezeすると依存バージョンを固定できます</div></div></div><div class="message event" id="message-1542839656.138700"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2018-11-22&nbsp;07:34:16 +0900</div></div><div class="message__body description"><code>stack build --file-watch</code> 相当のものってあるんですかね。（まぁ、なくても他のアプリで代替できるでしょうけども）</div></div></div><div class="message event" id="message-1542840709.138900"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date">2018-11-22&nbsp;07:51:49 +0900</div></div><div class="message__body description">ないと思います</div></div></div><div class="message event" id="message-1542842423.140200"><div class="content"><div class="summary"><div class="message__header user">yharuhi39</div><div class="message__timestamp date">2018-11-22&nbsp;08:20:23 +0900</div></div><div class="message__body description">ghcid 使えば、それっぽい事は出来るんじゃ？。。。ってあれ？これじゃ、stackの存在意義って。。？</div></div></div><div class="message event" id="message-1542843348.141300"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2018-11-22&nbsp;08:35:48 +0900</div></div><div class="message__body description">ghcidねぇ、プロジェクトによってはstack build --fastの方が速かったりもしたり、必ずしもイケてるとは思えないんですよねぇ。</div></div></div><div class="message event" id="message-1542843517.143800"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2018-11-22&nbsp;08:38:37 +0900</div></div><div class="message__body description">いずれにしても、「必ずビルドできるバージョン群」を提供する本来のStackage（と、その簡単なクライアントであるstack）の意義はなくならないと思いますよ。一発でビルドできない場合もあるでしょうから。<br/>そのうち置き換えられる可能性は確かにあると思いますが</div></div></div><div class="message event" id="message-1542856023.146300"><div class="content"><div class="summary"><div class="message__header user">syocy</div><div class="message__timestamp date">2018-11-22&nbsp;12:07:03 +0900</div></div><div class="message__body description">たしかstackのモチベーションとしてライブラリ作者は自分で依存マネージができるけどユーザや初心者はそうではないから…というのがあった記憶が</div></div></div><div class="message event" id="message-1542870218.148400"><div class="content"><div class="summary"><div class="message__header user">hexirp</div><div class="message__timestamp date">2018-11-22&nbsp;16:03:38 +0900</div></div><div class="message__body description">この辺りですよね？書いてあることを読んだら Stack でやっていることと同じでびっくりでした <a href='https://www.haskell.org/cabal/users-guide/nix-local-build-overview.html'>https://www.haskell.org/cabal/users-guide/nix-local-build-overview.html</a></div></div></div><div class="message event" id="message-1542870347.150400"><div class="content"><div class="summary"><div class="message__header user">hexirp</div><div class="message__timestamp date">2018-11-22&nbsp;16:05:47 +0900</div></div><div class="message__body description">あ、後、githubにホストされているライブラリに依存する機能が代替できるか気になります</div></div></div><div class="message event" id="message-1542870417.150600"><div class="content"><div class="summary"><div class="message__header user">maoe</div><div class="message__timestamp date">2018-11-22&nbsp;16:06:57 +0900</div></div><div class="message__body description">出来ます <a href='https://cabal.readthedocs.io/en/latest/nix-local-build.html?highlight=source-repository-package#specifying-packages-from-remote-version-control-locations'>https://cabal.readthedocs.io/en/latest/nix-local-build.html?highlight=source-repository-package#specifying-packages-from-remote-version-control-locations</a></div></div></div><div class="message event" id="message-1542887570.152100"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date">2018-11-22&nbsp;20:52:50 +0900</div></div><div class="message__body description">脱スタ1日目: .stackと.stack-workを削除。.stackは19GB、各プロジェクトの.stack-workは合わせると9.6GBで、合計およそ29GBの領域を食っていました。~/.stack/config.yamlを残しておさらば :wastebasket:</div></div></div><div class="message event" id="message-1542915122.153300"><div class="content"><div class="summary"><div class="message__header user">masuwo3</div><div class="message__timestamp date">2018-11-23&nbsp;04:32:02 +0900</div></div><div class="message__body description">@masuwo3 has joined the channel</div></div></div><div class="message event" id="message-1542960246.154000"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date">2018-11-23&nbsp;17:04:06 +0900</div></div><div class="message__body description">脱スタ2日目: ghcup (<https://github.com/haskell/ghcup>) を使う。ghcupスクリプトを適当な所にダウンロードし、 <code>ghcup install 8.4.4</code> とかを実行すればインストールしてくれる。そして <code>ghcup install-cabal</code> でcabal-installをインストール</div></div></div><div class="message event" id="message-1543021792.156600"><div class="content"><div class="summary"><div class="message__header user">aiya000</div><div class="message__timestamp date">2018-11-24&nbsp;10:09:52 +0900</div></div><div class="message__body description">やはりdep hellに遭遇する頻度と、解決への労力が気になる:eyes:<br/>new-freezeいいな</div></div></div><div class="message event" id="message-1543062992.157400"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date">2018-11-24&nbsp;21:36:32 +0900</div></div><div class="message__body description">脱スタ3日目: 手元にある自分のライブラリはだいたいcabal new-buildでビルドできました。stackと違ってプリコンパイルされたものは使わないので最初はゆっくりですが、resolverごとにビルドする必要はないため、パッケージが揃ってくるとどんどんサクサク感が出てきます</div></div></div><div class="message event" id="message-1543136069.158100"><div class="content"><div class="summary"><div class="message__header user">work.nonwork</div><div class="message__timestamp date">2018-11-25&nbsp;17:54:29 +0900</div></div><div class="message__body description">@work.nonwork has joined the channel</div></div></div><div class="message event" id="message-1543144412.158400"><div class="content"><div class="summary"><div class="message__header user">koishimst</div><div class="message__timestamp date">2018-11-25&nbsp;20:13:32 +0900</div></div><div class="message__body description">@koishimst has joined the channel</div></div></div><div class="message event" id="message-1543158472.158700"><div class="content"><div class="summary"><div class="message__header user">cliff.asura</div><div class="message__timestamp date">2018-11-26&nbsp;00:07:52 +0900</div></div><div class="message__body description">@cliff.asura has joined the channel</div></div></div><div class="message event" id="message-1543197675.161500"><div class="content"><div class="summary"><div class="message__header user">syocy</div><div class="message__timestamp date">2018-11-26&nbsp;11:01:15 +0900</div></div><div class="message__body description">Google なんかはオープンにしないコードは single repository で管理しているという話があり、そういう環境では stack で外部の依存合意を使う必要はないので cabal-install で自前依存管理するのが妥当だなあという気がしてきました。</div></div></div><div class="message event" id="message-1543242260.163800"><div class="content"><div class="summary"><div class="message__header user">yharuhi39</div><div class="message__timestamp date">2018-11-26&nbsp;23:24:20 +0900</div></div><div class="message__body description">そう言えば、思い出したんですけど、 intero ってcabalだけで出来ますかね？ intero に慣れすぎてあれなしでは生きられない(?)んですけど、、、</div></div></div><div class="message event" id="message-1543273882.164700"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2018-11-27&nbsp;08:11:22 +0900</div></div><div class="message__body description">私が調べた時点ではstack必須だったはずです。だからあれは手出したくないんですよねぇ :disappointed_relieved:</div></div></div><div class="message event" id="message-1543274417.165300"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date">2018-11-27&nbsp;08:20:17 +0900</div></div><div class="message__body description">クロスコンパスのHaskeller募集。日本人も募集しているかは定かではないですが共有しておきます。<br/><a href='https://www.reddit.com/r/haskell/comments/a0iq61/job_cross_compass_is_currently_hiring_haskell/'>https://www.reddit.com/r/haskell/comments/a0iq61/job_cross_compass_is_currently_hiring_haskell/</a></div></div></div><div class="message event" id="message-1543284975.169700"><div class="content"><div class="summary"><div class="message__header user">kayhide</div><div class="message__timestamp date">2018-11-27&nbsp;11:16:15 +0900</div></div><div class="message__body description">こんにちは、クロスコンパスの kayhide です。<br/><br/>日本人も募集しています。<br/>チームには外国人もいるのですが、みなさんかなり日本語を喋れますので、英語力に自信がなくても大丈夫です。<br/>“Ideal candidate”のところは高すぎる理想像なので、満たしていない方でも全然大丈夫です。（外国人むけに、そこは強気でだしています）<br/>興味がある、もっと詳しく聞きたい、などありましたら気軽に DM してください。<br/>東京近傍であれば、ランチ食べながらでもお話しましょう！</div></div></div><div class="message event" id="message-1543285176.170100"><div class="content"><div class="summary"><div class="message__header user">kayhide</div><div class="message__timestamp date">2018-11-27&nbsp;11:19:36 +0900</div></div><div class="message__body description">応募自体は日本語でも大丈夫です！</div></div></div><div class="message event" id="message-1543301711.171300"><div class="content"><div class="summary"><div class="message__header user">akagi15</div><div class="message__timestamp date">2018-11-27&nbsp;15:55:11 +0900</div></div><div class="message__body description">@akagi15 has joined the channel</div></div></div><div class="message event" id="message-1543396112.172500"><div class="content"><div class="summary"><div class="message__header user">fumieval</div><div class="message__timestamp date">2018-11-28&nbsp;18:08:32 +0900</div></div><div class="message__body description">まさか国籍で制限するということはないと思います。仮に日本人というだけで採らない企業があったとしたら相当ヤバイですね…</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/C4M4TT8JJ/29.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a><a href="../../html/C4M4TT8JJ/31.html" class="pager__next item">Next</a></div></div></body></html>