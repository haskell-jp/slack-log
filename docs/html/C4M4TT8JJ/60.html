<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / random #60</title><link rel="stylesheet" href="../../messages.css" type="text/css" media="screen"></head><body><h1>haskell-jp / random #60</h1><div class="pager"><a href="../../html/C4M4TT8JJ/59.html" class="pager__previous">Previous</a><a href="../../" class="pager__top">Top</a></div><div class="message_list"><div class="message" id="message-1573546692.085000"><div class="message__timestamp">2019-11-12<br/>17:18:12 +0900</div><div class="message__header">kakkun61</div><div class="message__body">ghcup 的な PowerShell 用なにがしをざっくり作ってみた<br/><a href='https://github.com/kakkun61/ghcups'>https://github.com/kakkun61/ghcups</a></div></div><div class="message" id="message-1573558189.085300"><div class="message__timestamp">2019-11-12<br/>20:29:49 +0900</div><div class="message__header">kakkun61</div><div class="message__body">そもそも PowerShell で GHC 使ってる人は何人いるのか</div></div><div class="message" id="message-1573573705.086100"><div class="message__timestamp">2019-11-13<br/>00:48:25 +0900</div><div class="message__header">kakkun61</div><div class="message__body">cabal が ghc-pkg.ps1 を使ってくれない<br/><pre>
λ  cabal init
cabal.exe: The program 'ghc-pkg' is required but it could not be found.

C:\Users\kazuki\temp
λ  Get-Command ghc-pkg

CommandType     Name                                               Version    Source
-----------     ----                                               -------    ------
ExternalScript  ghc-pkg.ps1                                                   C:\ProgramData\ghcups\ghc-pkg.ps1
</pre></div></div><div class="message" id="message-1573686531.087000"><div class="message__timestamp">2019-11-14<br/>08:08:51 +0900</div><div class="message__header">igrep</div><div class="message__body">TExpQとOverloadedStringsをうまく利用して、特定の形式に沿った文字列リテラルかを静的にチェックする<br/><a href='https://gist.github.com/chrisdone/809296b769ee36d352ae4f8dbe89a364'>https://gist.github.com/chrisdone/809296b769ee36d352ae4f8dbe89a364</a></div></div><div class="message" id="message-1573697287.088100"><div class="message__timestamp">2019-11-14<br/>11:08:07 +0900</div><div class="message__header">kakkun61</div><div class="message__body">ソースプラグインの出番な気もする<br/>ByteString の文字列リテラルで 8 bit 超えてたらエラーにするの誰か書いてなかったっけ</div></div><div class="message" id="message-1573697493.089100"><div class="message__timestamp">2019-11-14<br/>11:11:33 +0900</div><div class="message__header">igrep</div><div class="message__body"><a href='https://mizunashi-mana.github.io/blog/posts/2019/10/lint-bslit-by-ghc-plugin/#lint-bslit-by-ghc-plugin'>https://mizunashi-mana.github.io/blog/posts/2019/10/lint-bslit-by-ghc-plugin/#lint-bslit-by-ghc-plugin</a> ね。<br/>ぱっと見TExpQの方がお手軽な手段だし、これから <code>IsString</code> のインスタンスを作る場合はいいんじゃないっすか</div></div><div class="message" id="message-1573740913.089500"><div class="message__timestamp">2019-11-14<br/>23:15:13 +0900</div><div class="message__header">kakkun61</div><div class="message__body">いい感じになったので試してみてほしい</div></div><div class="message" id="message-1573782542.090100"><div class="message__timestamp">2019-11-15<br/>10:49:02 +0900</div><div class="message__header">kazu</div><div class="message__body">memory パッケージの Bytes は pinned だった。ByteString と変わらない。。。</div></div><div class="message" id="message-1573782587.091000"><div class="message__timestamp">2019-11-15<br/>10:49:47 +0900</div><div class="message__header">kazu</div><div class="message__body">やはり、syscall とのやりとりは ByteString で、内部的には pinned じゃないShortByteString で持つのが安全かなぁ。</div></div><div class="message" id="message-1573785550.092400"><div class="message__timestamp">2019-11-15<br/>11:39:10 +0900</div><div class="message__header">maoe</div><div class="message__body">ByteString を使いたくないのは fragmentation とかですか？</div></div><div class="message" id="message-1573785955.092600"><div class="message__timestamp">2019-11-15<br/>11:45:55 +0900</div><div class="message__header">kazu</div><div class="message__body">意図せずに共有してしまうとリークします。そして、そのうち断片化しますね。</div></div><div class="message" id="message-1573786536.097000"><div class="message__timestamp">2019-11-15<br/>11:55:36 +0900</div><div class="message__header">maoe</div><div class="message__body">なるほど。大きな ByteString の一部を thunk が保持していて GC されないみたいなのもよくあります。retainer profilerがpinned objectを検出できるようになればいいのですが今はそうなってないので、デバッグが少し難しいタイプのリークですね。</div></div><div class="message" id="message-1573786610.097600"><div class="message__timestamp">2019-11-15<br/>11:56:50 +0900</div><div class="message__header">maoe</div><div class="message__body">関連チケット: <a href='https://gitlab.haskell.org/ghc/ghc/issues/7275'>https://gitlab.haskell.org/ghc/ghc/issues/7275</a></div></div><div class="message" id="message-1573786775.099400"><div class="message__timestamp">2019-11-15<br/>11:59:35 +0900</div><div class="message__header">kazu</div><div class="message__body">僕は、遅延評価も ByteString も捨てる方向です。</div></div><div class="message" id="message-1573788272.101500"><div class="message__timestamp">2019-11-15<br/>12:24:32 +0900</div><div class="message__header">maoe</div><div class="message__body">遅延評価はともかくByteString はブートライブラリの一つでほとんどのライブラリが前提としてるので捨てるのは難しくないですか？</div></div><div class="message" id="message-1573788346.101800"><div class="message__timestamp">2019-11-15<br/>12:25:46 +0900</div><div class="message__header">kazu</div><div class="message__body">FFI には使いますよ！ 内部データとして ByteString は使わないということです。</div></div><div class="message" id="message-1573788608.102100"><div class="message__timestamp">2019-11-15<br/>12:30:08 +0900</div><div class="message__header">maoe</div><div class="message__body">内部ではShortByteStringで持っておいて、APIの境界部分でByteStringにcopyしなおす感じですか？</div></div><div class="message" id="message-1573788628.102300"><div class="message__timestamp">2019-11-15<br/>12:30:28 +0900</div><div class="message__header">kazu</div><div class="message__body">そうです！</div></div><div class="message" id="message-1573818371.104200"><div class="message__timestamp">2019-11-15<br/>20:46:11 +0900</div><div class="message__header">kakkun61</div><div class="message__body">stack が C ドライブを圧迫してもうムリだったので他のドライブに移したメモ <a href='https://kakkun61.hatenablog.com/entry/2019/11/15/C_%E3%83%89%E3%83%A9%E3%82%A4%E3%83%96%E4%BE%9D%E5%AD%98%E3%82%92%E6%B8%9B%E3%82%89%E3%81%99'>https://kakkun61.hatenablog.com/entry/2019/11/15/C_%E3%83%89%E3%83%A9%E3%82%A4%E3%83%96%E4%BE%9D%E5%AD%98%E3%82%92%E6%B8%9B%E3%82%89%E3%81%99</a></div></div><div class="message" id="message-1573818430.104500"><div class="message__timestamp">2019-11-15<br/>20:47:10 +0900</div><div class="message__header">kakkun61</div><div class="message__body">75 GB ぐらい空いた</div></div><div class="message" id="message-1573966331.105100"><div class="message__timestamp">2019-11-17<br/>13:52:11 +0900</div><div class="message__header">igrep</div><div class="message__body">LOCALAPPPATH環境変数を変えようとしてなぜか中途半端に変わってしまった経験を持つ身なので助かる</div></div><div class="message" id="message-1573977570.105600"><div class="message__timestamp">2019-11-17<br/>16:59:30 +0900</div><div class="message__header">nmjr31</div><div class="message__body">@nmjr31 has joined the channel</div></div><div class="message" id="message-1573993295.106100"><div class="message__timestamp">2019-11-17<br/>21:21:35 +0900</div><div class="message__header">takenobu.hs</div><div class="message__body">実装がHaskell製では無いのかもしれませんが、ghc-proposal の securetary をしてる Joachim さんが居る会社、DFINITY社による新言語"motoko"です。 (まだ alpha版のようです。)<br/><br/><a href='https://sdk.dfinity.org/'>https://sdk.dfinity.org/</a><br/><a href='https://dfinity.org/'>https://dfinity.org/</a><br/><br/>発音が "motoko" と、日本語由来的な感じですが詳細は不明です:slightly_smiling_face:（まさかの、Ghost in the shell ?）</div></div><div class="message" id="message-1574060674.107200"><div class="message__timestamp">2019-11-18<br/>16:04:34 +0900</div><div class="message__header">matsubara0507</div><div class="message__body">Haskell の Qiita AdC が埋まった :tada:</div></div><div class="message" id="message-1574073410.107900"><div class="message__timestamp">2019-11-18<br/>19:36:50 +0900</div><div class="message__header">las</div><div class="message__body">@las has joined the channel</div></div><div class="message" id="message-1574205874.109200"><div class="message__timestamp">2019-11-20<br/>08:24:34 +0900</div><div class="message__header">igrep</div><div class="message__body">Cross CompassでHaskellやPureScriptを書く人の募集だそうです <a href='https://www.reddit.com/r/haskell/comments/dyh4rz/job_purescript_and_haskell_tokyo_or_remote/'>https://www.reddit.com/r/haskell/comments/dyh4rz/job_purescript_and_haskell_tokyo_or_remote/</a></div></div><div class="message" id="message-1574220533.109600"><div class="message__timestamp">2019-11-20<br/>12:28:53 +0900</div><div class="message__header">amderbar</div><div class="message__body">@amderbar has joined the channel</div></div><div class="message" id="message-1574256328.110800"><div class="message__timestamp">2019-11-20<br/>22:25:28 +0900</div><div class="message__header">kakkun61</div><div class="message__body">Haskell Platform・Stack・Ghcup なんでいろいろあるの？というところを書きました<br/>Cabal v2 使ったことないのでまちがってないか心配<br/><a href='https://kakkun61.hatenablog.com/entry/2019/11/20/GHC_%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89_%E6%A6%82%E8%A6%B3_%E3%81%A8_PowerShell'>https://kakkun61.hatenablog.com/entry/2019/11/20/GHC_%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89_%E6%A6%82%E8%A6%B3_%E3%81%A8_PowerShell</a></div></div><div class="message" id="message-1574258509.111000"><div class="message__timestamp">2019-11-20<br/>23:01:49 +0900</div><div class="message__header">matsubara0507</div><div class="message__body">すごくわかりやすい！<br/>Cabal v1 の話が最初にあってもいいのかなってとも思ったけど</div></div><div class="message" id="message-1574259486.111300"><div class="message__timestamp">2019-11-20<br/>23:18:06 +0900</div><div class="message__header">kakkun61</div><div class="message__body">やった～<br/>@matsubara0507 cabal v1 の話ってどういうの期待してますか？</div></div><div class="message" id="message-1574260035.111500"><div class="message__timestamp">2019-11-20<br/>23:27:15 +0900</div><div class="message__header">matsubara0507</div><div class="message__body">Haskell Platform や stack の時点で cabal (v1)話が当たり前のように出てくるので、そもそもパッケージマネージャの cabal があってな、でもこれらはこういうのができないってのがあってもいいかなって<br/>（僕自身は知ってるのですらすら読めたし、v2のところに書いてあったのでいいんですけど、どれを使えば？ってひとはこんがらがるのかもって少し感じた）</div></div><div class="message" id="message-1574260074.111700"><div class="message__timestamp">2019-11-20<br/>23:27:54 +0900</div><div class="message__header">matsubara0507</div><div class="message__body">まぁ今のでも最後まで読めば十分分かるので強いて言えばぐらいっす :bow:</div></div><div class="message" id="message-1574261141.111900"><div class="message__timestamp">2019-11-20<br/>23:45:41 +0900</div><div class="message__header">kakkun61</div><div class="message__body">確かに GHC や Cabal が何かは知っている前提でしたね<br/>結局どれ使えばいいのかは自分で読んでて足りないなと思ったので足そうかな</div></div><div class="message" id="message-1574261187.112200"><div class="message__timestamp">2019-11-20<br/>23:46:27 +0900</div><div class="message__header">kakkun61</div><div class="message__body">正直なところほとんどの部分は ghcups の前振りなんですけどね:yum:</div></div><div class="message" id="message-1574267928.112500"><div class="message__timestamp">2019-11-21<br/>01:38:48 +0900</div><div class="message__header">kakkun61</div><div class="message__body">「結局どれを選べばよいのか」の節を追加した</div></div><div class="message" id="message-1574269430.113000"><div class="message__timestamp">2019-11-21<br/>02:03:50 +0900</div><div class="message__header">imamura.suuri</div><div class="message__body">@imamura.suuri has joined the channel</div></div><div class="message" id="message-1574304666.113600"><div class="message__timestamp">2019-11-21<br/>11:51:06 +0900</div><div class="message__header">igrep</div><div class="message__body">cabal-devよりcabal sandboxの方が公式機能である分一般的だった気がするんですがいかがでしょうか？</div></div><div class="message" id="message-1574306097.113800"><div class="message__timestamp">2019-11-21<br/>12:14:57 +0900</div><div class="message__header">kakkun61</div><div class="message__body">cabal sandbox 忘れてました<br/>cabal sandbox できる前の cabal-dev しかない時期しか覚えてなかった</div></div><div class="message" id="message-1574347133.114600"><div class="message__timestamp">2019-11-21<br/>23:38:53 +0900</div><div class="message__header">kakkun61</div><div class="message__body">Rust で作ったライブラリーを静的リンクして Haskell（GHC）から使う例と説明書いた。<br/><a href='https://github.com/kakkun61/haskell-invokes-rust'>https://github.com/kakkun61/haskell-invokes-rust</a></div></div><div class="message" id="message-1574347809.114900"><div class="message__timestamp">2019-11-21<br/>23:50:09 +0900</div><div class="message__header">UQGDTBMV1</div><div class="message__body">@UQGDTBMV1 has joined the channel</div></div></div><div class="pager"><a href="../../html/C4M4TT8JJ/59.html" class="pager__previous">Previous</a><a href="../../" class="pager__top">Top</a></div></body></html>