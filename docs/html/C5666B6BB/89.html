<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / questions #89</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / questions #89</h1><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/88.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1596815300.200700"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date"><a class="date" href="#message-1596815300.200700">2020-08-08&nbsp;00:48:20 +0900</a></div></div><div class="message__body description">Haskell の <code>head</code> / <code>tail</code> は単連結リストの言葉ですね。Haskell のリストはそのまま単連結リストなので、単連結リストの先頭を示す <code>head</code> とそれ以降を示す <code>tail</code> という言葉を関数名にそのまま流用したものです。<br/><br/>確かにコマンドの <code>head</code> / <code>tail</code> を想定すると、ギョッとする命名かもしれませんね</div></div></div><div class="message event" id="message-1596848095.201100"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1596848095.201100">2020-08-08&nbsp;09:54:55 +0900</a></div></div><div class="message__body description">ちなみに、 <code>head :: [a] -&gt; Int -&gt; [a]</code> に相当するものとして <code>take</code> があります（引数の順番は逆なので注意）。<br/>それを使って <code>first</code> みたいなものを作れば良かったんじゃない、という意図なのかも知れませんが。</div></div></div><div class="message event" id="message-1596863604.208500"><div class="content"><div class="summary"><div class="message__header user">naohaq</div><div class="message__timestamp date"><a class="date" href="#message-1596863604.208500">2020-08-08&nbsp;14:13:24 +0900</a></div></div><div class="message__body description"><code>head</code> はなくてはならないものかというと必ずしもそういうことはなくて、 <code>xs :: [a]</code> について、 <code>let (hd:tl) = xs in (hd,tlを使った式)</code> とすれば先頭の要素とそれ以外を取り出せます。</div></div></div><div class="message event" id="message-1596871961.208700"><div class="content"><div class="summary"><div class="message__header user">takatheshi</div><div class="message__timestamp date"><a class="date" href="#message-1596871961.208700">2020-08-08&nbsp;16:32:41 +0900</a></div></div><div class="message__body description">ご回答ありがとうございます。<br/><br/>@mizunashi-mana<br/>単連結リストは日本語でいうところの単方向リスト(Singly linked list)でしょうか？<br/><br/>@igrep<br/>少し話が逸れますが、 <code>take</code> がその順番になってる理由は、取る数よりリストの方が適用する種類が多いからそうなってるんでしょうか？</div></div></div><div class="message event" id="message-1596873824.208900"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1596873824.208900">2020-08-08&nbsp;17:03:44 +0900</a></div></div><div class="message__body description">はい、そうだと思います。</div></div></div><div class="message event" id="message-1596892952.216500"><div class="content"><div class="summary"><div class="message__header user">cj.bc-sd</div><div class="message__timestamp date"><a class="date" href="#message-1596892952.216500">2020-08-08&nbsp;22:22:32 +0900</a></div></div><div class="message__body description">LensのPrismの使い方について質問です<br/>Prismを <code>set</code>や <code>over</code>で <code>ASetter</code> として使えることは分かったのですが、Prismの中身に <code>Lens</code>を使用してアクセスしたいと思った時にやり方がわかりません。(例を下に載せます)<br/>現在は↓の <code>makeBelongTo</code> のようにしているものの、Characterの値コンストラクタが変わったら変更しなくてはいけなくなり、じゃあPrismにしたメリットないのでは、と悩んでいます。<br/><pre>data Character = Animal {
                    _name  :: String
                  , _age  :: Int
                  , _memberOf :: Maybe String
                  }
               | Object {
                    _name :: String
                  , _memberOf :: Maybe String
                  }
              deriving (Show)

makePrisms ''Character
makeLenses ''Character

-- この関数を
makeBelengTo :: String -&gt; Character -&gt; Character
makeBelengTo belongTo c@(Animal n a _) = Animal n a (Just belongTo)
makeBelengTo belongTo c@(Object n _)   = Object n (Just belongTo)

-- こんな感じにしたい(これだと動かない)
makeBelongToWithLens :: String -&gt; Character -&gt; Character
makeBelongToWithLens belongTo = set (_Animal.memberOf) (Just belongTo)
                              . set (_Object.memberOf) (Just belongTo)</pre><br/>また、<br/><pre>set (_Animal._3) (Just belongTo)</pre><br/>のような解法は見つけたのですが、結局タプルの位置を指定しているためこれならPrismのメリットがないな…と思っています。</div></div></div><div class="message event" id="message-1596920248.216800"><div class="content"><div class="summary"><div class="message__header user">as_capabl</div><div class="message__timestamp date"><a class="date" href="#message-1596920248.216800">2020-08-09&nbsp;05:57:28 +0900</a></div></div><div class="message__body description">外泊中なので試せないのですが、普通に <code>set memberOf (Just belongTo)</code> か <code>c{_memberOf=Just belongTo}</code>で行けないでしょうか。</div></div></div><div class="message event" id="message-1596950153.217000"><div class="content"><div class="summary"><div class="message__header user">cj.bc-sd</div><div class="message__timestamp date"><a class="date" href="#message-1596950153.217000">2020-08-09&nbsp;14:15:53 +0900</a></div></div><div class="message__body description">あっ確かに…<br/>実際に書いているコードでLensの名前が違ったのでこんな書き方にしていましたが、よく考えたら同じ名前にすれば大丈夫でした…(違う名前にする必要がなかったです)<br/>それを元にして考えたら他の部分もうまく行きました！ありがとうございます</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/C5666B6BB/88.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>