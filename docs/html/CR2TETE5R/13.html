<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / beginners #13</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / beginners #13</h1><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/12.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1606127990.064600"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606127990.064600">2020-11-23&nbsp;19:39:50 +0900</a></div></div><div class="message__body description">一時的に確認したいだけだったので、 :point_down: のコマンドを（ほぼ元のコードそのままですが）手打ちしました。<br/><br/><pre>&gt; stack haddock
&gt; stack exec -- hoogle generate -v --local=$(stack path --local-doc-root) --local=$(stack path --snapshot-doc-root) --database=$(stack path --local-hoogle-root)/database.hoo
&gt; stack exec -- hoogle --database=$(stack path --local-hoogle-root)/database.hoo "a -&gt; a" # 今回は動作確認がしたかっただけなので、 a -&gt; a という型の関数を探してみるだけ</pre><br/>なお、元のコードでは <code>hoogle server</code> を必ず実行することになっていますが、hoogleの他の機能を使いたい場合も考えるとbashの <code>"$@"</code> などで一般化した方がいいでしょうね。<br/><br/>で、本題に答えると、例えば <code>stack-hoogle</code> とかでいいんじゃないでしょうか。場所は本当に <code>PATH</code> の中の自分が触れる領域であればどこでもよいでしょう。もしなければ、この機会に自前で作ったコマンドを入れておくディレクトリーを一つ作っておいてそこにすればいいんじゃないかと。</div></div></div><div class="message event" id="message-1606130228.066000"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606130228.066000">2020-11-23&nbsp;20:17:08 +0900</a></div></div><div class="message__body description">すみません本題から外れますがこれからオンライン集合論ゼミのため反応が鈍ります。<br/>申し訳ないです。</div></div></div><div class="message event" id="message-1606133858.066200"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606133858.066200">2020-11-23&nbsp;21:17:38 +0900</a></div></div><div class="message__body description">お気になさらず！私含めみんな気が向いたときに回答しているので！</div></div></div><div class="message event" id="message-1606135205.066500"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606135205.066500">2020-11-23&nbsp;21:40:05 +0900</a></div></div><div class="message__body description">「stack haddock」<br/>と実行した時に以下のエラーメッセージが出ます<br/><br/>MacBook-Air:~ sirkerf$ stack haddock<br/>Error parsing targets: The specified targets matched no packages.<br/>Perhaps you need to run ‘stack init’?</div></div></div><div class="message event" id="message-1606135520.066700"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606135520.066700">2020-11-23&nbsp;21:45:20 +0900</a></div></div><div class="message__body description">あれ、global projectでは <code>stack haddock</code> は使えなかったっけか...<br/>ええっと、そのエラーメッセージは、「 <code>stack haddock</code> はプロジェクトのディレクトリー（ <code>stack.yaml</code> が入っているディレクトリー）でないと使えません」という旨のメッセージです。<br/>プロジェクトを作ってから使う... でもいいんですが、本当に必要かどうかちょっと自分も確信が持てなくなってきたのですっ飛ばして <code>stack exec -- hoogle generate ...</code> で始まる方を実行してみてください</div></div></div><div class="message event" id="message-1606136529.066900"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606136529.066900">2020-11-23&nbsp;22:02:09 +0900</a></div></div><div class="message__body description">「stack exec — hoogle generate …」<br/>で始まる方を実行した後に二個目実行してみました。<br/>その後に<br/>「stack hoogle “min”」で実行してみました。<br/><br/>MacBook-Air:~ sirkerf$ stack hoogle “min”<br/>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.<br/>Distribution.Compat.Prelude.Internal min :: Ord a =&gt; a -&gt; a -&gt; a<br/>Prelude min :: Ord a =&gt; a -&gt; a -&gt; a<br/>Data.Ord min :: Ord a =&gt; a -&gt; a -&gt; a<br/>GHC.Classes min :: Ord a =&gt; a -&gt; a -&gt; a<br/>Data.Semigroup newtype Min a<br/>Data.Semigroup Min :: a -&gt; Min a<br/>BasicTypes minPrecedence :: Int<br/>CmmExpr minusRegSet :: Ord r =&gt; RegSet r -&gt; RegSet r -&gt; RegSet r<br/>CmmProcPoint minimalProcPointSet :: Platform -&gt; ProcPointSet -&gt; CmmGraph -&gt; UniqSM ProcPointSet<br/>DynFlags mIN_CHARLIKE :: DynFlags -&gt; Int<br/>-- plus more results not shown, pass --count=20 to see more</div></div></div><div class="message event" id="message-1606136556.067100"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606136556.067100">2020-11-23&nbsp;22:02:36 +0900</a></div></div><div class="message__body description">必ず初めに<br/>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.<br/>が表示されるようです。</div></div></div><div class="message event" id="message-1606136743.067300"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606136743.067300">2020-11-23&nbsp;22:05:43 +0900</a></div></div><div class="message__body description">ともあれ、hoogleの機能は利用できるようになったのでありがとうございます。<br/>残った問題についてもできれば解決したいですが、また機会がありましたらお願いします。ありがとうございました。<br/>連日ありがとうございます、また機会がありましたらお願いします。</div></div></div><div class="message event" id="message-1606145054.071100"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606145054.071100">2020-11-24&nbsp;00:24:14 +0900</a></div></div><div class="message__body description">Haskellのコーディングでの質問です。<br/><br/>multiply :: Int -&gt; Int -&gt; Int<br/>multiply a b = a * b<br/><br/>main = do<br/>     return $ multiply a b<br/><br/>をしようとしたのですがうまくいきません。<br/>エラーコードは<br/><br/>MacBook-Air:haskell_sutdy sirkerf$ runghc multiple.hs <br/><br/>*multiple.hs*:eight:*23: error: Variable not in scope: a :: Int*<br/> *|*<br/>*8 |*   return $ multiply *a* b<br/> *|            ^*<br/><br/>*multiple.hs*:eight:*25: error: Variable not in scope: b :: Int*<br/> *|*<br/>*8 |*   return $ multiply a *b*<br/> *|             ^*<br/><br/>となります。<br/>Variable not in scopeのエラーを調べてみても「型が合ってない」としか言われないのですが、そもそもaとbはIntのはずですからこのエラーはおかしいように感じるのです。<br/>どなたか、このコードが通るように改変していただけませんでしょうか？</div></div></div><div class="message event" id="message-1606145174.072000"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606145174.072000">2020-11-24&nbsp;00:26:14 +0900</a></div></div><div class="message__body description">ちなみに最後を「return $ multiply 2 3」と具体的なIntのものにすると通ります。</div></div></div><div class="message event" id="message-1606145491.072200"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606145491.072200">2020-11-24&nbsp;00:31:31 +0900</a></div></div><div class="message__body description">推測するにaとbが具体的な型を持っていないと見られているのが問題だと思っています。</div></div></div><div class="message event" id="message-1606146527.072400"><div class="content"><div class="summary"><div class="message__header user">kyaddress</div><div class="message__timestamp date"><a class="date" href="#message-1606146527.072400">2020-11-24&nbsp;00:48:47 +0900</a></div></div><div class="message__body description">aとbが定義されていないというエラーです。<br/>a :: Int<br/>a = 2<br/>b :: Int<br/>b = 3</div></div></div><div class="message event" id="message-1606146559.072700"><div class="content"><div class="summary"><div class="message__header user">kyaddress</div><div class="message__timestamp date"><a class="date" href="#message-1606146559.072700">2020-11-24&nbsp;00:49:19 +0900</a></div></div><div class="message__body description">などと定義を追加すれば動きます</div></div></div><div class="message event" id="message-1606147157.072900"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606147157.072900">2020-11-24&nbsp;00:59:17 +0900</a></div></div><div class="message__body description">動きました。ありがとうございます。<br/>ところが件のコードは<br/>「module Multiply.Bug.Fix where<br/><br/>multiply :: Int -&gt; Int -&gt; Int<br/>multiply a b = do<br/>  return $ a * b」<br/><br/>この誤りを正せ<br/>と言う問題だったのでさっきのコードになったのですが、具体的な値を入れると怒られてしまいました。</div></div></div><div class="message event" id="message-1606150110.073100"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606150110.073100">2020-11-24&nbsp;01:48:30 +0900</a></div></div><div class="message__body description">「module Multiply.Bug.Fix where<br/>multiply :: Int -&gt; Int -&gt; Int<br/>multiply a b = a * b」<br/><br/>で通りました。ありがとうございました。</div></div></div><div class="message event" id="message-1606174310.073600"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1606174310.073600">2020-11-24&nbsp;08:31:50 +0900</a></div></div><div class="message__body description"><blockquote>No hoogle version was found, trying to install the latest version<br/>Minimum version is hoogle-5.0. Found acceptable hoogle-5.0.17.15 in your index, requiring its installation.</blockquote>についてはよくわかりません。インストール自体は済んでいるでしょうし、stackのバグではないでしょうか。</div></div></div><div class="message event" id="message-1606225433.074100"><div class="content"><div class="summary"><div class="message__header user">yasufrom24</div><div class="message__timestamp date"><a class="date" href="#message-1606225433.074100">2020-11-24&nbsp;22:43:53 +0900</a></div></div><div class="message__body description">@yasufrom24 has joined the channel</div></div></div><div class="message event" id="message-1606452843.074400"><div class="content"><div class="summary"><div class="message__header user">han</div><div class="message__timestamp date"><a class="date" href="#message-1606452843.074400">2020-11-27&nbsp;13:54:03 +0900</a></div></div><div class="message__body description">@han has joined the channel</div></div></div><div class="message event" id="message-1606561219.075400"><div class="content"><div class="summary"><div class="message__header user">sky.is.gray</div><div class="message__timestamp date"><a class="date" href="#message-1606561219.075400">2020-11-28&nbsp;20:00:19 +0900</a></div></div><div class="message__body description">はじめまして、どうぞよろしくお願いいたします。<br/><br/>ある型について、とりうる値をすべてリストで列挙する方法はありますか？<br/><br/><pre>data DrinkMenu = Oolong | OrangeJuice | Cocktail deriving Show</pre><br/>のようなデータ型があるとして、<br/>構文としては正しくないのですが、理想としては下記のようなことができればいいなと思っています<br/><pre>&gt; show $ enumrate DrinkMenu 
[Oolong, OrangeJuice, Cocktail]</pre><br/>似たようなことができる方法をご存じでしたら、教えていただきたいです</div></div></div><div class="message event" id="message-1606561551.075500"><div class="content"><div class="summary"><div class="message__header user">kyaddress</div><div class="message__timestamp date"><a class="date" href="#message-1606561551.075500">2020-11-28&nbsp;20:05:51 +0900</a></div></div><div class="message__body description">deriving Enum で自動的にEnumクラスのメソッドが得られます <a href='http://walk.northcol.org/haskell/type-classes/'>http://walk.northcol.org/haskell/type-classes/</a></div></div></div><div class="message event" id="message-1606561700.075700"><div class="content"><div class="summary"><div class="message__header user">kyaddress</div><div class="message__timestamp date"><a class="date" href="#message-1606561700.075700">2020-11-28&nbsp;20:08:20 +0900</a></div></div><div class="message__body description"><blockquote>data Day = Sun | Mon | Tue | Wed | Thu | Fri | Sat<br/>           deriving (Enum, Show)<br/>main = print [Mon .. Fri]  -- 出力: [Mon, Tue, Wed, Thu, Fri]</blockquote></div></div></div><div class="message event" id="message-1606562178.075900"><div class="content"><div class="summary"><div class="message__header user">kyaddress</div><div class="message__timestamp date"><a class="date" href="#message-1606562178.075900">2020-11-28&nbsp;20:16:18 +0900</a></div></div><div class="message__body description">また、deriving Boundedにすると最初と最後が得られます<br/><br/><blockquote>data Day = Sun | Mon | Tue | Wed | Thu | Fri | Sat<br/>           deriving (Enum, Bounded, Show)<br/>main = do print $ (minBound :: Day)  -- 出力: Sun<br/>          print $ (maxBound :: Day)  -- 出力: Sat</blockquote></div></div></div><div class="message event" id="message-1606563533.076100"><div class="content"><div class="summary"><div class="message__header user">sky.is.gray</div><div class="message__timestamp date"><a class="date" href="#message-1606563533.076100">2020-11-28&nbsp;20:38:53 +0900</a></div></div><div class="message__body description">ありがとうございます！やりたいことができました。<br/>（なんとか型を値として渡す方法を考えなければ..と思っていたので、目からウロコでした）</div></div></div><div class="message event" id="message-1606572499.077000"><div class="content"><div class="summary"><div class="message__header user">yudai.tnb</div><div class="message__timestamp date"><a class="date" href="#message-1606572499.077000">2020-11-28&nbsp;23:08:19 +0900</a></div></div><div class="message__body description">@yudai.tnb has joined the channel</div></div></div><div class="message event" id="message-1606576089.077500"><div class="content"><div class="summary"><div class="message__header user">sh9temp</div><div class="message__timestamp date"><a class="date" href="#message-1606576089.077500">2020-11-29&nbsp;00:08:09 +0900</a></div></div><div class="message__body description">@sh9temp has joined the channel</div></div></div><div class="message event" id="message-1606709812.083200"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606709812.083200">2020-11-30&nbsp;13:16:52 +0900</a></div></div><div class="message__body description">かなり基本的な質問なのですが答えてくださる方を募集します。<br/>数学では「随伴関手の合成はモナドを成す」という事実があるのですが、これはHaskellでも同様でしょうか？<br/>つまりFunctorからMonadを作ることって出来るのでしょうか？<br/>FunctorはFunctor則を<br/>MonadはMonad則をそれぞれ満たさなければならないので、Haskellでだとなんだか整合性が取れないのではないかと推測しています。<br/>それから追加質問で恐縮なのですが、<br/>「Haskellにおける随伴関手の例」って何かありますでしょうか？</div></div></div><div class="message event" id="message-1606709922.084800"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606709922.084800">2020-11-30&nbsp;13:18:42 +0900</a></div></div><div class="message__body description">更に追加で質問しますが、数学では「モナドTからT代数を構成できる」という事実がありますが、これはHaskellでも同様ですか？</div></div></div><div class="message event" id="message-1606726064.090900"><div class="content"><div class="summary"><div class="message__header user">hexirp</div><div class="message__timestamp date"><a class="date" href="#message-1606726064.090900">2020-11-30&nbsp;17:47:44 +0900</a></div></div><div class="message__body description">Haskell の Functor と Monad は、圏論の関手とモナドを使いやすいように特別な場合に限定したものであり、また Haskell が厳密には純粋ではないこともあり、同じ概念として捉えることは出来ません。<br/>随伴関手としての条件を満たす二つの Functor があれば、そこから Monad を作ることが出来ます。そのようなペアとしては (-&gt;) r と (,) r があり、そこから State Monad を作ることが出来ます。</div></div></div><div class="message event" id="message-1606732982.094000"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606732982.094000">2020-11-30&nbsp;19:43:02 +0900</a></div></div><div class="message__body description">ありがとうございます。同じ概念として捉えることはできないんですね。<br/>Monadを作ることができるFunctorの具体例まで教えていただきありがとうございます。<br/><br/><br/>ところでですが、HaskellのFunctorやMonadは数学で定式化するとしたらどのような概念になるのでしょうか？追加の質問で申し訳ないです。</div></div></div><div class="message event" id="message-1606734271.101800"><div class="content"><div class="summary"><div class="message__header user">hexirp</div><div class="message__timestamp date"><a class="date" href="#message-1606734271.101800">2020-11-30&nbsp;20:04:31 +0900</a></div></div><div class="message__body description">次のように作られる圏を Hask 圏と呼びます。<br/><br/>• 対象: Haskell の型 (Int, Maybe Bool, [String], ...)<br/>• A から B への射: <br/>A -&gt; B という型を持つ関数<br/><br/>Functor は Hask 圏から Hask 圏への関手です。 Monad は Hask 圏の上のモナドです。<br/>ただし、この Hask 圏は、現実の Haskell では圏にならないので、理想化した Haskell の中で考える必要があります。そのあたりの事情を無視しても Functor と Monad が便利なのには変わらないので、問題とされることは少ないようです。</div></div></div><div class="message event" id="message-1606791602.102400"><div class="content"><div class="summary"><div class="message__header user">slackbot</div><div class="message__timestamp date"><a class="date" href="#message-1606791602.102400">2020-12-01&nbsp;12:00:02 +0900</a></div></div><div class="message__body description">Reminder: <br/>beginnersチャンネルは、新しい人がスムーズにHaskellに慣れるための質問を歓迎するチャンネルです。<br/>Haskell-Beginners ML や IRCの#haskell-beginners  や RedditのMonthly Hask Anythingのような位置づけを意図しています。<br/><br/>beginnersチャンネルでの回答側は、以下の左側のような応答を厳禁とする運用です。<br/>• それはくだらない質問だ → くだらない質問など無い<br/>• その質問は以前にもあった → 質問者はそんなこと知らない<br/>• Google検索せよ → 検索できないから質問している<br/>beginnersチャンネルでは、例えば以下のレベルの質問から歓迎します。<br/>• <code>:</code> とは何のことですか。<br/>• タプルとは何ですか。<br/></div></div></div><div class="message event" id="message-1606904432.104600"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1606904432.104600">2020-12-02&nbsp;19:20:32 +0900</a></div></div><div class="message__body description">Hask圏を考えるのですね。ありがとうございます。<br/><br/>問題とされることも少ないとのことで、その辺りの事情も知れて良かったです。ありがとうございました。</div></div></div><div class="message event" id="message-1607051514.104800"><div class="content"><div class="summary"><div class="message__header user">1to100pen</div><div class="message__timestamp date"><a class="date" href="#message-1607051514.104800">2020-12-04&nbsp;12:11:54 +0900</a></div></div><div class="message__body description">Haskell における随伴は myuon_myonさんの<https://qiita.com/myuon_myon/items/d598480e4edd7a780ea7|「Haskellと随伴」>という記事が参考になると思います。<br/>また、数学的な話題用の部屋 <a href='#C7Y71415W'>math</a> もどうぞ。</div></div></div><div class="message event" id="message-1607305179.105500"><div class="content"><div class="summary"><div class="message__header user">hatsugai</div><div class="message__timestamp date"><a class="date" href="#message-1607305179.105500">2020-12-07&nbsp;10:39:39 +0900</a></div></div><div class="message__body description">@hatsugai has joined the channel</div></div></div><div class="message event" id="message-1607407239.105700"><div class="content"><div class="summary"><div class="message__header user">yusuke.nakayama1218</div><div class="message__timestamp date"><a class="date" href="#message-1607407239.105700">2020-12-08&nbsp;15:00:39 +0900</a></div></div><div class="message__body description">@yusuke.nakayama1218 has joined the channel</div></div></div><div class="message event" id="message-1607473200.106200"><div class="content"><div class="summary"><div class="message__header user">tcokygets</div><div class="message__timestamp date"><a class="date" href="#message-1607473200.106200">2020-12-09&nbsp;09:20:00 +0900</a></div></div><div class="message__body description">ありがとうございます。返事遅れてすみません。</div></div></div><div class="message event" id="message-1607610810.106600"><div class="content"><div class="summary"><div class="message__header user">kzk0693</div><div class="message__timestamp date"><a class="date" href="#message-1607610810.106600">2020-12-10&nbsp;23:33:30 +0900</a></div></div><div class="message__body description">@kzk0693 has joined the channel</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/CR2TETE5R/12.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>