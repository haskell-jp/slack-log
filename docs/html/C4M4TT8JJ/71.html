<!DOCTYPE html><html><head><meta charset="utf-8"><title>haskell-jp / random #71</title><link rel="stylesheet" href="../../main.css" type="text/css" media="screen"></head><body><div class="ui container"><h1>haskell-jp / random #71</h1><div class="pager ui pagination menu"><a href="../../html/C4M4TT8JJ/70.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div><div class="message_list ui feed"><div class="message event" id="message-1585282246.113400"><div class="content"><div class="summary"><div class="message__header user">kazu</div><div class="message__timestamp date"><a class="date" href="#message-1585282246.113400">2020-03-27&nbsp;13:10:46 +0900</a></div></div><div class="message__body description">@cutsea110 遅い反応ですが、3つの構成子の件。<br/>dataの直和型には、expression problemがあります。<br/>なので、コードを完全に自分で管理でき、後から構成子を増やすことに問題がなければ、単純にdataを使います。<br/>ユーザが拡張する可能性があるなら、PatternSynonymsを使います。</div></div></div><div class="message event" id="message-1585292882.121600"><div class="content"><div class="summary"><div class="message__header user">shin1hi</div><div class="message__timestamp date"><a class="date" href="#message-1585292882.121600">2020-03-27&nbsp;16:08:02 +0900</a></div></div><div class="message__body description"><pre>[n] := ∀ X1,...,Xn . X1 + ... + Xn 
in_n,k :: [n-1] -&gt; [n]</pre><br/>のような抽象概念があれば、<br/>Either つかうかどうか問題は解決しそうだと思いましたが<br/>実際あるのでしょうか。</div></div></div><div class="message event" id="message-1585293157.123200"><div class="content"><div class="summary"><div class="message__header user">shin1hi</div><div class="message__timestamp date"><a class="date" href="#message-1585293157.123200">2020-03-27&nbsp;16:12:37 +0900</a></div></div><div class="message__body description">( dependent type をもつシステムでは、型と項の垣根がないので、普通に定義できそうですが、<br/>Haskell だと厳しいのだろうか。)</div></div></div><div class="message event" id="message-1585293275.124800"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1585293275.124800">2020-03-27&nbsp;16:14:35 +0900</a></div></div><div class="message__body description">拡張可能和みたいなのを指しているんですかね？<br/>ライブラリーとしてはいくつか提供しているものがありますね。<br/><a href='https://hackage.haskell.org/package/extensible-0.8/docs/Data-Extensible-Sum.html'>https://hackage.haskell.org/package/extensible-0.8/docs/Data-Extensible-Sum.html</a> とか</div></div></div><div class="message event" id="message-1585293339.125300"><div class="content"><div class="summary"><div class="message__header user">shin1hi</div><div class="message__timestamp date"><a class="date" href="#message-1585293339.125300">2020-03-27&nbsp;16:15:39 +0900</a></div></div><div class="message__body description">おおお、それです。ありがとうございます！</div></div></div><div class="message event" id="message-1585293431.126600"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1585293431.126600">2020-03-27&nbsp;16:17:11 +0900</a></div></div><div class="message__body description">確かに便利ではあるんですが、競合するものがいくつかあって標準もなかったり、記述が標準よりも冗長になりがちだったりで、なかなかおいそれと使おうとはならないのが悩ましいんですよねぇ :disappointed_relieved:</div></div></div><div class="message event" id="message-1585347712.132200"><div class="content"><div class="summary"><div class="message__header user">cutsea110</div><div class="message__timestamp date"><a class="date" href="#message-1585347712.132200">2020-03-28&nbsp;07:21:52 +0900</a></div></div><div class="message__body description">Thanks <blockquote>@kazu</blockquote></div></div></div><div class="message event" id="message-1585382847.148900"><div class="content"><div class="summary"><div class="message__header user">shin1hi</div><div class="message__timestamp date"><a class="date" href="#message-1585382847.148900">2020-03-28&nbsp;17:07:27 +0900</a></div></div><div class="message__body description">Haskell でsubtype を定義する方法ってありますか？<br/>例えば、NaturalNumbers <code>N</code> に対して、EvenNumbers <code>E</code> を <code>N</code> のsubtype としてユーザーが定義したいような状況です。</div></div></div><div class="message event" id="message-1585383333.150700"><div class="content"><div class="summary"><div class="message__header user">shin1hi</div><div class="message__timestamp date"><a class="date" href="#message-1585383333.150700">2020-03-28&nbsp;17:15:33 +0900</a></div></div><div class="message__body description">コンパイラが型推論に部分型を用いているならば、<br/>部分型をユーザー定義した場合、型推論器の挙動が少し変わってくるな、と思ったので、そういう仕様が提供されているのか気になりました。</div></div></div><div class="message event" id="message-1585384639.154400"><div class="content"><div class="summary"><div class="message__header user">shin1hi</div><div class="message__timestamp date"><a class="date" href="#message-1585384639.154400">2020-03-28&nbsp;17:37:19 +0900</a></div></div><div class="message__body description">subtype がユーザ定義できる言語の想定仕様としては、<br/>例えば、<br/>• Prelude に Set が内包されていると仮定して、subset =&gt; subtype という法則が内部言語に存在する<br/>• subtype relation が Prelude に定義されていて、ユーザ定義されたsubtype relation が内部言語と競合しないことを確かめてからそれらを取り入れる<br/>などが考えられるのではないかと思いましたが、<br/>このような機能は、Haskell にはふくまれていないのではないかと思う。<br/>（二つ目の機能があればの空想の話ですが、もしそれを安易な競合チェックで済ましてしまえば、部分型の推論器を容易にハックできてしまうのではないかなどとも思いました。だからこのような機能は現時点ではない？）</div></div></div><div class="message event" id="message-1585389955.156000"><div class="content"><div class="summary"><div class="message__header user">matsubara0507</div><div class="message__timestamp date"><a class="date" href="#message-1585389955.156000">2020-03-28&nbsp;19:05:55 +0900</a></div></div><div class="message__body description">最後の仕様の話はよくわからないけど、多くの言語で継承などによって実現されてる機能はないです</div></div></div><div class="message event" id="message-1585390434.156300"><div class="content"><div class="summary"><div class="message__header user">shin1hi</div><div class="message__timestamp date"><a class="date" href="#message-1585390434.156300">2020-03-28&nbsp;19:13:54 +0900</a></div></div><div class="message__body description">ありがとうございます。</div></div></div><div class="message event" id="message-1585437555.157300"><div class="content"><div class="summary"><div class="message__header user">U0111FK01HD</div><div class="message__timestamp date"><a class="date" href="#message-1585437555.157300">2020-03-29&nbsp;08:19:15 +0900</a></div></div><div class="message__body description">@U0111FK01HD has joined the channel</div></div></div><div class="message event" id="message-1585456248.157700"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1585456248.157700">2020-03-29&nbsp;13:30:48 +0900</a></div></div><div class="message__body description">詳しい <a href='https://qiita.com/mod_poppo/items/80c442a1d95471e6ac55'>https://qiita.com/mod_poppo/items/80c442a1d95471e6ac55</a><br/>自前でrewrite rule書かないと最適化はされないのか... :disappointed:</div></div></div><div class="message event" id="message-1585460704.158000"><div class="content"><div class="summary"><div class="message__header user">mizunashi-mana</div><div class="message__timestamp date"><a class="date" href="#message-1585460704.158000">2020-03-29&nbsp;14:45:04 +0900</a></div></div><div class="message__body description">記事中にもありますが、あくまで Addr 用の変換関数が用意できる場合、それを元に rewrite rule が書けるという話で、厳密に言えば最適化ではありません<br/><br/>unpackCString との rewrite による変換がない場合でも、foldr で pack 処理が書いてあり、インライン展開できるなら、foldr / build は入るようになっています (この場合、unpack 処理は unpackFoldrCString# という関数で行なわれ、リストは生成されません)</div></div></div><div class="message event" id="message-1585472241.158400"><div class="content"><div class="summary"><div class="message__header user">igrep</div><div class="message__timestamp date"><a class="date" href="#message-1585472241.158400">2020-03-29&nbsp;17:57:21 +0900</a></div></div><div class="message__body description">おお、すみません、周辺をちゃんと読めてませんでした</div></div></div></div><div class="pager ui pagination menu"><a href="../../html/C4M4TT8JJ/70.html" class="pager__previous item">Previous</a><a href="../../" class="pager__top item">Top</a></div></div></body></html>